(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[64529],{477565:e=>{e.exports={crop:"crop-KgzMMF6Z",flex:"flex-KgzMMF6Z",mobileStretch:"mobileStretch-KgzMMF6Z",allowShrinkWidth:"allowShrinkWidth-KgzMMF6Z",notAllowShrinkWidth:"notAllowShrinkWidth-KgzMMF6Z",fixedHeader:"fixedHeader-KgzMMF6Z",fixedFooter:"fixedFooter-KgzMMF6Z",mainScrollWrapper:"mainScrollWrapper-KgzMMF6Z",fixedHeaderContent:"fixedHeaderContent-KgzMMF6Z",fixedFooterContent:"fixedFooterContent-KgzMMF6Z",noScroll:"noScroll-KgzMMF6Z",main:"main-KgzMMF6Z",mainContent:"mainContent-KgzMMF6Z",scrollContainer:"scrollContainer-KgzMMF6Z"}},196967:e=>{e.exports={contentDefaultAppearanceMobile:"contentDefaultAppearanceMobile-ODkmI6nR",contentDefaultAppearance:"contentDefaultAppearance-ODkmI6nR",begin:"begin-ODkmI6nR",end:"end-ODkmI6nR",top:"top-ODkmI6nR",bottom:"bottom-ODkmI6nR"}},561790:e=>{e.exports={content:"content-sCtoIJXr",stretch:"stretch-sCtoIJXr",begin:"begin-sCtoIJXr",end:"end-sCtoIJXr",top:"top-sCtoIJXr",bottom:"bottom-sCtoIJXr",backdrop:"backdrop-sCtoIJXr"}},694030:e=>{e.exports={scrollTrap:"scrollTrap-cUlsSss_",scrollTrapContent:"scrollTrapContent-cUlsSss_"}},42177:e=>{e.exports={bodyNoScroll:"bodyNoScroll-bUGsvF2L"}},909358:(e,t,n)=>{"use strict";n.d(t,{useIsFirstRender:()=>i,useIsNonFirstRender:()=>o});var s=n(50959);function i(){const[e,t]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{t(!1)}),[]),e}function o(){return!i()}},222463:(e,t,n)=>{"use strict";n.d(t,{useMatchMedia:()=>o,useSafeMatchMedia:()=>i});var s=n(50959);function i(e,t=!1){const[n,i]=(0,s.useState)(t);return(0,s.useEffect)((()=>{const t=window.matchMedia(e);function n(){i(t.matches)}return n(),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}}),[e]),n}function o(e){const t=(0,s.useMemo)((()=>window.matchMedia(e).matches),[]);return i(e,t)}},662929:(e,t,n)=>{"use strict";n.d(t,{useMergedRefs:()=>o});var s=n(50959),i=n(551080);function o(e){return(0,s.useCallback)((0,i.mergeRefs)(e),e)}},315020:(e,t,n)=>{"use strict";n.d(t,{POPOVER_DEFAULT_CLOSE_ON_CLICK_AWAY:()=>u,POPOVER_DEFAULT_CLOSE_ON_ESCAPE:()=>l,POPOVER_DEFAULT_CLOSE_ON_RESIZE_WINDOW:()=>d,POPOVER_DEFAULT_CLOSE_ON_SCROLL_OUTSIDE:()=>c,POPOVER_DEFAULT_CLOSE_ON_TAB:()=>h,POPOVER_DEFAULT_HEIGHT:()=>a,POPOVER_DEFAULT_IF_NONE_PLACEMENT_RULE_MATCHED:()=>i,POPOVER_DEFAULT_PLACEMENT_RULES:()=>r,POPOVER_DEFAULT_WIDTH:()=>o});var s=n(945239);const i={pickRule:{by:"smallest-overlap",criteria:"area"},horizontal:"keepNonFitting",vertical:"cropSlideToFit"},o=[{by:"anchor",type:"min"},{by:"content"}],a=[],r=[s.PLACEMENT_BOTTOM_ALIGN_LEFT,s.PLACEMENT_TOP_ALIGN_LEFT,s.PLACEMENT_BOTTOM_ALIGN_RIGHT,s.PLACEMENT_TOP_ALIGN_RIGHT],l=!0,u="pointerdown",c=!0,d=!0,h=!0},477018:(e,t,n)=>{"use strict";n.d(t,{PopoverContextProvider:()=>r,usePopoverContext:()=>l});var s=n(50959),i=n(226995),o=n.n(i);const a=(0,s.createContext)({isAnchorPositioner:!1,isMobilePositioner:!1,closePopover:()=>{},isRtl:!1,isInPopover:!1});function r(e){const{positioner:t,onClose:n,isRtl:i,children:r}=e,l=(0,s.useMemo)((()=>({
isAnchorPositioner:"anchor"===t,isMobilePositioner:"mobile"===t,closePopover:n,isRtl:i,isInPopover:!0})),[t,n,i]);return s.createElement(a.Provider,{value:l},s.createElement("div",{className:"mobile"===t?o().mobileContext:o().anchorContext},r))}function l(){return(0,s.useContext)(a)}},522172:(e,t,n)=>{"use strict";n.d(t,{AnchorPositioner:()=>u});var s=n(50959),i=n(840563),o=n(515550),a=n(610466);function r(e){const t=(0,s.useRef)(null),{anchoredAt:n,isOpen:r,refObjectToContentWrapperElement:l=t,width:u,height:c,isRtl:d,placementRules:h,ifNonePlacementRuleMatched:m,anchorPositionerCardAppearanceClassname:p,children:f,role:y,ariaLabelledby:_,ariaMultiselectable:v,idOfContentWrapperElement:g,onPlacementRuleSelected:E,getRootRect:M,repositionTriggers:S,...D}=e,A=D,k=(0,a.useRefRect)(n,r,S);return(0,o.useAnchorPortalPair)(n,l),s.createElement(i.RectanglePositioner,{width:u,height:c,isRtl:d,isOpen:r,placementRules:h,ifNonePlacementRuleMatched:m,anchorPositionerCardAppearanceClassname:p,children:f,role:y,ariaLabelledby:_,ariaMultiselectable:v,idOfContentWrapperElement:g,refObjectToContentWrapperElement:l,anchoredAt:k,onPlacementRuleSelected:E,getRootRect:M,...A})}var l=n(267521);function u(e){const t=(0,s.useRef)(null),{anchored:n,placementRules:o,ifNonePlacementRuleMatched:a,width:u,height:c,isOpen:d,isRtl:h,anchorPositionerCardAppearanceClassname:m,refToContentWrapperElement:p=t,idOfContentWrapperElement:f,ariaLabelledby:y,ariaMultiselectable:_,role:v,children:g,getRootRect:E,repositionTriggers:M,...S}=e,D=S,A=(0,l.useFunctionalRefObject)(p);switch(n.type){case"element":return s.createElement(r,{placementRules:o,ifNonePlacementRuleMatched:a,width:u,height:c,isOpen:d,isRtl:h,anchorPositionerCardAppearanceClassname:m,refObjectToContentWrapperElement:A,idOfContentWrapperElement:f,ariaLabelledby:y,ariaMultiselectable:_,role:v,children:g,anchoredAt:n.at,getRootRect:E,repositionTriggers:M,...D});case"rectangle":return s.createElement(i.RectanglePositioner,{placementRules:o,ifNonePlacementRuleMatched:a,width:u,height:c,isOpen:d,isRtl:h,anchorPositionerCardAppearanceClassname:m,refObjectToContentWrapperElement:A,idOfContentWrapperElement:f,ariaLabelledby:y,ariaMultiselectable:_,role:v,children:g,anchoredAt:n.at,getRootRect:E,...D})}}},661572:(e,t,n)=>{"use strict";n.d(t,{ifNonePlacementRuleMatchedToImpl:()=>a});var s=n(9194);const i={horizontal:e=>e[0].overflow.x,vertical:e=>e[0].overflow.y,area:n(951009).bySmallestArea};var o=n(708082);function a(e){return{pickRule:function(e){switch(e?.by){case"smallest-overlap":return(0,s.ruleSelectionBehaviorBySmallestOverlapToImpl)((t=e.criteria,i[t]));case"name":return t=>function(e,t){return e.find((e=>e[1].name===t.name))??e[0]}(t,e);default:return e=>function(e){return e[0]}(e)}var t}(e.pickRule),vertical:u(e.vertical),horizontal:u(e.horizontal)}}const r={keepNonFitting:function(e){return(0,o.createInterval)(e.start,e.length)},cropSlideToFit:function(e,t,n){if(t.start+t.length>=n.start&&t.start<=n.start+n.length){if(e.start<n.start)return(0,
o.createInterval)(n.start,e.length+e.start-n.start);return e.start+e.length>n.start+n.length?(0,o.createInterval)(e.start,n.start+n.length-e.start):(0,o.createInterval)(e.start,e.length)}{const s=t.start+t.length<=n.start,i=Math.min(e.length,n.length);return s?(0,o.createInterval)(n.start,i):(0,o.createInterval)(n.length-i,i)}},slideToFit:n(624787).applySlideToFitOnAxis},l="keepNonFitting";function u(e){return r[e??l]}},679952:(e,t,n)=>{"use strict";n.d(t,{MobilePositioner:()=>A});var s=n(50959),i=n(497754),o=n.n(i),a=n(515550),r=n(430495),l=n(396853),u=n(267521),c=n(920057),d=n(662929),h=n(23482),m=n(42177),p=n.n(m);function f(e=!0){const t=window.innerWidth-document.body.clientWidth;var n,s;if(e||!h.isSafari||0===t)return document.body.style.setProperty("--ui-lib-private-scrollTrap-scroll-width",`${t}px`),n=document.body,s=p().bodyNoScroll,n.className=[n.className,s].join(" "),()=>{!function(e,t){const n=e.className.replace(t,""),s=n.split(" ").filter(Boolean).join(" ");e.className=s}(document.body,p().bodyNoScroll),document.body.classList.contains(p().bodyNoScroll)||document.body.style.removeProperty("--ui-lib-private-scrollTrap-scroll-width")}}var y=n(694030),_=n.n(y);const v=e=>{e&&g(e)};function g(e){e.scrollTop=5e3,e.scrollLeft=5e3}const E=(0,c.default)((e=>{g(e.currentTarget)}),100);function M(e){const{reference:t,disableSafariScrollbars:n=!0}=e,i=(0,d.useMergedRefs)([v,t]);return(0,s.useLayoutEffect)((()=>f(n)),[n]),s.createElement("div",{className:_().scrollTrap,ref:i,onScroll:E},e.children,s.createElement("div",{className:_().scrollTrapContent}))}var S=n(561790),D=n.n(S);function A(e){const t=(0,s.useRef)(null),{isOpen:n,onClose:i,children:c,cardAppearanceClassname:d,anchoredAt:h,refToContentWrapperElement:m=t,side:p="bottom",idOfContentWrapperElement:f,ariaLabelledby:y,ariaMultiselectable:_,role:v,stretch:g,...E}=e,S=E,A=(0,u.useFunctionalRefObject)(m);return(0,a.useAnchorPortalPair)(h,A),n?s.createElement(r.Portal,null,s.createElement(M,{reference:A,disableSafariScrollbars:!1},s.createElement("div",{...(0,l.contentProps)(f,y,_,v),...S,className:o()(D().content,D()[p],d,g&&D().stretch)},c),s.createElement("div",{role:"presentation",className:D().backdrop,onClick:()=>{i(!1)},onPointerDown:e=>{e.stopPropagation()}}))):null}},700366:(e,t,n)=>{"use strict";n.d(t,{useCloseOnClickAway:()=>l});var s=n(515550),i=n(824992),o=n(573768),a=n(984201),r=n(315020);function l(e,t,n,l,u){const c="boolean"==typeof l?r.POPOVER_DEFAULT_CLOSE_ON_CLICK_AWAY:l;(0,a.useConditionalEffect)(!!e,(()=>(0,i.windowEvent)(c)((e=>{const i={x:e.clientX,y:e.clientY},a=n.current;(0,o.isInExcludedArea)(i,u)||a&&(0,s.isXYInsideElementThroughPortals)(a,i.x,i.y)||t(!1,"currentLevel")}))),[t,u,n,c])}},444077:(e,t,n)=>{"use strict";n.d(t,{useCloseOnEscape:()=>r});var s=n(50959),i=n(267521),o=n(662929),a=n(591800);function r(e,t,n){const r=(0,s.useCallback)((s=>{if(!e||!s)return;s.addEventListener("keydown",(e=>{if(27!==(0,a.hashFromEvent)(e))return;const s=n.current;if(!s)return;const i=e.target;if(!(i instanceof HTMLElement))return
;s.contains(i)&&(e.preventDefault(),e.stopPropagation(),t(!0,"currentLevel"))}))}),[e]);return(0,i.useFunctionalRefObject)((0,o.useMergedRefs)([n,r]))}},370669:(e,t,n)=>{"use strict";n.d(t,{useCloseOnTab:()=>a});var s=n(984201),i=n(591800);const o=(0,n(824992).windowEvent)("keydown");function a(e,t,n){(0,s.useConditionalEffect)(!!e,(()=>o((e=>{const n=(0,i.hashFromEvent)(e);9!==n&&n!==9+i.Modifiers.Shift||t(!0,"currentLevel")}),!0)),[t,n])}},573768:(e,t,n)=>{"use strict";n.d(t,{isInExcludedArea:()=>i});var s=n(861195);function i(e,t){if(!t)return!1;const n="current"in t?t.current?.getBoundingClientRect():t;return!!n&&(0,s.isInRect)(e,n)}},767814:(e,t,n)=>{"use strict";n.d(t,{useDefaultPopoverRepositionClose:()=>r});var s=n(50959),i=n(984201);var o=n(486259),a=n(291647);function r(e,t,n){const r=(0,a.useWindowResizeTrigger)(e),l=(0,a.useWindowScrollTrigger)(!n.closeOnScrollOutside&&e);return function(e,t,n){const o=(0,s.useRef)({clientWidth:void 0,clientHeight:void 0}),a=(0,s.useMemo)((()=>function(e){const t=[];return 1&e&&t.push("clientWidth"),2&e&&t.push("clientHeight"),t}(n)),[n]);(0,i.useConditionalEffect)(e&&0!==n,(()=>{const e=()=>{a.forEach((e=>{const n=document.documentElement[e];void 0!==o.current[e]?o.current[e]!==n&&(t(!0,"currentLevel"),o.current[e]=n):o.current[e]=n}))};return e(),window.addEventListener("resize",e,!0),()=>{window.removeEventListener("resize",e,!0),o.current={clientWidth:void 0,clientHeight:void 0}}}),[t,a])}(!!n.closeOnResizeWindow&&e,t,3),(0,o.useCloseOnScrollOutside)(!!n.closeOnScrollOutside&&e,t,n.ref),[r,l]}},8626:(e,t,n)=>{"use strict";function s(e){return o(e,a)}function i(e){return o(e,r)}function o(e,t){const n=Object.entries(e).filter(t),s={};for(const[e,t]of n)s[e]=t;return s}function a(e){const[t,n]=e;return 0===t.indexOf("data-")&&"string"==typeof n}function r(e){return 0===e[0].indexOf("aria-")}n.d(t,{filterAriaProps:()=>i,filterDataProps:()=>s,filterProps:()=>o,isAriaAttribute:()=>r,isDataAttribute:()=>a})},414879:(e,t,n)=>{"use strict";var s,i;n.r(t),n.d(t,{Months:()=>i,WeekDays:()=>s}),function(e){e[e.SUNDAY=1]="SUNDAY",e[e.MONDAY=2]="MONDAY",e[e.TUESDAY=3]="TUESDAY",e[e.WEDNESDAY=4]="WEDNESDAY",e[e.THURSDAY=5]="THURSDAY",e[e.FRIDAY=6]="FRIDAY",e[e.SATURDAY=7]="SATURDAY"}(s||(s={})),function(e){e[e.JANUARY=0]="JANUARY",e[e.FEBRUARY=1]="FEBRUARY",e[e.MARCH=2]="MARCH",e[e.APRIL=3]="APRIL",e[e.MAY=4]="MAY",e[e.JUNE=5]="JUNE",e[e.JULY=6]="JULY",e[e.AUGUST=7]="AUGUST",e[e.SEPTEMBER=8]="SEPTEMBER",e[e.OCTOBER=9]="OCTOBER",e[e.NOVEMBER=10]="NOVEMBER",e[e.DECEMBER=11]="DECEMBER"}(i||(i={}))},936410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{monthsFullNames:()=>o,monthsShortNames:()=>a,weekDaysFullNames:()=>r,weekDaysMiniNames:()=>u,weekDaysShortNames:()=>l});var s=n(444372),i=n(414879);const o={[i.Months.JANUARY]:s.t(null,void 0,n(100200)),[i.Months.FEBRUARY]:s.t(null,void 0,n(581069)),[i.Months.MARCH]:s.t(null,void 0,n(193878)),[i.Months.APRIL]:s.t(null,void 0,n(528896)),[i.Months.MAY]:s.t(null,void 0,n(125734)),[i.Months.JUNE]:s.t(null,void 0,n(661487)),
[i.Months.JULY]:s.t(null,void 0,n(206608)),[i.Months.AUGUST]:s.t(null,void 0,n(811081)),[i.Months.SEPTEMBER]:s.t(null,void 0,n(632179)),[i.Months.OCTOBER]:s.t(null,void 0,n(137997)),[i.Months.NOVEMBER]:s.t(null,void 0,n(604607)),[i.Months.DECEMBER]:s.t(null,void 0,n(890082))},a={[i.Months.JANUARY]:s.t(null,void 0,n(562310)),[i.Months.FEBRUARY]:s.t(null,void 0,n(302507)),[i.Months.MARCH]:s.t(null,void 0,n(92767)),[i.Months.APRIL]:s.t(null,void 0,n(227072)),[i.Months.MAY]:s.t(null,{context:"short"},n(13132)),[i.Months.JUNE]:s.t(null,void 0,n(800429)),[i.Months.JULY]:s.t(null,void 0,n(853786)),[i.Months.AUGUST]:s.t(null,void 0,n(546450)),[i.Months.SEPTEMBER]:s.t(null,void 0,n(806816)),[i.Months.OCTOBER]:s.t(null,void 0,n(912179)),[i.Months.NOVEMBER]:s.t(null,void 0,n(526899)),[i.Months.DECEMBER]:s.t(null,void 0,n(532084))},r={[i.WeekDays.SUNDAY]:s.t(null,void 0,n(661480)),[i.WeekDays.MONDAY]:s.t(null,void 0,n(419573)),[i.WeekDays.TUESDAY]:s.t(null,void 0,n(682160)),[i.WeekDays.WEDNESDAY]:s.t(null,void 0,n(894226)),[i.WeekDays.THURSDAY]:s.t(null,void 0,n(879137)),[i.WeekDays.FRIDAY]:s.t(null,void 0,n(503570)),[i.WeekDays.SATURDAY]:s.t(null,void 0,n(130348))},l={[i.WeekDays.SUNDAY]:s.t(null,void 0,n(377493)),[i.WeekDays.MONDAY]:s.t(null,void 0,n(837150)),[i.WeekDays.TUESDAY]:s.t(null,void 0,n(811916)),[i.WeekDays.WEDNESDAY]:s.t(null,void 0,n(711532)),[i.WeekDays.THURSDAY]:s.t(null,void 0,n(771388)),[i.WeekDays.FRIDAY]:s.t(null,void 0,n(922928)),[i.WeekDays.SATURDAY]:s.t(null,void 0,n(232273))},u={[i.WeekDays.SUNDAY]:s.t(null,{context:"day_of_week"},n(875005)),[i.WeekDays.MONDAY]:s.t(null,{context:"day_of_week"},n(930961)),[i.WeekDays.TUESDAY]:s.t(null,{context:"day_of_week"},n(244254)),[i.WeekDays.WEDNESDAY]:s.t(null,{context:"day_of_week"},n(392578)),[i.WeekDays.THURSDAY]:s.t(null,{context:"day_of_week"},n(608765)),[i.WeekDays.FRIDAY]:s.t(null,{context:"day_of_week"},n(923230)),[i.WeekDays.SATURDAY]:s.t(null,{context:"day_of_week"},n(894748))}},266807:e=>{e.exports={wrapper:"wrapper-hPiAkrn3",timezone:"timezone-hPiAkrn3",largePadding:"largePadding-hPiAkrn3",sessionDayWrapper:"sessionDayWrapper-hPiAkrn3",nowWrapper:"nowWrapper-hPiAkrn3",now:"now-hPiAkrn3",sessionDay:"sessionDay-hPiAkrn3",weekDay:"weekDay-hPiAkrn3",sessionDaySegments:"sessionDaySegments-hPiAkrn3",timeMarkWrapper:"timeMarkWrapper-hPiAkrn3",timeMarkSegment:"timeMarkSegment-hPiAkrn3",timeMark:"timeMark-hPiAkrn3",timeMarkSegmentAlignByEnds:"timeMarkSegmentAlignByEnds-hPiAkrn3",segment:"segment-hPiAkrn3",small:"small-hPiAkrn3",start:"start-hPiAkrn3",end:"end-hPiAkrn3",active:"active-hPiAkrn3",green:"green-hPiAkrn3",orange:"orange-hPiAkrn3",blue:"blue-hPiAkrn3",gray:"gray-hPiAkrn3",tooltip:"tooltip-hPiAkrn3",time:"time-hPiAkrn3"}},25433:(e,t,n)=>{"use strict";n.d(t,{FullSessionScheduleWidget:()=>a});var s=n(50959),i=n(697897),o=n(256042);class a{constructor(e){this._source=e,this._fullSessionScheduleViewModel=new i.FullSessionScheduleViewModel(e)}destroy(){this._fullSessionScheduleViewModel.destroy()}renderer(e,t){
const n=this._source.marketStatusModel()?.status().value();return"expired"===n||"delisted"===n?null:(0,s.createElement)(o.FullSessionScheduleRenderer,{key:e,className:t,showAllDays:void 0,sessionDays:this._fullSessionScheduleViewModel.sessionsDays,now:this._fullSessionScheduleViewModel.currentTimeValue(),timezone:this._fullSessionScheduleViewModel.timezone()})}updateSource(e){this._source=e,this._fullSessionScheduleViewModel.destroy(),this._fullSessionScheduleViewModel=new i.FullSessionScheduleViewModel(e)}}},256042:(e,t,n)=>{"use strict";n.d(t,{FullSessionScheduleRenderer:()=>v});var s=n(50959),i=n(497754),o=n(650151),a=n(444372),r=n(631078),l=n(900608),u=n(266807);const c=new WeakMap;function d(e){return c.has(e)||c.set(e,(0,l.randomHash)()),(0,o.ensureDefined)(c.get(e))}const h=new Map([[0,u.green],[1,u.orange],[2,u.blue],[3,u.gray]]),m=new Map([[0,a.t(null,void 0,n(241410))],[1,a.t(null,void 0,n(236018))],[2,a.t(null,void 0,n(673897))],[3,a.t(null,void 0,n(762464))]]),p=a.t(null,void 0,n(763538));function f(e){const{segment:t,forceStart:n,forceEnd:o}=e,a=t.end.value-t.start.value,r=a<.03,l={left:100*t.start.value+"%",width:`calc(${100*a}% + ${r?2:0}px)`},c=i(u.segment,h.get(t.type),(n||t.start.isFirstOrLastPoint)&&u.start,(o||t.end.isFirstOrLastPoint)&&u.end,r&&u.small,"common-tooltip-html","apply-common-tooltip"),d=function(e,t){return`<div class="${u.tooltip}">\n\t\t<span class="${h.get(t)}">${m.get(t)}</span>\n\t\t<span class="${u.time}">${e}</span>\n\t</div>`}(t.tooltip,t.type);return s.createElement("div",{className:c,style:l,"data-tooltip":d})}function y(e){const{sessionDay:t}=e,n=t.entries.map(((e,n)=>s.createElement(f,{key:`${d(e)}Segment`,segment:e,forceStart:0===n&&3===e.type,forceEnd:n===t.entries.length-1&&3===e.type}))),o=i(u.sessionDay,t.isActive&&u.active);return s.createElement("div",{className:o},s.createElement("div",{className:u.weekDay},t.title),s.createElement("div",{className:u.sessionDaySegments},n))}function _(e){const{sessionDays:t,currentTimeMark:n}=e,o=[],a=parseInt(Object.keys(t).filter((e=>t[parseInt(e)].isActive))[0]),r=t[a].entries.filter((e=>e.start.value<=n&&e.end.value>=n))[0];if((r.start.isFirstOrLastPoint||3===r.type)&&o.push(r.start),(r.end.isFirstOrLastPoint||3===r.type)&&o.push(r.end),0===o.length)return null;o.sort(((e,t)=>e.value-t.value));const l=o.map((e=>s.createElement("div",{key:d(e),className:u.timeMark},e.title))),c=100*(2===o.length?o[1].value-o[0].value:0),h=i(c>12&&u.timeMarkSegmentAlignByEnds,u.timeMarkSegment);return s.createElement("div",{className:u.sessionDay},s.createElement("div",{className:u.weekDay}),s.createElement("div",{className:u.timeMarkWrapper},s.createElement("div",{className:h,style:{left:100*o[0].value+"%",width:`${c}%`}},l)))}function v(e){const{className:t,timezone:n,showAllDays:o,timeZoneClassName:a}=e,l=(0,r.useWatchedValueReadonly)({watchedValue:e.sessionDays}),c=(0,r.useWatchedValueReadonly)({watchedValue:e.now}),d=Object.values(l).filter((e=>e.isActive))[0],h=i(t,u.wrapper);return s.createElement("div",{className:h
},s.createElement("div",{className:u.sessionDayWrapper},o?s.createElement(s.Fragment,null,Object.values(l).map(((e,t)=>s.createElement(y,{key:t,sessionDay:e})))):s.createElement(y,{sessionDay:d}),s.createElement("div",{className:u.nowWrapper},s.createElement("div",{className:u.now,style:{left:100*c+"%"}}))),s.createElement(_,{sessionDays:l,currentTimeMark:c}),s.createElement("div",{className:i(u.timezone,a,o&&u.largePadding)},`${p}: ${n}`))}},697897:(e,t,n)=>{"use strict";n.d(t,{FullSessionScheduleViewModel:()=>$});var s=n(986818),i=n(536794),o=n(276536),a=n(820028),r=n(388741);function l(e){return e/o.minutesPerDay}function u(e){return Math.round(e*o.minutesPerDay)}var c=n(650151),d=n(586563),h=n(414879);const m=[h.WeekDays.SUNDAY,h.WeekDays.MONDAY,h.WeekDays.TUESDAY,h.WeekDays.WEDNESDAY,h.WeekDays.THURSDAY,h.WeekDays.FRIDAY,h.WeekDays.SATURDAY];function p(e){return t=>function(e,t){return(e+t+6)%7+1}(t,e)}const f=p(-1),y=p(1);const _=function(e){return e&&e.length?e[0]:void 0};var v=n(82593),g=n(936410),E=n(909456);function M(e){for((0,c.assert)(Number.isInteger(e),"timeMinutes expected to be integer number");e>o.minutesPerDay;)e-=o.minutesPerDay;const t=e%60,n=(e-t)/60;return(0,E.numberToStringWithLeadingZero)(n,2)+":"+(0,E.numberToStringWithLeadingZero)(t,2)}function S(e,t){return`${e} — ${t}`}function D(e,t){return`${g.weekDaysShortNames[e]} ${M(t)}`}function A(e,t,n,s){(0,c.assert)(t!==o.minutesPerDay,"Start time expected to be normalized (24:00 as range start is not allowed)"),(0,c.assert)(0!==s,"End time expected to be normalized (00:00 as range end is not allowed)");const i=function(e,t,n,s){const i=e*o.minutesPerDay+t;let a=n*o.minutesPerDay+s;return a<i&&(a+=7*o.minutesPerDay),a-i}(e,t,n,s);return i<o.minutesPerDay||i===o.minutesPerDay&&0===t?function(e,t){return S(M(e),M(t))}(t,s):function(e,t,n,s){return S(D(e,t),D(n,s))}(e,t,n,s)}function k(e,t){return{value:e,title:M(u(e)),isFirstOrLastPoint:t}}function T(e){return 3!==e.type}function w(e,t){return{dayIndex:e,entries:t.filter(T)}}function R(e,t,n,s=t){const i=n(t),o=e[i];return i!==s&&0===o.entries.length?R(e,i,n,s):w(i,e[i].entries)}function b(e){return(t,n)=>R(t,n,e)}const P=b(f),C=b(y);function N(e,t,n,s){return(i,o,a)=>void 0===i?[s,a]:i===e?[t,n(o)]:[i,o]}const O=N(1,0,y,0),W=N(0,1,f,1);function I(e,t,n,s,i){const[o,a]=O(e,t,i),[r,l]=W(n,s,i);(0,c.assert)(t!==n||o<r,`Days are same (${t}) but prev entry time (${o}) >= next entry time (${r})`);const d=u(o),h=u(r);return m=k(a!==i?0:o,a===i),p=k(l!==i?1:r,l===i),f=3,y=A(a,d,l,h),{start:m,end:p,type:f,tooltip:y};var m,p,f,y}function x(e,t,n,s,i){return I(e?.end?.value,t,n?.start?.value,s,i)}function F(e){const t=[...e.entries];for(let n=1;n<e.entries.length;n++){const s=e.entries[n-1],i=e.entries[n];if(i.start.value!==s.end.value){const n=x(s,e.dayIndex,i,e.dayIndex,e.dayIndex);t.push(n)}}return t.sort(((e,t)=>e.start.value-t.start.value)),t}function L(e,t){const n=(0,v.default)(t.entries),s=t.dayIndex,i=(0,c.ensureDefined)(_(e.entries));return 0===i.start.value?[]:[x(n,s,i,e.dayIndex,e.dayIndex)]}
function U(e,t){const n=_(t.entries),s=t.dayIndex,i=(0,c.ensureDefined)((0,v.default)(e.entries));return 1===i.end.value?[]:[x(i,e.dayIndex,n,s,e.dayIndex)]}function V(e,t){const n={thisDay:w(e,t[e].entries),prevDay:P(t,e),nextDay:C(t,e)};return function({thisDay:e,prevDay:t,nextDay:n}){if(0===e.entries.length)return[x((0,v.default)(t.entries),t.dayIndex,_(n.entries),n.dayIndex,e.dayIndex)]}(n)??function({thisDay:e,prevDay:t,nextDay:n}){const s=e.dayIndex;if(t.dayIndex!==s||n.dayIndex!==s)return;const o=e.entries,a=(0,c.ensureDefined)(_(o)),r=(0,c.ensureDefined)((0,v.default)(o));return[0!==a.start.value?I(0,s,a.start.value,s,s):void 0,...F(e),1!==r.end.value?I(r.end.value,s,1,s,s):void 0].filter(i.isExistent)}(n)??function(e){return[...L(e.thisDay,e.prevDay),...F(e.thisDay),...U(e.thisDay,e.nextDay)]}(n)}var Y=n(208092);const z=function(e){for(var t=-1,n=null==e?0:e.length,s={};++t<n;){var i=e[t];s[i[0]]=i[1]}return s}(m.map((e=>[e,{title:g.weekDaysShortNames[e],isActive:!1,entries:[]}])));function B(e,t,n){const s=e[n].entries;s.push(t),s.sort(((e,t)=>e.start.value-t.start.value))}function H(e,t){const n=function(e){if(null===e)return new Map;if(void 0===e.subsessions)return new Map([[0,new Y.SessionsSpec(e.timezone,e.session_display??e.session,e.session_holidays,e.corrections)]]);const t="regular",n="premarket",s="postmarket",i=[t,n,s],o=new Map;for(const a of i){let i=null;switch(a){case t:i=0;break;case n:i=1;break;case s:i=2}if(null!==i){const t=e.subsessions.find((e=>e.id===a));void 0!==t&&o.set(i,new Y.SessionsSpec(e.timezone,t["session-display"]||t.session,e.session_holidays,t["session-correction"]))}}return o}(e),s=t??(0,o.utc_to_cal)((0,o.get_timezone)(e?.timezone??"Etc/UTC"),Date.now()),i=(t?.getUTCDay()??(new Date).getDay())%7+1;const a=(0,d.deepCopy)(z);a[i].isActive=!0;for(const e of Array.from(n.keys())){const t=(0,c.ensureDefined)(n.get(e)),i=(0,o.get_day_of_week)(s),r=(0,o.clone)(s);(0,o.add_date)(r,-i),(0,o.set_hms)(r,0,0,0,0);const u=(0,o.clone)(r);(0,o.add_date)(u,7);let d=t.alignToNearestSessionStart(r,t.inSession(r)?-1:1);for(;d.getTime()<u.getTime();){const n=t.alignToNearestSessionEnd(d,1),s=(0,o.get_day_of_week)(d),i=(0,o.get_day_of_week)(n),c=(0,o.get_minutes_from_midnight)(d),h=(0,o.get_minutes_from_midnight)(n)+1,m=l(c),p=l(h),f=A(s,c,i,h);s===i?B(a,{start:k(m,!0),end:k(p,!0),type:e,tooltip:f},s):(d.getTime()>r.getTime()&&B(a,{start:k(m,!0),end:k(1,!1),type:e,tooltip:f},s),n.getTime()<u.getTime()&&B(a,{start:k(0,!1),end:k(p,!0),type:e,tooltip:f},i)),(0,o.add_minutes)(n,1),d=t.alignToNearestSessionStart(n,1)}}return function(e){const t=new Map;for(const n of m)t.set(n,V(n,e));for(const n of m)e[n].entries=(0,c.ensureDefined)(t.get(n))}(a),{newSessionsDays:a,newTodaySession:a[i]}}function J(e){return(0,o.get_cal_from_unix_timestamp_ms)((0,o.get_timezone)(e.timezone),window.ChartApiInstance.serverTime()-1e3*(0,r.getSymbolDelaySeconds)(e))}class ${constructor(e){this.sessionsDays=new a.WatchedValue((0,i.clone)(z)),this.todaySession=new a.WatchedValue((0,i.clone)({entries:[]})),
this._currentTime=new a.WatchedValue(-1),this._symbolInfo=e.symbolInfo().spawn(),this._symbolInfo.subscribe(this._updateEntriesBySubSessions.bind(this),{callWithLast:!0}),this._timeIntervalId=setInterval(this._updateTodayWithOffsets.bind(this),6e4)}destroy(){this._symbolInfo.destroy(),clearInterval(this._timeIntervalId)}currentTimeValue(){return this._currentTime.readonly()}timezone(){const e=this._symbolInfo.value();return null===e?"":(0,s.timezoneTitle)(e.timezone)}_updateEntriesBySubSessions(e){this._updateTodayWithOffsets();const{newSessionsDays:t,newTodaySession:n}=H(e,null===e?null:J(e));this.sessionsDays.setValue(t),this.todaySession.setValue(n)}_updateTodayWithOffsets(){const e=this._symbolInfo.value();if(null===e)return void this._currentTime.setValue(-1);const t=this._currentTime.value(),n=l((0,o.get_minutes_from_midnight)(J(e)));this._currentTime.setValue(n),n<t&&this._updateEntriesBySubSessions(e)}}},696107:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_STATUS_RENDERER_THEME:()=>p,StatusesPill:()=>_});var s=n(50959),i=n(497754),o=n.n(i),a=n(102469),r=n(479443),l=n(345848),u=n(900608),c=n(995683),d=n(308541),h=n(950115),m=n(199241);const p=m,f=new WeakMap,y=r.trackingModeIsAvailable?"medium":"small";function _(e){const{statuses:t,tooltip:n,theme:i=m}=e,[r,_]=(0,s.useState)(!1),v=(0,a.useWatchedValueReadonly)({watchedValue:t}),g=(0,a.useWatchedValueReadonly)({watchedValue:n}),E=(0,s.useMemo)((()=>(0,c.mergeThemes)(p,i)),[i]),M=(0,s.useRef)(null);return 0===v.length?null:s.createElement("div",{className:E.statusesWrap},s.createElement("div",{ref:M,className:o()(E.statuses,"apply-common-tooltip","common-tooltip-wide",E[y]),onClick:function(e){e.preventDefault(),v.forEach((e=>{e.model.turnOffBlinkingMode?.()})),S(),r&&(t=g,(0,l.trackEvent)("GUI","Statuses widget's action",t));var t},title:g,"data-name":"legend-source-item-status"},v.map((e=>(f.has(e)||f.set(e,(0,u.randomHash)()),s.createElement(d.StatusIcon,{key:f.get(e),visible:e.visible,icon:e.model.icon(),className:e.model.className(),size:e.model.size()??"small",isBlinking:e.model.isBlinkingMode,turnOffBlinking:e.model.turnOffBlinkingMode,customColor:e.model.customColor(),datasetName:e.iconDatasetName,datasetEntityId:e.iconDatasetEntityId}))))),s.createElement(h.FullTooltipsPopup,{statuses:t,anchored:{type:"element",at:M},isOpen:r,onClose:function(){_(!1)},offsetPosition:{x:-15,y:4}}));function S(){_((e=>!e))}}},561141:(e,t,n)=>{"use strict";n.d(t,{MarketStatusViewModel:()=>l});var s=n(927301),i=n(820028),o=n(916013),a=n(786220),r=n(751930);class l extends a.StatusViewModel{constructor(e,t,n=!1){super({tooltipMap:r.tooltipMap,iconMap:r.iconMap,classNameMap:r.classNameMap,titleMap:r.titleMap,titleColorMap:r.titleColorMap,actionMap:r.actionMap,size:t}),this._model=null,this._expiredStatus=null,this._marketStatus=new i.WatchedValue(null).spawn(),this._sessionEdge=new i.WatchedValue(null).spawn(),this._ignoreHideStatusSettings=n,this.setModel(e),o.showMarketOpenStatusProperty.subscribe(this,this._showMarketOpenStatusPropertyChanged)}destroy(){
this._marketStatus.destroy(),this._sessionEdge.destroy(),this._model=null,o.showMarketOpenStatusProperty.unsubscribeAll(this),super.destroy()}setModel(e){if(this._marketStatus.destroy(),this._sessionEdge.destroy(),this._expiredStatus?.destroy(),null===e)return this._marketStatus=new i.WatchedValue(null).spawn(),this._sessionEdge=new i.WatchedValue(null).spawn(),void(this._expiredStatus=null);this._model=e;const t=e.futuresContractExpirationTime();t&&(this._expiredStatus=t.expired().spawn(),this._expiredStatus.subscribe((e=>{e&&this._updateByStatus(this._marketStatus.value())}))),this._marketStatus=e.status().spawn(),this._marketStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0}),this._sessionEdge=e.nextSessionEdge().spawn(),this._sessionEdge.subscribe(this._updateTooltip.bind(this)),this._updateTooltip()}async _updateFullTooltip(){const e=this.status().value();if(null===e)return void this._fullTooltip.setValue(null);const t=[],n=r.marketStatusDescription.get(e);n&&t.push((0,s.htmlEscape)(n));const i=this._marketStatus.value();if(null!==this._model&&null!==i&&"expired"!==i&&"delisted"!==i){const n=this._model.nextSessionEdge().value();null!==n&&t.push({text:r.countdownFnMap[e](n),bold:!0})}this._fullTooltip.setValue([{icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:this._getTitle(e),titleColor:this._getTitleColor(e),html:t,size:this._size,action:this._getAction(e)}])}_shouldBeHiddenByStatus(e){return!this._ignoreHideStatusSettings&&!o.showMarketOpenStatusProperty.value()&&"market"===e}_updateStatus(e){this._status.setValue(e)}_updateTooltip(){this._updateFullTooltip()}_showMarketOpenStatusPropertyChanged(){this._updateByStatus(this._status.value())}}},786220:(e,t,n)=>{"use strict";n.d(t,{StatusViewModel:()=>a});var s=n(820028),i=n(927301),o=n(199241);class a{constructor(e){this.isBlinkingMode=new s.WatchedValue(!1),this._status=new s.WatchedValue(null),this._fullTooltip=new s.WatchedValue(null),this._iconClassNames=new s.WatchedValue(null),this._visible=new s.WatchedValue(!1),this._destroyed=!1,this._tooltip=new s.WatchedValue(null),this._icon=new s.WatchedValue(null),this._className=new s.WatchedValue(null),this._customColor=new s.WatchedValue(null),this._infoMaps=e,this._size=e.size||"small",this._status.subscribe(this._updateByStatus.bind(this),{callWithLast:!0})}destroy(){this._destroyed=!0}turnOffBlinkingMode(){}status(){return this._status}tooltip(){return this._tooltip}icon(){return this._icon}className(){return this._className}visible(){return this._visible}size(){return this._size}fullInfo(){return this._fullTooltip}customColor(){return this._customColor}_getTooltip(e){return this._infoMaps.tooltipMap?.get(e)??null}_getIcon(e){let t;const n=this._infoMaps.iconMap.get(e);return void 0!==n&&(t=n.get(this._size)),t||null}_getClassName(e){return this._infoMaps.classNameMap.get(e)||null}_getFullTooltipIconClassNames(e){const t=this._getClassName(e);return t?[o.statusItem,t]:[]}_getTitle(e){return this._infoMaps.titleMap?.get(e)??null}_getTitleColor(e){
return this._infoMaps.titleColorMap?.get(e)??null}_getAction(e){return this._infoMaps.actionMap?.get(e)??null}_getHTML(e){return this._infoMaps.htmlMap?.get(e)?.map(i.htmlEscape)??[]}async _updateFullTooltip(){const e=this._status.value();null!==e?this._fullTooltip.setValue([{icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:this._getTitle(e),titleColor:this._getTitleColor(e),html:this._getHTML(e),size:this._size,action:this._getAction(e),dataQaId:this._dataQaId()??void 0}]):this._fullTooltip.setValue(null)}_dataQaId(){return null}_updateByStatus(e){if(null===e||this._shouldBeHiddenByStatus(e))return this._icon.setValue(null),this._tooltip.setValue(null),void this._visible.setValue(!1);this._icon.setValue(this._getIcon(e)),this._className.setValue(this._getClassName(e)),this._tooltip.setValue(this._getTooltip(e)),this._visible.setValue(!0),this._updateFullTooltip()}_shouldBeHiddenByStatus(e){return!1}}},925931:(e,t,n)=>{"use strict";n.d(t,{nanoid:()=>s});let s=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}}]);