"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[69955],{688857:(e,t,i)=>{i.d(t,{addExclusionArea:()=>T,addExclusionAreaByScope:()=>y,calcTextHorizontalShift:()=>x,clearRect:()=>p,createBoundCanvas:()=>b,createDisconnectedCanvas:()=>g,createDisconnectedCanvasByRenderingInfo:()=>v,disableSelection:()=>P,drawScaled:()=>f,drawWithExclusionAreaByScope:()=>R,fillRect:()=>m,getBindingRenderingInfo:()=>c,getContext2D:()=>u,getPrescaledContext2D:()=>h,measureText:()=>S,tryApplySuggestedCanvasBitmapSize:()=>M});var n=i(743068),a=i(650151),r=i(9525),o=i(960433),s=i(969680),l=i(638456);function d(e){return{horizontalPixelRatio:Math.max(1,e.bitmapSize.width/e.canvasElementClientSize.width),verticalPixelRatio:Math.max(1,e.bitmapSize.height/e.canvasElementClientSize.height)}}function c(e){return{...d(e),bitmapSize:e.bitmapSize,mediaSize:e.canvasElementClientSize}}function u(e){const t=(0,a.ensureNotNull)(e.getContext("2d"));return t.setTransform(1,0,0,1,0,0),t}function h(e){const t=(0,a.ensureNotNull)(e.getContext("2d")),i=(0,r.getCanvasDevicePixelRatio)(e);return t.setTransform(i,0,0,i,0,0),t}function m(e,t,i,n,a,r){e.save(),e.fillStyle=r,e.fillRect(t,i,n,a),e.restore()}function p(e,t,i,n,a,r){e.save(),e.globalCompositeOperation="copy",e.fillStyle=r,e.fillRect(t,i,n,a),e.restore()}function f(e,t,i,n){e.save(),e.scale(t,i),n(),e.restore()}function g(e,t,i){const n=w(e);return void 0===i&&(i=(0,r.getCanvasDevicePixelRatio)(n)),n.width=t.width*i,n.height=t.height*i,n}function v(e,t){const{bitmapSize:i,mediaSize:n}=t,a=w(e);return a.style.width=`${n.width}px`,a.style.height=`${n.height}px`,a.width=i.width,a.height=i.height,a}function w(e){const t=e.createElement("canvas");return P(t),t}function b(e,t){const i=w((0,a.ensureNotNull)(e.ownerDocument));e.appendChild(i);const r=(0,n.bindCanvasElementBitmapSizeTo)(i,{type:"device-pixel-content-box",transform:(e,t)=>0===e.width||0===e.height?e:{width:Math.max(e.width,t.width),height:Math.max(e.height,t.height)}});return r.resizeCanvasElement(t),r}function M(e){const t=e.suggestedBitmapSize;return null!==t&&t.width>0&&t.height>0&&(e.applySuggestedBitmapSize(),!0)}function x(e,t){return"center"===e.textAlign?0:(0,s.isRtl)()?"start"===e.textAlign||"right"===e.textAlign?t:0:"start"===e.textAlign||"left"===e.textAlign?0:t}function P(e){e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.MozUserSelect="none",e.style.webkitTapHighlightColor="transparent"}function y(e,t){const{context:i,horizontalPixelRatio:n,verticalPixelRatio:a,bitmapSize:r}=e;i.beginPath(),i.rect(0,0,r.width,r.height);for(let e=0;e<t.length;e++){let{x:r,y:o}=t[e];r*=n,o*=a,0!==e?i.lineTo(r,o):i.moveTo(r,o)}i.closePath(),i.clip("evenodd")}function T(e,t,i){y({context:e,...t},i)}function R(e,t,i){e.context.save(),y(e,t),i(),e.context.restore()}let _;function S(e,t,i){return _||function(){const e=document.createElement("canvas");e.width=0,e.height=0,(0,l.isMac)()&&(e.style.display="none",document.body.append(e)),_=(0,a.ensureNotNull)(e.getContext("2d")),
_.textBaseline="alphabetic",_.textAlign="center"}(),t&&_.font!==t&&(_.font=t),i?i.getMetrics(_,e):(0,o.getMinTextMetrics)(_.measureText(e))}},9525:(e,t,i)=>{function n(e){return Math.max(1,e.ownerDocument?.defaultView?.devicePixelRatio||1)}i.d(t,{getCanvasDevicePixelRatio:()=>n})},822961:(e,t,i)=>{i.d(t,{lastMouseOrTouchEventInfo:()=>a,setLastMouseOrTouchEventInfo:()=>r});let n=(0,i(638456).supportTouch)()?{isTouch:!0,stylus:!1}:{isTouch:!1};function a(){return n}function r(e){n=e.isTouch?{isTouch:!0,stylus:e.stylus}:{isTouch:!1}}},731974:(e,t,i)=>{i.d(t,{AreaName:()=>n,HitTarget:()=>a,HitTestResult:()=>c,hitTestResultDataAreEqual:()=>d,shouldDefaultActionBeExecuted:()=>l,tryCallHandler:()=>s});var n,a,r=i(650279),o=i(650151);function s(e,t,i,n){if(e.isTouch){if(void 0!==n)return n(e,t),!0}else if(void 0!==i)return i(e,t),!0;return!1}function l(e,t,i,n){return void 0!==t.executeDefaultAction&&(e.isTouch?Boolean(t.executeDefaultAction[n]):Boolean(t.executeDefaultAction[i]))}function d(e,t){return e&&t&&e.equals&&t.equals?e.equals(t):(0,r.default)(e,t)}!function(e){e.Style="Style",e.Text="Text",e.Line="Line",e.Tooltip="Tooltip",e.Button="Button",e.SourceItemMove="SourceItemMove",e.AnchorPoint="AnchorPoint"}(n||(n={})),function(e){e[e.MovePointBackground=1]="MovePointBackground",e[e.Regular=2]="Regular",e[e.MovePoint=3]="MovePoint",e[e.ChangePoint=4]="ChangePoint",e[e.Custom=5]="Custom"}(a||(a={}));class c{constructor(e,t,i){this._target=e,this._data=t||null,this._eraseMarker=i}target(){return this._target}data(){return this._data}mergeData(e){this._data={...(0,o.ensureNotNull)(this._data),...e}}hasPressedMoveHandler(e){return null!==this._data&&function(e,t,i){if(e.isTouch){if(void 0!==i)return!0}else if(void 0!==t)return!0;return!1}(e,this._data.pressedMouseMoveHandler,this._data.touchMoveHandler)}tryCallMouseDownOrTouchStartHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseDownHandler,this._data.touchStartHandler)}tryCallMouseUpOrTouchEndHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseUpHandler,this._data.touchEndHandler)}tryCallMouseEnterHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseEnterHandler)}tryCallMouseLeaveHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseLeaveHandler)}tryCallMouseMoveHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseMoveHandler)}tryCallClickOrTapHandler(e,t){return null!==this._data&&s(e,t,this._data.clickHandler,this._data.tapHandler)}tryCallDblClickOrDblTapHandler(e,t){return null!==this._data&&s(e,t,this._data.doubleClickHandler,this._data.doubleTapHandler)}tryCallContextMenuHandler(e,t){return null!==this._data&&s(e,t,this._data.contextMenuHandler,this._data.touchContextMenuHandler)}eraseMarker(){return this._eraseMarker}}},266954:(e,t,i)=>{i.d(t,{intervalsVisibilitiesDefaults:()=>n});const n={ticks:!0,seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,weeksFrom:1,weeksTo:52,months:!0,monthsFrom:1,monthsTo:12,ranges:!0}},
816541:(e,t,i)=>{i.d(t,{getIntervalsVisibilitiesForMode:()=>m,isActualInterval:()=>c,makeIntervalsVisibilitiesVisibleAtInterval:()=>l,mergeIntervalVisibilitiesDefaults:()=>h,nonDefaultIntervalsVisibilities:()=>u});var n=i(998034),a=i(154834),r=i(650151),o=i(477786),s=i(266954);function l(e,t){let i=t.multiplier();if(t.isTicks()&&(e.ticks=!0),t.isSeconds()&&(i<60?(e.seconds=!0,e.secondsFrom=Math.min(e.secondsFrom,i),e.secondsTo=Math.max(e.secondsTo,i)):(i=Math.floor(i/60),t=new o.Interval(o.ResolutionKind.Minutes,i))),t.isMinutes())if(i<60)e.minutes=!0,e.minutesFrom=Math.min(e.minutesFrom,i),e.minutesTo=Math.max(e.minutesTo,i);else{const t=Math.floor(i/60);e.hours=!0,e.hoursFrom=Math.min(e.hoursFrom,t),e.hoursTo=Math.max(e.hoursTo,t)}t.isDays()&&(e.days=!0,e.daysFrom=Math.min(e.daysFrom,i),e.daysTo=Math.max(e.daysTo,i)),t.isWeeks()&&(e.weeks=!0,e.weeksFrom=Math.min(e.weeksFrom,i),e.weeksTo=Math.max(e.weeksTo,i)),t.isMonths()&&(e.months=!0,e.monthsFrom=Math.min(e.monthsFrom,i),e.monthsTo=Math.max(e.monthsTo,i)),t.isRange()&&(e.ranges=!0)}function d(e,t,i,n){return e&&n>=t&&n<=i}function c(e,t){const i=t.childs();switch(e.kind()){case o.ResolutionKind.Ticks:return i.ticks.value();case o.ResolutionKind.Seconds:if(e.multiplier()<60)return d(i.seconds.value(),i.secondsFrom.value(),i.secondsTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return d(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),t)}case o.ResolutionKind.Minutes:if(e.multiplier()<60)return d(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return d(i.hours.value(),i.hoursFrom.value(),i.hoursTo.value(),t)}case o.ResolutionKind.Days:return d(i.days.value(),i.daysFrom.value(),i.daysTo.value(),e.multiplier());case o.ResolutionKind.Weeks:return d(i.weeks.value(),i.weeksFrom.value(),i.weeksTo.value(),e.multiplier());case o.ResolutionKind.Months:return d(i.months.value(),i.monthsFrom.value(),i.monthsTo.value(),e.multiplier());case o.ResolutionKind.Range:return i.ranges.value()}return(0,r.assert)(!1,`Unsupported resolution: ${e.value()}`),!1}function u(e){const t=Object.keys(e).filter((t=>s.intervalsVisibilitiesDefaults[t]!==e[t]));return 0===t.length?null:t.reduce(((t,i)=>(t[i]=e[i],t)),{})}function h(e){return(0,n.default)((0,a.default)(s.intervalsVisibilitiesDefaults),e??{})}function m(e,t){if(0===t||e.isTicks()&&3===t||e.isRange()&&2===t)return h();let i=!1;const n={ticks:!1,seconds:!1,minutes:!1,hours:!1,days:!1,weeks:!1,months:!1,ranges:!1},a=e=>e.multiplier();return[{checker:e=>e.isTicks(),getIntervalMultiplier:a,markIntervalAsVisible:(e,t)=>{n.ticks=!0}},{checker:e=>e.isSeconds()&&e.multiplier()<60,getIntervalMultiplier:a,markIntervalAsVisible:(e,t)=>{n.seconds=!0,n.secondsFrom=e,n.secondsTo=t}},{checker:e=>e.isSeconds()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{n.minutes=!0,n.minutesFrom=e,n.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()<60,getIntervalMultiplier:a,markIntervalAsVisible:(e,t)=>{
n.minutes=!0,n.minutesFrom=e,n.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{n.hours=!0,n.hoursFrom=e,n.hoursTo=t}},{checker:e=>e.isDays(),getIntervalMultiplier:a,markIntervalAsVisible:(e,t)=>{n.days=!0,n.daysFrom=e,n.daysTo=t}},{checker:e=>e.isWeeks(),getIntervalMultiplier:a,markIntervalAsVisible:(e,t)=>{n.weeks=!0,n.weeksFrom=e,n.weeksTo=t}},{checker:e=>e.isMonths(),getIntervalMultiplier:a,markIntervalAsVisible:(e,t)=>{n.months=!0,n.monthsFrom=e,n.monthsTo=t}},{checker:e=>e.isRange(),getIntervalMultiplier:a,markIntervalAsVisible:(e,t)=>{n.ranges=!0}}].forEach((n=>{if(n.checker(e)){i=!0;const a=n.getIntervalMultiplier(e);1===t?n.markIntervalAsVisible(a,a):3===t?n.markIntervalAsVisible(a,void 0):n.markIntervalAsVisible(void 0,a)}else(!i&&2===t||i&&3===t)&&n.markIntervalAsVisible(void 0,void 0)})),h(n)}},437642:(e,t,i)=>{i.d(t,{crosshairMoveEvent:()=>p,globalChangeEvent:()=>o,hoverChangeEvent:()=>h,selectionChangeEvent:()=>c,sourceChangeEvent:()=>a,viewportChangeEvent:()=>l});var n=i(283873);function a(e){return(0,n.default)(e)?{type:"data-source-change",sourceId:e}:{type:"data-source-change",...e}}const r={type:"global-change"};function o(){return r}const s={type:"viewport-change"};function l(e){return e?{type:"viewport-change",pane:e}:s}const d={type:"selection-change"};function c(){return d}const u={type:"hover-change"};function h(){return u}const m={type:"crosshair-move"};function p(){return m}},338242:(e,t,i)=>{i.r(t),i.d(t,{addHorizontalLineToPath:()=>u,addLineToPath:()=>R,addPixelPerfectLineToPath:()=>S,addVerticalLineToPath:()=>m,clearRectWithGradient:()=>d,clipPolygonByEdge:()=>I,computeDashPattern:()=>T,createCircle:()=>x,drawHorizontalLine:()=>h,drawLine:()=>_,drawPixelPerfectLine:()=>k,drawPoly:()=>P,drawRoundRect:()=>v,drawRoundRectWithInnerBorder:()=>w,drawVerticalLine:()=>p,fillRectInnerBorder:()=>c,fillRectWithBorder:()=>M,scaleDrawRoundRectRadii:()=>f,scalePath2D:()=>D,scaledDashPattern:()=>b,setLineStyle:()=>y});var n=i(610555),a=i(648892),r=i(257145),o=i(770885),s=i(688857),l=i(278688);function d(e,t,i,n,a,r,o){e.save(),e.globalCompositeOperation="copy";const s=e.createLinearGradient(0,0,0,a);s.addColorStop(0,r),s.addColorStop(1,o),e.fillStyle=s,e.fillRect(t,i,n,a),e.restore()}function c(e,t,i,n,a,r){e.fillRect(t+r,i,n-2*r,r),e.fillRect(t+r,i+a-r,n-2*r,r),e.fillRect(t,i,r,a),e.fillRect(t+n-r,i,r,a)}function u(e,t,i,n){const a=e.lineWidth%2?.5:0;e.moveTo(i,t+a),e.lineTo(n,t+a)}function h(e,t,i,n){e.beginPath(),u(e,t,i,n),e.stroke()}function m(e,t,i,n){const a=e.lineWidth%2?.5:0;e.moveTo(t+a,i),e.lineTo(t+a,n)}function p(e,t,i,n){e.beginPath(),m(e,t,i,n),e.stroke()}function f(e,t){return Array.isArray(e)?e.map((e=>Math.round(e*t))):Math.round(e*t)}function g(e,t){return Array.isArray(e)?e.map((e=>0===e?e:e+t)):e+t}function v(e,t,i,n,a,r,o){let s,l,d,c;if(Array.isArray(r))if(2===r.length){const e=Math.max(0,r[0]),t=Math.max(0,r[1]);s=e,l=e,d=t,c=t}else{
if(4!==r.length)throw new Error("Wrong border radius - it should be like css border radius");s=Math.max(0,r[0]),l=Math.max(0,r[1]),d=Math.max(0,r[2]),c=Math.max(0,r[3])}else{const e=Math.max(0,r);s=e,l=e,d=e,c=e}o||e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+n-l,i),0!==l&&e.arcTo(t+n,i,t+n,i+l,l),e.lineTo(t+n,i+a-d),0!==d&&e.arcTo(t+n,i+a,t+n-d,i+a,d),e.lineTo(t+c,i+a),0!==c&&e.arcTo(t,i+a,t,i+a-c,c),e.lineTo(t,i+s),0!==s&&e.arcTo(t,i,t+s,i,s)}function w(e,t,i,n,a,r,s=0,l=0,d="",c=o.LineStyle.Solid){if(e.save(),!l||!d||d===r)return v(e,t,i,n,a,s),e.fillStyle=r,e.fill(),void e.restore();const u=l/2;if("transparent"!==r){const u="transparent"!==d&&c!==o.LineStyle.Solid;v(e,u?t:t+l,u?i:i+l,u?n:n-2*l,u?a:a-2*l,u?s:g(s,-l)),e.fillStyle=r,e.fill()}if("transparent"!==d){v(e,t+u,i+u,n-l,a-l,g(s,-u)),e.lineWidth=l,e.strokeStyle=d,y(e,c),e.closePath(),e.stroke()}e.restore()}function b(e,t){return t=Math.max(1,t),e.map((e=>e*t))}function M(e,t,i,n,a,l,d,c,u){const{context:m}=e,p=l%2/2,f=t+p,g=n+p;let v,w;if(c){const{borderMode:e,borderWidth:o,color:s,dashPattern:d,lineStyle:u}=c;switch(e){case"outer":{const e=-l/2-o/2,t=-o/2;w={left:f+e,right:g-e,top:i+t,bottom:a-t};break}case"center":{const e=o%2/2;w={left:t+e,right:n+e,top:i+e,bottom:a+e};break}case"inner":{const e=-l/2+o/2,t=o/2;w={left:f+e,right:g-e,top:i+t,bottom:a-t}}}m.strokeStyle=s,m.lineWidth=o;let h=-1;d?m.setLineDash(b(d,o)):void 0!==u&&(y(m,u),u===r.LINESTYLE_SOLID&&(h=1)),v={left:w.left+h*o/2,top:w.top+h*o/2,right:w.right-h*o/2,bottom:w.bottom-h*o/2}}if(d&&(m.fillStyle=d.color,v||(v={left:f-l/2,right:g+l/2,top:i,bottom:a}),m.fillRect(v.left,v.top,v.right-v.left,v.bottom-v.top)),u){const{lineWidth:r,lineColor:o,lineStyle:l,excludeBoundaries:d}=u;m.save(),m.lineCap="butt",m.lineWidth=r,m.strokeStyle=o,y(m,l);const p=()=>h(m,Math.floor((i+a)/2),c?.rightToLeftStroke?n:t,c?.rightToLeftStroke?t:n);d?(0,s.drawWithExclusionAreaByScope)(e,d,p):p(),m.restore()}if(w){if((c?.lineStyle??o.LineStyle.Solid)===o.LineStyle.Solid)m.strokeRect(w.left,w.top,w.right-w.left,w.bottom-w.top);else{const e=c?.rightToLeftStroke?w.right:w.left,t=c?.rightToLeftStroke?w.left:w.right,i=w.top,n=w.bottom;m.lineCap="butt",[[e,i,t,i],[e,n,t,n],[e,i,e,n],[t,i,t,n]].forEach((([e,t,i,n])=>{m.beginPath(),m.moveTo(e,t),m.lineTo(i,n),m.stroke()}))}}}function x(e,t,i,n){e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!1),e.closePath()}function P(e,t,i){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(const i of t)e.lineTo(i.x,i.y);e.closePath(),e.stroke(),i&&e.fill()}function y(e,t){let i=[];t!==r.LINESTYLE_SOLID&&(i=T(e.lineWidth,t)),e.setLineDash(i)}function T(e,t){return[[e,2*e],[5*e,6*e],[6*e,6*e],[e,4*e],[2*e,e]][t-1]}function R(e,t,i,n,a){e.moveTo(t,i),e.lineTo(n,a)}function _(e,t,i,n,a){isFinite(t)&&isFinite(n)&&isFinite(i)&&isFinite(a)&&(e.beginPath(),R(e,t,i,n,a),e.stroke())}function S(e,t,i,n,a,r){const{horizontalPixelRatio:o,verticalPixelRatio:s}=r;let l;return t===n?(l=[Math.round(t*o),i*s,Math.round(t*o),a*s],m(e,l[0],l[1],l[3])):i===a?(l=[t*o,Math.round(i*s),n*o,Math.round(i*s)],
u(e,l[1],l[0],l[2])):(l=[t*o,i*s,n*o,a*s],R(e,l[0],l[1],l[2],l[3])),l}function k(e,t,i,n,a,r=l.dpr1PixelRatioInfo){e.beginPath(),S(e,t,i,n,a,r),e.stroke()}function I(e,t,i,r){const o=(0,n.equalPoints)(i,r[0])?(0,n.equalPoints)(i,r[1])?null:r[1]:r[0];return null!==e&&null!==o?(0,a.intersectPolygonAndHalfplane)(e,(0,n.halfplaneThroughPoint)((0,n.lineThroughPoints)(t,i),o)):null}function D(e,t){const i=new Path2D;return i.addPath(e,(new DOMMatrix).scaleSelf(t,t)),i}},322604:(e,t,i)=>{i.d(t,{PriceAxisViewRenderer:()=>h,hittestByData:()=>u});var n=i(610555),a=i(906453),r=i(822961),o=i(969680),s=i(688857),l=i(731974),d=i(338242);const c=new Path2D("M4.09.93c.4.16.75.4 1.02.73a5.47 5.47 0 0 0-3.78 3.27A2.5 2.5 0 0 1 3.2.77c.31 0 .61.06.89.16Zm8.24 3.35a2.5 2.5 0 0 0-3.27-3.23c-.38.16-.7.4-.97.7a5.47 5.47 0 0 1 3.56 3.5c.3-.26.53-.6.68-.97Zm-3.15-.84a4.5 4.5 0 1 0-5.5 7.12 4.5 4.5 0 0 0 5.5-7.12ZM6 4h1v4H4V7h2V4Z");function u(e,t){const i=(0,r.lastMouseOrTouchEventInfo)().isTouch?20:0,o=e.hitTestData;if(void 0===o||!e.visible)return null;const{itemBox:s,clickHandler:d,tooltip:c}=o;if(s){const r=(0,n.box)(new n.Point(s.min.x-i,s.min.y-i),new n.Point(s.max.x+i,s.max.y+i));if((0,a.pointInBox)(t,r))return new l.HitTestResult(e.hitTarget??l.HitTarget.Custom,{clickHandler:d?.bind(null,t),tapHandler:d?.bind(null,t),hoverModelFromAxis:o.hoverModelFromAxis,activeItem:o.activeItem,tooltip:c})}return null}class h{constructor(e,t){this._bodyBox=null,this.setData(e,t)}setData(e,t){this._data=e,this._commonData=t}lastDrawnBodyBox(){return this._bodyBox}draw(e,t,i,a,r){const l=this._data,{mediaSize:c,bitmapSize:u,horizontalPixelRatio:h,verticalPixelRatio:m}=t;if(!l.visible||this._isOutOfScreen(i,c.height))return;const p=this._commonData,f=void 0!==l.labelIcon,g=i.paddingTop+p.additionalPaddingTop,v=i.paddingBottom+p.additionalPaddingBottom,{paddingOuter:w,paddingInner:b,fontSize:M,borderSize:x}=i,P=l.ignoreAdditionalPaddingInner?0:i.additionalPaddingInner;let y=l.text,T=l.textColor||p.textColor,R=l.secondLine||"",_=p.secondLineTextColor||T,S=l.thirdLine||"";const k=p.thirdLineTextColor||T;0===R.length&&(R=S,_=k,S=""),0===y.length&&(y=R,T=_,R=S,_=k,S=""),e.save(),void 0!==p.globalAlpha&&(e.globalAlpha*=p.globalAlpha),e.font=i.font;const I=a.yMidCorrection(e,y)*m,D=M+g+v,C=(l.labelIconMinWidth??0)*h,V=Boolean(R),A=Boolean(S),L=b+w+P,B=[Math.ceil(a.measureText(e,y)),V?Math.ceil(a.measureText(e,R)):0,A?Math.ceil(a.measureText(e,S)):0],F=Math.max(1,Math.floor(m));let E=Math.round(D*m);E%2!=F%2&&(E+=1);const H=Math.round((M+i.lineSpacing)*m),z=Math.round(2*(M+i.lineSpacing)*m),N=Math.max(1,Math.floor(x*h)),O=l.separatorVisible?N:0,W=l.borderVisible?N:0,q=f?Math.max(E,C):Math.round((Math.max(...B)+L)*h),G=Math.round(P*h),$=u.width,K=Math.ceil(b*h),j=Math.round((p.fixedCoordinate??p.coordinate)*m)-Math.floor(.5*m),U=Math.floor(j+F/2-E/2),Z=U+E,Y="right"===r,J=void 0!==l.xCoord?Math.round(l.xCoord*h)+(Y?1:-1)*Math.round(q/2):Y?$-O:O;let Q,X=J;const ee=l.backgroung??p.background;e.fillStyle=ee;const te=2*m;if(e.textAlign=Y?"right":"left",
e.textBaseline="middle",Y?(X=J-q,Q=J-G-K+O):(X=J+q,Q=J+G+K-O),this._bodyBox=null,y||f){const i=A?E+z:V?E+H:E,a=p.borderColor??ee,r=void 0!==l.xCoord?te:0;if(((t,a,o)=>{if(Y){(0,d.drawRoundRectWithInnerBorder)(e,X,U,q,i,t,l.overridenRadius?(0,d.scaleDrawRoundRectRadii)(l.overridenRadius,m):[te,r,r,te],W,a,o);const s=(0,n.point)(X/h,U/m),c=s.add((0,n.point)(q/h,i/m));this._bodyBox=(0,n.box)(s,c)}else{(0,d.drawRoundRectWithInnerBorder)(e,J,U,q,i,t,l.overridenRadius?(0,d.scaleDrawRoundRectRadii)(l.overridenRadius,m):[r,te,te,r],W,a,o);const s=(0,n.point)(J/h,U/m),c=s.add((0,n.point)(q/h,i/m));this._bodyBox=(0,n.box)(s,c)}})(ee,a,p.borderStyle),f){switch(l.labelIcon){case 0:this._drawPlusIcon(e,J,X,U,j,Z,F);break;case 1:this._drawClockExistingAlertIcon(e,J,X,t,U,i)}return void e.restore()}e.save(),e.translate(Q,(U+Z)/2+I),(0,s.drawScaled)(e,h,m,(()=>{e.fillStyle=T,e.fillText(y,0,0)})),e.restore()}V&&(e.fillStyle=_,e.save(),e.translate(Q,(U+Z)/2+I+H),(0,s.drawScaled)(e,h,m,(()=>{e.fillText((0,o.startWithLTR)(R),0,0)})),e.restore()),A&&(e.fillStyle=k,e.save(),e.translate(Q,(U+Z)/2+I+z),(0,s.drawScaled)(e,h,m,(()=>{e.fillText((0,o.startWithLTR)(S),0,0)})),e.restore()),e.restore()}topBottomTotalHeight(e){const t=this._lines();if(!this._data.visible||0===t)return{top:0,bottom:0,total:0};const i=e.fontSize/2+e.paddingTop+this._commonData.additionalPaddingTop,n=(t-.5)*e.fontSize+(t-1)*e.lineSpacing+e.paddingBottom+this._commonData.additionalPaddingBottom;return{top:i,bottom:n,total:i+n}}hitTest(e){return u(this._data,e)}_drawPlusIcon(e,t,i,n,a,r,o){e.fillStyle=this._commonData.textColor,e.strokeStyle=this._commonData.textColor,e.lineWidth=o;const s=Math.abs(t-i);let l=Math.round(.35*s);l%2!=o%2&&(l+=1);let d=Math.round(.65*s);d%2!=o%2&&(d+=1);const c=Math.floor((s-l)/2),u=Math.min(t,i),h=u+Math.floor(s/2-o/2);e.fillRect(u+c,a,l,o),e.fillRect(h,n+c,o,l),e.beginPath(),e.arc(h+o/2,a+o/2,d/2,0,2*Math.PI,!1),e.stroke()}_drawClockExistingAlertIcon(e,t,i,n,a,r){e.fillStyle=this._commonData.textColor;const o=Math.abs(t-i),s=Math.min(t,i),{horizontalPixelRatio:l,verticalPixelRatio:d}=n,u=o/(23*l),h=o/(23*d),m=12*l*u,p=10.73*d*h,f=Math.floor((o-m)/2),g=Math.floor((r-p)/2)-1;e.save(),e.translate(s+f,a+g),e.scale(l*u,d*h),e.fill(c),e.restore()}_lines(){const e=this._data;return(e.text?1:0)+(e.secondLine?1:0)+(e.thirdLine?1:0)}_isOutOfScreen(e,t){const i=this._commonData,n=i.fixedCoordinate??i.coordinate,{total:a}=this.topBottomTotalHeight(e),r=a/this._lines();return n-r/2-3>t||n+(a-r/2)+3<0}}},597331:(e,t,i)=>{i.d(t,{PriceAxisView:()=>r});var n=i(322604),a=i(534328);class r{constructor(e){this._commonRendererData={coordinate:0,textColor:"#FFF",background:"#000",additionalPaddingBottom:0,additionalPaddingTop:0},this._axisRendererData={text:"",visible:!1,separatorVisible:!0,borderVisible:!1,ignoreAdditionalPaddingInner:!1},this._paneRendererData={text:"",visible:!1,separatorVisible:!1,borderVisible:!1,ignoreAdditionalPaddingInner:!0},this._invalidated=!0,this._active=!1,
this._axisRenderer=new(e||n.PriceAxisViewRenderer)(this._axisRendererData,this._commonRendererData),this._paneRenderer=new(e||n.PriceAxisViewRenderer)(this._paneRendererData,this._commonRendererData)}setActive(e){this._active=e}text(){return this._updateRendererDataIfNeeded(),this._axisRendererData.text}secondLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.secondLine}thirdLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.thirdLine}background(){return this._updateRendererDataIfNeeded(),this._commonRendererData.background}color(){return this._updateRendererDataIfNeeded(),this.generateTextColor(this.background())}generateTextColor(e){return(0,a.colorFromBackground)(e)}coordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.coordinate}floatCoordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.floatCoordinate??this._commonRendererData.coordinate}update(e){this._invalidated=!0}topBottomTotalHeight(e){this._updateRendererDataIfNeeded();const{top:t,bottom:i,total:n}=this._axisRenderer.topBottomTotalHeight(e),{top:a,bottom:r,total:o}=this._paneRenderer.topBottomTotalHeight(e);return{top:Math.max(t,a),bottom:Math.max(i,r),total:Math.max(n,o)}}getFixedCoordinate(){return this._commonRendererData.fixedCoordinate||0}setFixedCoordinate(e){this._commonRendererData.fixedCoordinate=e}isVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible||this._paneRendererData.visible}isAxisLabelVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible}isPaneLabelVisible(){return this._updateRendererDataIfNeeded(),this._paneRendererData.visible}renderer(){return this._updateRendererDataIfNeeded(),this._axisRenderer}paneRenderer(){return this._updateRendererDataIfNeeded(),this._paneRenderer}setPaneRendererLabelIcon(e){this._paneRendererData.labelIcon=e}setPaneLabelVisible(e){this._paneRendererData.visible=e,this._invalidated=!0}ignoreAlignment(){return!1}_updateRendererDataIfNeeded(){this._invalidated&&(this._commonRendererData.fixedCoordinate=void 0,this._updateRendererData(this._axisRendererData,this._paneRendererData,this._commonRendererData),this._invalidated=!1)}}},881727:(e,t,i)=>{i.d(t,{isRootPath:()=>s,propertyByPath:()=>o,propertyPathForSource:()=>a});var n=i(650151);function a(e,t="properties"){return`charts.${e.model().id()}.sources.${e.id()}.${t}`}function r(e,t){if(t.length<4)throw new Error("Invalid chart path");const i=function(e,t){return(0,n.ensureDefined)(e.getAll().find((e=>e.hasModel()&&e.model().model().id()===t))).model().model()}(e,t[0]),a=t[1];if("sources"===a){return(0,n.ensureNotNull)(i.dataSourceForId(t[2])).propertyByPath(t.slice(3).join("."))}throw new Error(`Invalid chart path, unknown root: ${a}`)}function o(e,t){const i=t.split(".");if(i.length<1)throw new Error("Invalid path");const n=i[0];if("charts"===n)return r(e,i.slice(1));throw new Error(`Invalid path, unknown root: ${n}`)}function s(e){return e.startsWith("charts.")}},278688:(e,t,i)=>{i.d(t,{
dpr1PixelRatioInfo:()=>a,equalPixelRatios:()=>o,equalRenderingInfos:()=>r});var n=i(743068);const a={horizontalPixelRatio:1,verticalPixelRatio:1};function r(e,t){return(0,n.equalSizes)(e.mediaSize,t.mediaSize)&&(0,n.equalSizes)(e.bitmapSize,t.bitmapSize)&&o(e,t)}function o(e,t){return e.horizontalPixelRatio===t.horizontalPixelRatio&&e.verticalPixelRatio===t.verticalPixelRatio}},196302:(e,t,i)=>{i.d(t,{LiveStudyGraphics:()=>o.LiveStudyGraphics,createGraphicsPaneViews:()=>m,createGraphicsPriceAxisViews:()=>f,emptyStudyGraphics:()=>r.emptyStudyGraphics,isStudyGraphicsEmpty:()=>a.isStudyGraphicsEmpty,loadStudyGraphics:()=>r.loadStudyGraphics,saveStudyGraphics:()=>r.saveStudyGraphics});var n=i(735566),a=i(311908),r=i(57088),o=i(284881),s=i(597331),l=i(534328);class d extends s.PriceAxisView{constructor(e,t){super(),this._source=e,this._data=t}_updateRendererData(e,t,i){e.visible=!1;const n=this._source.priceScale(),a=this._source.properties().childs(),r=a.visible.value();if(!n||n.isEmpty()||!r)return;const o=a.graphics.childs()[this._data.lineType]?.childs()[this._data.styleId]?.childs();if(!(void 0!==o&&o.visible&&o.visible.value()&&o.showPrice&&o.showPrice.value()&&this._isLabelVisibleAccordinglyToProperties()))return;const s=this._source.firstValue();if(null===s)return;const d=this._data.line.level,c=(0,l.resetTransparency)(o.color.value());i.background=c,i.textColor=this.generateTextColor(c),i.coordinate=n.priceToCoordinate(d,s),e.text=n.formatPrice(d,s,{signPositive:n.isPercentage()}),e.visible=!0}_isLabelVisibleAccordinglyToProperties(){const e=this._source.model().properties().childs().scalesProperties.childs();return(e.showStudyLastValue.value()||e.showFundamentalLastValue.value())&&this._source.properties().childs().showLabelsOnPriceScale.value()}}const c=(0,n.getLogger)("Chart.StudyGraphics"),u=new Set(["dwgtablecells","tpoBlockSets","tpoLevels","tpoVolumeRows","logs","performance"]);async function h(e,t,n,a){const r=e=>({regularPaneView:new e(t,n,a)}),o=e=>({regularPaneView:new e(t,n,!1,a),forceOverlayPaneView:new e(t,n,!0,a)});switch(e){case"hlines":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,350355))).LevelPaneView);case"lines":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,822305))).LinePaneView);case"shapemarks":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,38533))).ShapeMarkPaneView);case"textmarks":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,461449))).TextMarkPaneView);case"trendchannels":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,667059))).TrendChannelPaneView);case"dwglabels":return o((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,183941))).DwgLabelPaneView);case"dwglines":
return o((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,77148))).DwgLinePaneView);case"dwgpolylines":return o((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,380729))).DwgPolylinePaneView);case"dwgboxes":return o((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,973151))).DwgBoxPaneView);case"dwgtables":return o((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,35404))).DwgTablePaneView);case"dwglinefills":return o((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,592739))).DwgLineFillPaneView);case"tpos":return{regularPaneView:new((await Promise.all([i.e(32856),i.e(97542),i.e(7815),i.e(23301),i.e(27860),i.e(5071),i.e(31882),i.e(1346),i.e(28070),i.e(88003),i.e(769)]).then(i.bind(i,805719))).TpoPaneView)(t,n,a)};case"footprints":return{regularPaneView:new((await Promise.all([i.e(80977),i.e(53464),i.e(9141)]).then(i.bind(i,531483))).VolumeFootprintPaneView)(t,n)}}switch(e){case"hhists":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,910529))).HHistPaneView);case"horizlines":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,614478))).HorizLinePaneView);case"vertlines":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,965690))).VertLinePaneView);case"polygons":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,588892))).PolygonPaneView);case"backgrounds":return r((await Promise.all([i.e(63317),i.e(27860),i.e(22762),i.e(88003),i.e(20507)]).then(i.bind(i,758989))).BackgroundPaneView)}return null}async function m(e,t,i){const n=[],a=[],r=Object.keys(e.graphicsInfo());r.sort(((e,t)=>p(e)-p(t)));for(const o of r){const r=await h(o,e,t,i);null!==r?(n.push(r.regularPaneView),r.forceOverlayPaneView&&a.push(r.forceOverlayPaneView)):u.has(o)||c.logWarn(`${o} is not supported by this build of graphics subsystem, skipping`)}return{regularPaneViews:n,forceOverlayPaneViews:a}}function p(e){return a.primitivesZOrders.get(e)??0}function f(e){const t=Object.keys(e.graphicsInfo()),i=[];for(const n of t)switch(n){case"hlines":e.graphics().hlines().forEach(((t,a)=>{t.forEach((t=>{void 0!==t.level&&i.push(new d(e,{line:{level:t.level},styleId:a,lineType:n}))}))}));break;case"horizlines":e.graphics().horizlines().forEach(((t,a)=>{t.forEach((t=>{void 0!==t.level&&i.push(new d(e,{line:{level:t.level},styleId:a,lineType:n}))}))}))}return i}},259710:(e,t,i)=>{i.d(t,{makeNextStudyId:()=>o,makeNextSymbolId:()=>a});let n=0;function a(){return n++,"ss_"+n}let r=0;function o(){return r++,"st"+r}},423783:(e,t,i)=>{i.d(t,{colorsAreCloseEnough:()=>d,isColorDark:()=>h});var n=i(481251),a=i(724377);function r(e){return e<0&&(e+=2*Math.PI),e}function o(e,t){
const[i,n,a]=e,[o,s,l]=t,d=(Math.sqrt(n**2+a**2)+Math.sqrt(s**2+l**2))/2,c=.5*(1-Math.sqrt(Math.pow(d,7)/(Math.pow(d,7)+6103515625))),u=(1+c)*n,h=(1+c)*s,m=Math.sqrt(u*u+a*a),p=Math.sqrt(h*h+l*l),f=0===a&&0===u?0:r(Math.atan2(a,u)),g=0===l&&0===h?0:r(Math.atan2(l,h)),v=o-i,w=p-m;let b;const M=m*p;0===M?b=0:(b=g-f,b<-Math.PI?b+=2*Math.PI:b>Math.PI&&(b-=2*Math.PI));const x=2*Math.sqrt(M)*Math.sin(b/2),P=(i+o)/2,y=(m+p)/2;let T;const R=f+g;T=m*p==0?R:Math.abs(f-g)<=Math.PI?R/2:R<2*Math.PI?(R+2*Math.PI)/2:(R-2*Math.PI)/2;const _=1-.17*Math.cos(T-Math.PI/6)+.24*Math.cos(2*T)+.32*Math.cos(3*T+Math.PI/30)-.2*Math.cos(4*T-Math.PI/180*63),S=Math.PI/6*Math.exp(-Math.pow((T-Math.PI/180*275)/(Math.PI/180*25),2)),k=2*Math.sqrt(Math.pow(y,7)/(Math.pow(y,7)+6103515625)),I=1+.015*Math.pow(P-50,2)/Math.sqrt(20+Math.pow(P-50,2)),D=1+.045*y,C=1+.015*y*_,V=-Math.sin(2*S)*k;return Math.sqrt(Math.pow(v/(1*I),2)+Math.pow(w/(1*D),2)+Math.pow(x/(1*C),2)+V*(w/(1*D))*(x/(1*C)))}const s=[127,127,127];function l(e){const t=e[3],i=e.slice(0,3);for(let e=0;e<3;e++)i[e]=Math.round(i[e]*t+s[e]*(1-t));return i}function d(e,t){return o(p(m(l((0,a.parseRgba)(e)))),p(m(l((0,a.parseRgba)(t)))))<3}const c=(0,n.default)((()=>p(m([0,0,0])))),u=(0,n.default)((()=>p(m([255,255,255]))));function h(e){const t=p(m(l((0,a.parseRgba)(e))));return o(t,c())<o(t,u())}function m(e){const[t,i,n]=e,a=t/255,r=i/255,o=n/255,s=100*(a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92),l=100*(r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92),d=100*(o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92);return[.4124*s+.3576*l+.1805*d,.2126*s+.7152*l+.0722*d,.0193*s+.1192*l+.9505*d]}function p(e){const[t,i,n]=e,a=t/95.047,r=i/100,o=n/108.883,s=a>.008856?Math.pow(a,1/3):7.787*a+16/116,l=r>.008856?Math.pow(r,1/3):7.787*r+16/116;return[116*l-16,500*(s-l),200*(l-(o>.008856?Math.pow(o,1/3):7.787*o+16/116))]}},586563:(e,t,i)=>{function n(e){let t;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if(e instanceof Date)t=new Date(e.valueOf());else if(Array.isArray(e)){t=[];let i=0;const a=e.length;for(;i<a;i++)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=n(e[i]))}else{t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=n(e[i]))}return t}i.d(t,{deepCopy:()=>n})}}]);