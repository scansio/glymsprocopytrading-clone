(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[65674],{251284:e=>{e.exports={"tablet-normal-breakpoint":"(max-width: 768px)","small-height-breakpoint":"(max-height: 360px)","tablet-small-breakpoint":"(max-width: 440px)"}},853688:e=>{e.exports={actionButton:"actionButton-k53vexPa",small:"small-k53vexPa",hiddenTitle:"hiddenTitle-k53vexPa"}},491561:e=>{e.exports={popupDialog:"popupDialog-B02UUUN3",wrap:"wrap-B02UUUN3",main:"main-B02UUUN3",small:"small-B02UUUN3",title:"title-B02UUUN3",content:"content-B02UUUN3",html:"html-B02UUUN3",footer:"footer-B02UUUN3",close:"close-B02UUUN3",marginWithoutCloseButton:"marginWithoutCloseButton-B02UUUN3"}},604e3:(e,t,s)=>{"use strict";s.d(t,{LIST_COLORS:()=>d,ListColor:()=>o,changeDescription:()=>L,createCrossTabSyncMiddleware:()=>x,getCommands:()=>P,getListByColor:()=>D,getSymbolColor:()=>M,getSymbolsByColor:()=>T,getTimestamp:()=>R,isListColor:()=>m,markMany:()=>_,reducer:()=>k,remove:()=>v,rename:()=>C,renameSeparator:()=>w,reset:()=>f,setup:()=>b,share:()=>N,shiftCommand:()=>O,updatePersistedState:()=>E});var o,n=s(74293),r=s(438253),i=s(650151),l=s(199669),a=s(50991),c=s(340958),h=s(173777),u=s(559986);!function(e){e.Red="red",e.Blue="blue",e.Green="green",e.Orange="orange",e.Purple="purple",e.Cyan="cyan",e.Pink="pink"}(o||(o={}));const d=[o.Red,o.Blue,o.Green,o.Orange,o.Purple,o.Cyan,o.Pink];function m(e){return new Set(d).has(e)}const p={lists:{colors:[],byColor:{},bySymbol:{}},commands:[],timestamp:null};function y(e,t){const{lists:s}=e,o=s.byColor[t];o&&0===o.symbols.length&&(s.colors=s.colors.filter((e=>e!==t)))}function g(e){return(0,h.isSeparatorItem)(e)}const S=(0,n.createSlice)({name:"marked-lists",initialState:p,reducers:{setup:(e,t)=>{const{lists:s,timestamp:o}=t.payload,n={lists:{colors:[],byColor:{},bySymbol:{}},commands:[],timestamp:null};n.timestamp=o;for(const e of function(e,t){return[...e].sort(((e,s)=>t.indexOf(e.color)-t.indexOf(s.color)))}(s,d)){const t=e.symbols.filter((t=>void 0===n.lists.bySymbol[t]&&(g(t)||(n.lists.bySymbol[t]=e.color),!0)));n.lists.byColor[e.color]={color:e.color,name:e.name,description:e.description,shared:e.shared,symbols:t,persistedState:e.persistedState},t.length>0&&n.lists.colors.push(e.color)}return n},remove:(e,t)=>{const{color:s,symbols:o,silent:n}=t.payload,{lists:l,commands:a}=e,h=l.byColor[s];if(void 0===h||0===h.symbols.length)return;const u=new Set(o),d=h.symbols.filter((e=>!u.has(e)));if(!(0,c.equalArrays)(d,h.symbols)){h.symbols=d;for(const e of u)delete l.bySymbol[e];n||a.push({type:"remove",color:s,symbols:[...u],prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}),y(e,s)}},markMany:(e,t)=>{const{color:s,before:o,silent:n}=t.payload,{lists:l,commands:a}=e,{unique:h,exclusions:d}=function(e,t){const{color:s,symbols:o,separators:n}=t.payload,{lists:r}=e,l={},a=new Set,c=e=>g(e)?((0,i.assert)(null!==s),s):r.bySymbol[e];for(let e=0;e<o.length;++e){const t=o[e];if(a.has(t)||g(t)&&!n)continue;a.add(t);const s=c(t);void 0!==s&&(l[s]=l[s]??new Set).add(t)}return{exclusions:l,unique:a}}(e,t)
;if(0===h.size)return;const m=function(e,t,s,o){const{color:n,before:r}=t.payload,{lists:i}=e;let l;if(null!==n&&void 0!==r&&s.has(r)){const e=i.byColor[n];if(void 0!==e){l=o;for(let t=e.symbols.indexOf(r);t>=0;--t)if(!s.has(e.symbols[t])){l=e.symbols[t];break}}}return l}(e,t,h,u.LIST_START);if(null!==s&&void 0!==d[s]&&1===Object.keys(d).length){const t=l.byColor[s];(0,i.assert)(void 0!==t);const p=t.symbols.filter((e=>!h.has(e))),S=(0,u.getTargetIndex)(p,o,m);if(void 0===S?p.push(...h):p.splice(S,0,...h),(0,c.equalArrays)(p,t.symbols))return;{const o=d[s];(0,i.assert)(void 0!==o),t.symbols=p;for(const e of o)delete l.bySymbol[e];for(const e of h)g(e)||(l.bySymbol[e]=s);return y(e,s),void(n||a.push({type:"replace",color:s,symbols:[...t.symbols],prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}))}}for(const t in d){if(!d.hasOwnProperty(t))continue;const s=d[t];(0,i.assert)(void 0!==s);const o=l.byColor[t];(0,i.assert)(void 0!==o),o.symbols=o.symbols.filter((e=>!s.has(e)||(delete l.bySymbol[e],!1))),y(e,t)}if(null===s)return void(n||a.push({type:"reset",symbols:[...h],prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}));const p=l.byColor[s];if(l.colors.includes(s)){(0,i.assert)(void 0!==p);const t=(0,u.getTargetIndex)(p.symbols,o,m);void 0===t?(p.symbols.push(...h),n||(void 0===d[s]?a.push({type:"append",color:s,symbols:[...h],prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}):a.push({type:"replace",color:s,symbols:[...p.symbols],prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}))):(p.symbols.splice(t,0,...h),n||a.push({type:"replace",color:s,symbols:[...p.symbols],prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}))}else void 0===p?l.byColor[s]={color:s,symbols:[...h],name:null,description:null,shared:!1,persistedState:null}:p.symbols=[...h],l.colors.push(s),n||a.push({type:"append",color:s,symbols:[...h],prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists});for(const e of h)g(e)||(l.bySymbol[e]=s)},renameSeparator:(e,t)=>{const{color:s,separator:o,name:n,silent:l}=t.payload;if(o===n||!g(o)||!g(n))return;const a=e.lists.byColor[s];(0,i.assert)(void 0!==a);const c=a.symbols.indexOf(o);-1!==c&&-1===a.symbols.indexOf(n)&&(a.symbols.splice(c,1,n),l||e.commands.push({type:"rename-separator",color:s,separator:o,name:n,prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}))},rename:(e,t)=>{const{name:s,color:o,silent:n}=t.payload,l=e.lists.byColor[o];(0,i.assert)(void 0!==l),l.name!==s&&(l.name=s,n||e.commands.push({type:"rename",color:o,name:s,prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}))},changeDescription:(e,t)=>{const{color:s,description:o,silent:n}=t.payload,l=e.lists.byColor[s];(0,i.assert)(void 0!==l),l.description!==o&&(l.description=o,n||e.commands.push({type:"change-description",color:s,description:o,prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}))},reset:(e,t)=>{const{silent:s}=t.payload,{lists:o}=e;for(const e of d){const t=o.byColor[e];void 0!==t&&(t.symbols=[])}o.colors=[],o.bySymbol={},s||e.commands.push({type:"reset-all",prevLists:(0,i.ensureDefined)((0,
r.original)(e)).lists})},share:(e,t)=>{const{lists:s,commands:o}=e,{shared:n,color:l,silent:a}=t.payload,c=s.byColor[l];void 0!==c&&c.shared!==n&&(c.shared=n,a||o.push({type:"share",color:l,shared:n,prevLists:(0,i.ensureDefined)((0,r.original)(e)).lists}))},updatePersistedState:(e,t)=>{const{lists:s}=e;for(const e of d){const o=s.byColor[e],n=t.payload[e];void 0!==o&&o.persistedState&&n&&(o.persistedState={...o.persistedState,...n})}},shiftCommand:(e,t)=>{const{count:s}=t.payload;e.commands.splice(0,s)}}}),{markMany:_,setup:b,reset:f,remove:v,rename:C,changeDescription:L,renameSeparator:w,shiftCommand:O,share:N,updatePersistedState:E}=S.actions,{reducer:k}=S;function x(e,t,s=S){return(0,l.createCrossTabSyncMiddleware)({id:e,channel:t,event:"marked-list-cross-tab-sync",filter:e=>function(e,t){return t.actions.markMany.match(e)||t.actions.rename.match(e)||t.actions.changeDescription.match(e)||t.actions.remove.match(e)||t.actions.setup.match(e)||t.actions.renameSeparator.match(e)||t.actions.reset.match(e)||t.actions.share.match(e)||t.actions.updatePersistedState.match(e)}(e,s)})}function M(e,t){return e.lists.bySymbol[a.qualified.cast(t)]??null}function D(e,t){return e.lists.byColor[t]??null}function T(e,t){return D(e,t)?.symbols??null}function P(e){return e.commands}function R(e){return e.timestamp}},60454:(e,t,s)=>{"use strict";s.d(t,{ColorContext:()=>o,ColorManager:()=>l});var o,n=s(604e3),r=s(358338),i=s(502885);!function(e){e[e.SymbolMarker=0]="SymbolMarker",e[e.ScreenerFilter=1]="ScreenerFilter"}(o||(o={}));class l{constructor(e){this._context=e.context}getColor(){switch(this._context){case o.SymbolMarker:return this._getAvailableColor(r.SymbolMarkerSettings.getDefaultColor());case o.ScreenerFilter:return this._getAvailableColor(r.SymbolsFilterSettings.getDefaultColor())}}setColor(e){switch(this._context){case o.SymbolMarker:r.SymbolMarkerSettings.setDefaultColor(this._getAvailableColor(e));break;case o.ScreenerFilter:r.SymbolsFilterSettings.setDefaultColor(this._getAvailableColor(e))}}_getAvailableColor(e){return(0,i.checkColorPermissions)(e)?e:(this.setColor(n.ListColor.Red),n.ListColor.Red)}}},502885:(e,t,s)=>{"use strict";s.d(t,{MarkedSymbolsListModel:()=>I,checkColorPermissions:()=>$,getMarkedListsState:()=>A,getSymbolsLimit:()=>P});var o=s(650151),n=s(604e3),r=s(50991),i=s(173777);class l{constructor(e){this._executing=null,this._destroyed=!1,this._handleChange=()=>{if(this._destroyed)return;const e=this._getCommands();if(e.length>0){if(null!==this._executing)return;const[t,...s]=e;switch(t.type){case"append":this._executing=this._api.appendSymbols(t.color,t.symbols).then((e=>!e||this._destroyed?null:{[t.color]:{symbols:e}})).then((async e=>{if(this._destroyed)return null;const s=this._selector(this._store.getState()),o=(0,n.getListByColor)(s,t.color);if(null!==o&&null!==o.persistedState&&null!==o.persistedState.id)return e;const r=await this._api.getLists();if(this._destroyed)return null;const i=r.find((e=>e.color===t.color));return i?{[t.color]:{id:i.id,symbols:i.symbols}}:null}));break;case"remove":
this._executing=this._api.removeSymbols(t.color,t.symbols).then((e=>!e||this._destroyed?null:{[t.color]:{symbols:e}}));break;case"replace":this._executing=this._api.replaceSymbols(t.color,t.symbols).then((e=>!e||this._destroyed?null:{[t.color]:{symbols:e}}));break;case"reset":this._executing=this._api.resetSymbols(t.symbols).then((()=>{if(this._destroyed)return null;const e={};for(const s of n.LIST_COLORS){const o=t.prevLists.byColor[s];if(!o||!o.persistedState)continue;const n=o.persistedState.symbols.filter((e=>!t.symbols.includes(e)));e[s]={...o.persistedState,symbols:n}}return e}));break;case"rename":this._executing=this._api.renameList(t.color,t.name).then((e=>this._destroyed?null:{[t.color]:e}));break;case"change-description":this._executing=this._api.changeDescription(t.color,t.description).then((e=>this._destroyed?null:{[t.color]:e}));break;case"reset-all":this._executing=this._api.resetAll().then((()=>{if(this._destroyed)return null;const e={};for(const s of n.LIST_COLORS){const o=t.prevLists.byColor[s];o&&o.persistedState&&(e[s]={...o.persistedState,symbols:[]})}return e}));break;case"share":this._executing=this._api.shareList(t.color,t.shared).then((e=>this._destroyed?null:{[t.color]:{shared:e.shared}}));break;case"rename-separator":this._executing=this._api.renameSeparator(t.color,t.separator,t.name).then((e=>!e||this._destroyed?null:{[t.color]:{symbols:e}}))}this._executing.then((e=>{if(this._executing=null,this._destroyed)return;const[o]=this._getCommands();o===t?(this._store.dispatch((0,n.shiftCommand)({count:1})),e&&this._store.dispatch((0,n.updatePersistedState)(e))):(this._onWarn(`Command: ${JSON.stringify(t)} was sent to the server but is not found in the state`),s.length>0&&this._onWarn(`Commands: ${JSON.stringify(s)} was dropped from state without syncing with server`)),this._handleChange()}),(e=>{if(this._destroyed)return;this._executing=null;const{colors:s,byColor:r}=t.prevLists,i=s.map((e=>(0,o.ensureDefined)(r[e])));this._store.dispatch((0,n.setup)({lists:i,timestamp:(0,o.ensureNotNull)((0,n.getTimestamp)(this._selector(this._store.getState())))})),this._onError(t,e)}))}};const{root:t,selector:s,onError:r,onWarn:i,api:l}=e;this._store=t,this._selector=s,this._subscription=this._store.subscribe(this._handleChange),this._onError=r,this._onWarn=i,this._api=l,this._handleChange()}destroy(){this._subscription(),this._destroyed=!0}_getCommands(){const e=this._selector(this._store.getState());return(0,n.getCommands)(e)}}var a=s(735566),c=s(444372),h=s(803912),u=s(77117),d=s(341286),m=s(421907),p=s(658583);async function y(e,t){const s=(0,u.remoteSymbolsFormLocalState)(e,t);return d.pendingOpenSeparators.delete(e),(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/replace/?unsafe=true`,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then(p.handleJSON)}var g=s(591152);const S=(0,a.getLogger)("MarkedSymbols.Api");class _{getLists(){return(0,h.fetch)("/api/v1/symbols_list/colored/").then(p.handleJSON)}removeSymbols(e,t){
return 0===t.length?Promise.resolve(null):(S.logNormal(`Sending request to remove symbols from ${e}-list: ${t}`),async function(e,t){return d.pendingOpenSeparators.has(e)?y(e,(0,u.getLocalListSymbols)(e)):(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/remove/`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(p.handleJSON)}(e,t))}appendSymbols(e,t){return 0===t.length?Promise.resolve(null):(S.logNormal(`Sending request to append symbols to ${e}-list: ${t}`),async function(e,t){return d.pendingOpenSeparators.has(e)?y(e,(0,u.getLocalListSymbols)(e)):(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/append/`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(p.handleJSON)}(e,t))}replaceSymbols(e,t){return 0===t.length?Promise.resolve(null):(S.logNormal(`Sending request to replace symbols in ${e}-list: ${t}`),y(e,t))}resetSymbols(e){return 0===e.length?Promise.resolve():(S.logNormal(`Sending request to reset symbols: ${e}`),function(e){return(0,h.fetch)("/api/v1/symbols_list/colored/bulk_remove/",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(p.handleJSON)}(e))}resetAll(){return S.logNormal("Sending request to reset ALL symbols"),(0,h.fetch)("/api/v1/symbols_list/colored/",{method:"DELETE"}).then(p.handleJSON)}renameList(e,t){return S.logNormal(`Sending request to rename ${e}-list: ${t}`),function(e,t){return(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/rename/`,{method:"POST",body:JSON.stringify({name:t}),headers:{"Content-Type":"application/json"}}).then(p.handleJSON)}(e,t)}shareList(e,t){return S.logNormal(`Sending request to share ${e}-list: ${t}`),(0,g.shareMarkedList)(e,t)}changeDescription(e,t){return S.logNormal(`Sending request to change description ${e}-list: ${t}`),function(e,t){return(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/update_meta/`,{method:"POST",body:JSON.stringify({description:t}),headers:{"Content-Type":"application/json"}}).then(p.handleJSON)}(e,t)}renameSeparator(e,t,s){return S.logNormal(`Sending request to rename separator ${e}-list: ${t} to ${s}`),async function(e,t,s){return(0,m.commonRenameSeparator)(e,"colored",t,s)}(e,t,s)}}var b=s(556466),f=s(526225),v=(s(659863),s(306388)),C=s(837657),L=s(494966),w=s(534197),O=s(778016),N=s(707934),E=s(678708),k=s(264006),x=s(246093),M=s(231780),D=s(125226);let T;function P(){return T||((0,D.isFeatureEnabled)("set_limit_to_1000_for_colored_lists")?1e3:500)}const R=(0,a.getLogger)("MarkedSymbols.Model");function A(e){return e.markedLists}class I{constructor(e){this._promise=(0,v.initSymbolListService)(),this._service=null,this._executor=null,this._subscription=null,this._connectionStatus=null,this._recover=!1,this._synchronize=async e=>{let t,s;null!==this._executor&&(this._executor.destroy(),this._executor=null,R.logNormal("Executor was destroyed."));try{this._recover&&await(0,f.syncUserData)("marked-symbols");const[o]=await Promise.all([this._api.getLists(),this._promise]);t=await this._resolve(o),s=Date.now(),e.assert()}catch(e){
if(e instanceof Error){if(R.logError(`Sync symbols error: ${e.message}`),e.message===M.ROUTINE_CANCELLED_MESSAGE)return;if("ApiError:not_authenticated"===e.name)return this._recover||await(0,f.syncUserData)("marked-symbols"),void(0,E.showSignModal)({feature:"flaggedSymbols"})}throw e}this._recover=!1;const{store:r}=(0,o.ensureNotNull)(this._service);this._createExecutor();const i=this._synchronizationService.getState(),l=null!==i?U(i):null;if(null!==l&&l>=s)return;const a=(0,n.setup)({lists:t.map((e=>({name:e.name??null,description:e.description??null,color:e.color,symbols:e.symbols,shared:e.shared,collapsedSeparators:e.collapsedSeparators,persistedState:e.persistedState}))),timestamp:s});r.dispatch(a)},this._handleChange=()=>{if(this._synchronizationService.isDestroyed())return;const{store:e}=(0,o.ensureNotNull)(this._service),t=(0,o.ensureNotNull)(A(e.getState()));if(this._synchronizationService.getState()!==t)try{this._opts.onChange?.(t,(0,o.ensureNotNull)(this._synchronizationService.getState()))}finally{this._synchronizationService.setState(t)}},this._handleExecutorError=(e,t)=>{"ApiError:plan_symbols_limit_reached"!==t.name?this._connectionStatus===b.ConnectionStatus.Open?this._synchronizationService.isDestroyed()||(R.logError(`Failed to execute ${e.type}`),this._recover=!0,this._synchronizationService.syncSymbols()):(0,k.showSimpleDialogInstance)({title:c.t(null,void 0,s(191056)),text:t.message},x.Warning):(0,N.createGoProDialog)({feature:"watchlistSymbols"})},this._opts=e,this._api=e.api||new _,this._session=e.quoteSession||(0,w.getQuoteSessionInstance)("simple"),this._synchronizationService=new M.SymbolListSynchronizationService({synchronize:this._synchronize,event:e.event,state:null,getTimestamp:U,loggerName:"MarkedSymbolsListModel"}),this._restrictedMarkSymbols=function(e){const{limit:t,colors:s,onLimit:o,onRestrictedColor:l,selector:a}=e;return e=>(c,h)=>{const u=h(),d=a(u),{color:m,symbols:p,separators:y}=e;if(null!==m){const e=d.lists.byColor[m]?.symbols??[],n=new Set(e),a=r.qualified.castMany([]);for(const e of new Set(p))!y&&(0,i.isSeparatorItem)(e)||n.has(e)||a.push(e);if(!s().includes(m))return void l();if(a.length&&a.length+n.size>t())return void o()}c((0,n.markMany)(e))}}({selector:e=>(0,o.ensureNotNull)(A(e)),limit:e.limit??(()=>P()),onLimit:()=>{R.logNormal("LimitReached"),this._opts.onLimit?.()},colors:e.colors??(()=>n.LIST_COLORS.filter(B)),onRestrictedColor:()=>{this._opts.onRestrictedColor?.()}}),this._promise.then((e=>{if(this._synchronizationService.isDestroyed())return;this._service=e;const{store:t}=e;this._synchronizationService.setState((0,o.ensureNotNull)(A(t.getState()))),this._subscription=t.subscribe(this._handleChange)})),this._synchronizationService.connect()}destroy(){this._synchronizationService.destroy(),this._subscription&&this._subscription(),this._executor&&this._executor.destroy()}getSymbolsByColor(e){if(null===this._service)return[];const{store:t}=this._service,s=A(t.getState());return null===s?[]:(0,n.getSymbolsByColor)(s,e)??[]}getLists(){
return n.LIST_COLORS.reduce(((e,t)=>(e.set(t,new Set(this.getSymbolsByColor(t))),e)),new Map)}setSymbolsColor(e,t){if(R.logNormal(`Set symbols color ${t}`),null===this._service)return;const s=this._restrictedMarkSymbols({symbols:e,color:t,separators:!1});this._service.store.dispatch(s)}markMany(e){if(R.logNormal(`Mark many symbols: ${e.color}`),null===this._service)return;const t=this._restrictedMarkSymbols(e);this._service.store.dispatch(t)}getSymbolColor(e){if(null===this._service)return null;const{store:t}=this._service,s=A(t.getState());return null===s?null:(0,n.getSymbolColor)(s,e)}clearAllSymbolsColor(){R.logNormal("Clear all symbols color"),null!==this._service&&this._service.store.dispatch((0,n.reset)({}))}syncSymbols(){return this._synchronizationService.syncSymbols()}anonymize(){null!==this._service&&this._service.store.dispatch((0,n.setup)({timestamp:Date.now(),lists:[]}))}connect(){return this._synchronizationService.connect()}closeConnection(){return this._synchronizationService.closeConnection()}_resolve(e){const t=new Set;for(const s of e)if(void 0!==s.symbols)for(const e of s.symbols){if((0,C.isSeparatorItem)(e))continue;(0,L.safeShortName)(e)===e&&t.add(e)}const s=Array.from(t).map((e=>this._session.snapshot(e).then((t=>t.pro_name||e),(()=>e)).then((t=>[e,t]))));return Promise.all(s).then((t=>{const s=new Map(t);return e.map((e=>{const{symbols:t,collapsedSeparators:o}=(0,u.localCollapseStateFromRemoteSymbols)(e.symbols??[]);return{id:e.id,name:e.name,description:e.description,color:e.color,shared:e.shared,created:e.created,modified:e.modified,type:e.type,active:e.active,symbols:t.map((e=>s.get(e)??e)),collapsedSeparators:o,persistedState:e}}))}))}_createExecutor(){const{store:e}=(0,o.ensureNotNull)(this._service);this._executor=new l({root:e,selector:e=>(0,o.ensureNotNull)(A(e)),api:this._api,onError:this._handleExecutorError,onWarn:e=>{R.logWarn(e)}}),R.logNormal("Executor was created")}}function B(e){return n.ListColor.Red===e||(0,O.enabled)("MULTIFLAGGED_SYMBOLS_LISTS")}function $(e){return!!B(e)||((0,N.createGoProDialog)({feature:"flaggedSymbols"}),!1)}function U(e){return e.timestamp}},330074:(e,t,s)=>{"use strict";s.r(t),s.d(t,{MarkedSymbolsListService:()=>u,getMarkedSymbolsListServiceInstance:()=>d});var o=s(481251),n=s(444372),r=s(604e3),i=s(502885),l=s(779923),a=s(60454),c=s(707934),h=s(778016);class u{constructor(e){this._symbolChangeHandlers=new Map,this._listChangeHandlers=[],this._initHandlers=[],this._sync=null,this._inited=!1,this._handleChange=(e,t)=>{if(e.lists!==t.lists){this._listChangeHandlers.forEach((s=>{try{s(e,t)}catch{}}));for(const[s,o]of Array.from(this._symbolChangeHandlers.entries())){const n=(0,r.getSymbolColor)(e,s),i=(0,r.getSymbolColor)(t,s);n!==i&&o.forEach((e=>{try{e(n,i)}catch{}}))}}},this._onLoginStateChange=()=>{let e;this._model.closeConnection(),window.is_authenticated?(this._model.connect(),e=this._syncSymbols()):(this._model.anonymize(),this._inited=!1,e=Promise.resolve()),e.then(this._fireInit)},this._fireInit=()=>{this._initHandlers.forEach((e=>e()))},
this._runWithSync=e=>{this._sync?this._sync.then(e):e()},this._handleRestrictedColor=()=>{(0,c.createGoProDialog)({feature:"flaggedSymbols"})},this._limit=()=>{const e=(0,h.getConfig)("WATCHLIST_SYMBOLS")?.limit;return void 0!==e&&e<(0,i.getSymbolsLimit)()?e:(0,i.getSymbolsLimit)()},this._handleLimit=()=>{const e=(0,h.getConfig)("WATCHLIST_SYMBOLS")?.limit;void 0!==e&&e<(0,i.getSymbolsLimit)()?(0,c.createGoProDialog)({feature:"watchlistSymbols"}):(0,l.showWarning)({title:n.t(null,void 0,s(176945)),text:n.t(null,{replace:{limit:String((0,i.getSymbolsLimit)())}},s(757473))},null)},this._model=new i.MarkedSymbolsListModel({api:e?e.api:void 0,quoteSession:e?e.quoteSession:void 0,onChange:this._handleChange,limit:e?.limit??this._limit,onLimit:this._handleLimit,onRestrictedColor:this._handleRestrictedColor,colors:e?.colors,event:"marked-symbols"}),this._subscribeLoginStateChange(),this._syncSymbols().then(this._fireInit)}getSymbolsByColor(e){return this._model.getSymbolsByColor(e)}setSymbolsColor(e,t){0!==e.length&&this._runWithSync((()=>{this._model.setSymbolsColor(e,t)}))}getSymbolColor(e){return this._model.getSymbolColor(e)}markMany(e){this._runWithSync((()=>{this._model.markMany(e)}))}clearAllSymbolsColor(){this._runWithSync((()=>{this._model.clearAllSymbolsColor()}))}adjustSymbolsColors(e){const t=new a.ColorManager({context:a.ColorContext.SymbolMarker}),s=!e.map((e=>this.getSymbolColor(e))).includes(null);this.setSymbolsColor(e,s?null:t.getColor())}onSymbolChange(e,t){const s=this._symbolChangeHandlers.get(e);s?s.push(t):this._symbolChangeHandlers.set(e,[t])}offSymbolChange(e,t){const s=this._symbolChangeHandlers.get(e);if(s){const o=s.filter((e=>e!==t));o.length>0?this._symbolChangeHandlers.set(e,o):this._symbolChangeHandlers.delete(e)}}onListChange(e){this._listChangeHandlers.push(e)}offListChange(e){this._listChangeHandlers=this._listChangeHandlers.filter((t=>t!==e))}onInit(e){this._initHandlers.push(e)}offInit(e){this._initHandlers=this._initHandlers.filter((t=>t!==e))}destroy(){this._model.destroy(),this._unsubscribeLoginStateChange()}isInited(){return this._inited}_subscribeLoginStateChange(){window.loginStateChange&&window.loginStateChange.subscribe(this,this._onLoginStateChange)}_unsubscribeLoginStateChange(){window.loginStateChange&&window.loginStateChange.unsubscribe(this,this._onLoginStateChange)}_syncSymbols(){if(window.is_authenticated){this._sync=this._model.syncSymbols();const e=()=>{this._sync=null,this._inited=!0};return this._sync.then(e).catch(e)}return Promise.resolve()}}const d=(0,o.default)((()=>new u))},358338:(e,t,s)=>{"use strict";s.d(t,{SymbolMarkerSettings:()=>o,SymbolsFilterSettings:()=>n});var o,n,r=s(604e3),i=s(62802);!function(e){const t="default_symbol_marker_color";e.getDefaultColor=function(){return i.getValue(t,r.ListColor.Red)},e.setDefaultColor=function(e){i.setValue(t,e,{forceFlush:!0})}}(o||(o={})),function(e){const t="default_symbols_filter_color",s="marked_symbols_filter";e.getDefaultColor=function(){return i.getValue(t,r.ListColor.Red)},e.setDefaultColor=function(e){
i.setValue(t,e,{forceFlush:!0})},e.setIsActive=function(e){i.setValue(s,e,{forceFlush:!0})},e.getIsActive=function(){return i.getBool(s,!1)}}(n||(n={}))},559986:(e,t,s)=>{"use strict";s.d(t,{LIST_START:()=>o,getTargetIndex:()=>n});const o=Symbol();function n(e,t,s){const n=void 0===s?void 0!==t?e.indexOf(t):void 0:s===o?0:e.indexOf(s)+1;return-1!==n?n:void 0}},199669:(e,t,s)=>{"use strict";function o(e){const{id:t,event:s,channel:o,filter:n}=e;return e=>(o.on(s,(s=>{const{action:o,emitter:r}=JSON.parse(s);r!==t&&n(o)&&e.dispatch({...o,payload:{...o.payload,silent:!0}})})),e=>r=>{const i=e(r);return n(r)&&(r.payload.silent||o.emit(s,JSON.stringify({action:r,emitter:t}))),i})}s.d(t,{createCrossTabSyncMiddleware:()=>o})},50991:(e,t,s)=>{"use strict";s.d(t,{qualified:()=>o});const o={cast:e=>e,castMany:e=>e.map(o.cast)}},340958:(e,t,s)=>{"use strict";function o(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0}s.d(t,{equalArrays:()=>o})},540975:(e,t,s)=>{"use strict";s.d(t,{Button:()=>c});var o=s(50959),n=s(915812);function r(e="default"){switch(e){case"default":return"primary";case"stroke":return"secondary"}}function i(e="primary"){switch(e){case"primary":return"brand";case"success":return"green";case"default":return"gray";case"danger":return"red"}}function l(e="m"){switch(e){case"s":return"xsmall";case"m":return"small";case"l":return"large"}}function a(e){const{intent:t,size:s,appearance:o,useFullWidth:n,icon:a,...c}=e;return{...c,color:i(t),size:l(s),variant:r(o),stretch:n}}function c(e){return o.createElement(n.SquareButton,{...a(e)})}},58407:(e,t,s)=>{"use strict";s.d(t,{OutsideEvent:()=>n});var o=s(853970);function n(e){const{children:t,...s}=e;return t((0,o.useOutsideEvent)(s))}},531327:(e,t,s)=>{"use strict";function o(e){return n()?0:r()?45:Math.min(Math.max(e,45),450)}s.d(t,{getWidgetBarPadding:()=>o});const n=()=>!window.matchMedia("(min-width: 768px)").matches,r=()=>!window.matchMedia("(min-width: 1280px)").matches},575658:(e,t,s)=>{"use strict";s.d(t,{setFixedBodyState:()=>l});var o=s(76107),n=s(531327);let r=0,i=!1;function l(e){const{body:t}=document,s=t.querySelector(".widgetbar-wrap");if(e&&1==++r){const e=(0,o.getCSSProperty)(t,"overflow"),n=(0,o.getCSSPropertyNumericValue)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&((0,o.setStyle)(s,"right",`${(0,o.getScrollbarWidth)()}px`),t.style.paddingRight=`${n+(0,o.getScrollbarWidth)()}px`,i=!0),t.classList.add("i-no-scroll")}else if(!e&&r>0&&0==--r&&(t.classList.remove("i-no-scroll"),i)){(0,o.setStyle)(s,"right","0px");let e=0;e=s?(0,n.getWidgetBarPadding)((0,o.getContentWidth)(s)):0,t.scrollHeight<=t.clientHeight&&(e-=(0,o.getScrollbarWidth)()),t.style.paddingRight=(e<0?0:e)+"px",i=!1}}},421907:(e,t,s)=>{"use strict";s.d(t,{commonRenameSeparator:()=>i});var o=s(803912),n=s(77117),r=s(658583);async function i(e,t,s,i){const{oldSeparator:l,newSeparator:a}=(0,n.remoteRenameSeparators)(e,s,i),c=await(0,o.fetch)(`/api/v1/symbols_list/${t}/${e}/replace_symbol/`,{method:"POST",
body:JSON.stringify({old:l,new:a}),headers:{"Content-Type":"application/json"}});if(!c.ok){const{detail:e}=await c.json();throw Error(e)}return(0,r.handleJSON)(c)}},591152:(e,t,s)=>{"use strict";s.d(t,{getOwnSharedList:()=>h,getSharedList:()=>c,shareCustomList:()=>a,shareMarkedList:()=>l});var o=s(604e3),n=s(803912),r=s(658583),i=s(822714);function l(e,t){return(0,n.fetch)(`/api/v1/symbols_list/colored/${e}/share/`,{method:"POST",body:JSON.stringify({shared:t}),headers:{"Content-Type":"application/json"}}).then(r.handleJSON).then(i.convertToMarkedSymbolList)}function a(e,t){return(0,n.fetch)(`/api/v1/symbols_list/custom/${e}/share/`,{method:"POST",body:JSON.stringify({shared:t}),headers:{"Content-Type":"application/json"}}).then(r.handleJSON).then(i.convertToCustomSymbolList)}function c(e){return(0,n.fetch)(`/api/v1/symbols_list/shared/${e}/`,{method:"GET"}).then(r.handleJSON).then(i.convertToSymbolList)}function h(e,t){return(0,o.isListColor)(e)?(0,n.fetch)(`/api/v1/symbols_list/colored/${e}`,{method:"GET",signal:t}).then(r.handleJSON):(0,n.fetch)(`/api/v1/symbols_list/custom/${e}`,{method:"GET",signal:t}).then(r.handleJSON)}},435712:(e,t,s)=>{"use strict";s(638456)},658583:(e,t,s)=>{"use strict";function o(e){return e.ok?204===e.status?Promise.resolve():e.json():e.json().then((e=>{const t=new Error(e.detail||"not ok");throw e.code&&(t.name=`ApiError:${e.code}`),t}))}s.d(t,{handleJSON:()=>o})},642709:(e,t,s)=>{"use strict";s.d(t,{DialogBreakpoints:()=>n});var o=s(251284);const n={SmallHeight:o["small-height-breakpoint"],TabletSmall:o["tablet-small-breakpoint"],TabletNormal:o["tablet-normal-breakpoint"]}},332450:(e,t,s)=>{"use strict";s.d(t,{CLOSE_POPUPS_AND_DIALOGS_COMMAND:()=>o,breakpointList:()=>n});const o="CLOSE_POPUPS_AND_DIALOGS_COMMAND",n=91582!=s.j?[1920,1440,1280,1024,768,480,0]:null},623895:(e,t,s)=>{"use strict";function o(e){return"html"in e?{html:e.html}:"text"in e?{content:e.text}:{content:e.content}}s.d(t,{getContent:()=>o})},246093:(e,t,s)=>{"use strict";s.d(t,{Warning:()=>l});var o=s(50959),n=s(444372),r=s(927582),i=s(623895);function l(e){const{title:t,closeOnOutsideClick:l,onClose:c=()=>{},backdrop:h,showCloseButton:u}=e,d=(0,i.getContent)(e);return o.createElement(r.SimpleDialog,{...d,title:t||n.t(null,void 0,s(966719)),onClose:c,backdrop:h,actions:a(e),dataName:"warning-dialog",closeOnOutsideClick:l,showCloseButton:u})}function a(e){const{buttonText:t,intentButton:o,actions:r,onConfirm:i}=e,l=[{name:"ok",title:t||n.t(null,void 0,s(819295)),intent:o,handler:({dialogClose:e})=>{i?.(),e()}}];return r&&r.forEach((e=>l.push(e))),l}},264006:(e,t,s)=>{"use strict";s.d(t,{showSimpleDialogInstance:()=>c});var o=s(50959),n=s(650151),r=s(670797),i=s(322654),l=s(631456);const a=new i.DialogsOpenerManager;function c(e,t,s){const{title:i}=e;let c=`${i}_`;if(c+="text"in e?e.text:"html"in e?e.html:e.id,a.isOpened(c))return(0,n.ensureDefined)(a.getDialogPayload(c)).closeHandler;const h=document.createElement("div"),u=()=>{e.onClose?.(),d.unmount(),a.setAsClosed(c)},d=(0,
l.createReactRoot)(o.createElement(r.SlotContext.Provider,{value:s||null},o.createElement(t,{...e,onClose:u})),h);return a.setAsOpened(c,{closeHandler:u}),u}},303616:(e,t,s)=>{"use strict";s.d(t,{SimpleDialogContext:()=>o});const o=s(50959).createContext({isSmallTablet:!1,dialogCloseHandler:()=>{}})},927582:(e,t,s)=>{"use strict";s.d(t,{SimpleDialog:()=>L});var o=s(50959),n=s(497754),r=s(897782),i=s(251954),l=s(62526),a=s(470316),c=s(18182),h=s(332450),u=s(642709),d=s(150881),m=s(540975),p=s(265005),y=s(650151),g=s(640027),S=s(670797),_=s(303616),b=s(853688);function f(e){const{disabled:t,name:s,title:r,appearance:i,intent:l,handler:a,reference:c,dataQaId:h,type:u,className:d}=e,{isSmallTablet:f,dialogCloseHandler:v}=(0,o.useContext)(_.SimpleDialogContext),C=(0,y.ensureNotNull)((0,o.useContext)(S.SlotContext)),L=(0,g.useIsMounted)(),[w,O]=(0,o.useState)(!1);return o.createElement(m.Button,{type:u,disabled:t,reference:c,className:n(b.actionButton,d,f&&b.small),name:s,size:f?"l":void 0,appearance:i,intent:l,"data-qa-id":h,onClick:function(){if(w)return;const e=a({dialogClose:v,innerManager:C});e&&(O(!0),e.then((()=>{L.current&&O(!1)})))}},o.createElement("span",{className:n(w&&b.hiddenTitle)},r),w&&o.createElement(p.Loader,{color:"white"}))}var v=s(507720),C=s(491561);function L(e){const{title:t,onClose:s,actions:m,dataName:p,dataQaId:y,popupDialogClassName:g,contentClassName:S,wrapperClassName:b,backdrop:L,closeOnOutsideClick:w=!0,showCloseButton:O=!0,closeOnEscapePress:N=!0,events:E=!0,centeredOnResize:k,shouldAutoClose:x}=e;(0,o.useEffect)((()=>(i.subscribe(h.CLOSE_POPUPS_AND_DIALOGS_COMMAND,s,null),()=>{i.unsubscribe(h.CLOSE_POPUPS_AND_DIALOGS_COMMAND,s,null)})),[s]);const[M,D]=(0,o.useState)(!0),T=(0,o.useRef)(null),P=(0,o.useRef)(null);return(0,o.useEffect)((()=>(window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)})),[P,k]),o.createElement(c.MatchMedia,{rule:u.DialogBreakpoints.TabletSmall},(i=>o.createElement(_.SimpleDialogContext.Provider,{value:{isSmallTablet:i,dialogCloseHandler:s}},o.createElement(l.PopupDialog,{className:n(C.popupDialog,g),componentRef:P,isOpened:M,backdrop:L,dataQaId:y??void 0,onClickBackdrop:E?A:void 0,onClickOutside:w?A:void 0,onKeyDown:R,autofocus:!0,fixedBody:!0},o.createElement("div",{className:n(C.wrap,b),"data-name":p},o.createElement("div",{className:n(C.main,!O&&C.marginWithoutCloseButton,i&&C.small)},t&&o.createElement("div",{className:n(C.title,i&&C.small)},t),function(t){if("html"in e)return o.createElement(d.TouchScrollContainer,{className:n(C.content,t&&C.small,C.html,S),dangerouslySetInnerHTML:{__html:e.html}});if("content"in e)return o.createElement(d.TouchScrollContainer,{className:n(C.content,t&&C.small,S)},e.content);return null}(i),m&&m.length>0&&o.createElement("div",{className:n(C.footer,i&&C.small)},m.map(((e,t)=>o.createElement(f,{...e,key:e.name,dataQaId:`${e.name}-btn`,reference:0===t?T:void 0}))))),O&&o.createElement(r.NavButton,{"aria-label":"close",size:"medium",preservePaddings:!0,className:n(C.close,i&&C.small),icon:v,onClick:A,
"data-name":"close","data-role":"button"}))))));function R(e){switch((0,a.hashFromEvent)(e)){case 27:M&&N&&(e.preventDefault(),s());break;case 13:const t=document.activeElement;if(e.defaultPrevented||t instanceof HTMLAnchorElement||t instanceof HTMLButtonElement&&"submit"!==t.type)return;if(M&&m&&m.length){e.preventDefault();const t=T.current;t&&t.click()}}}function A(){x&&D(!1),s()}function I(){k&&P.current?.centerAndFit?.()}}},77117:(e,t,s)=>{"use strict";s.d(t,{getLocalListSymbols:()=>m,localCollapseStateFromRemoteSymbols:()=>c,remoteRenameSeparators:()=>u,remoteSymbolsFormLocalState:()=>h,separatorRemoteRepresentation:()=>d});var o=s(650151),n=s(173777),r=s(564894),i=s(83871);const l="⁤",a=new RegExp(`^${n.SEPARATOR_PREFIX}(${l})?(.+)$`);function c(e){const t=[],s=[];return e.forEach((e=>{const[,o,r]=e.match(a)||[];if(r){const e=`${n.SEPARATOR_PREFIX}${r}`;o&&s.push(e),t.push(e)}else t.push(e)})),{symbols:t,collapsedSeparators:s}}function h(e,t){const s=y(e);return t.map((e=>s?.hasOwnProperty(e)?d(e,s[e]):e))}function u(e,t,s){const o=y(e);if(o?.hasOwnProperty(s)){const e=o[s];return{oldSeparator:d(t,e),newSeparator:d(s,e)}}return{oldSeparator:t,newSeparator:s}}function d(e,t){const s=e.replace(n.SEPARATOR_PREFIX,"").replace(l,"");return`${n.SEPARATOR_PREFIX}${t?l:""}${s}`}function m(e){const t=p();return(0,o.ensureDefined)(t.markedLists?.lists.byColor[e]?.symbols||t.customLists.lists.byId[e]?.symbols)}function p(){return(0,r.service)(i.SYMBOL_LIST_SERVICE).store.getState()}function y(e){return p().collapsedSeparators[e]}},341286:(e,t,s)=>{"use strict";s.d(t,{pendingOpenSeparators:()=>o});const o=new Set},543469:(e,t,s)=>{"use strict";function o(e){return{type:"custom",id:e.id,name:e.name,description:e.description,symbols:e.symbols,shared:e.shared,persistedState:e.persistedState}}function n(e){return"custom"===e.type}function r(e){return"custom"===e.type}s.d(t,{isCustomList:()=>r,isCustomListResponse:()=>n,makeCustomListFromRecord:()=>o})},231780:(e,t,s)=>{"use strict";s.d(t,{ROUTINE_CANCELLED_MESSAGE:()=>c,SymbolListSynchronizationService:()=>h});var o=s(180349),n=s(556466),r=s(735566);s(659863);const i=6e5,l=3e4,a=3e4,c="ROUTINE_CANCELLED";class h{constructor(e){this._destroyed=!1,this._state=null,this._sync=null,this._disconnectTimestamp=null,this._prevConnectionStatus=null,this._onPushStreamChange=e=>{window.user&&window.user.session_hash!==e.session_hash?o.pushStreamMultiplexer.ownPushStream()?(this._logger.logNormal("Cross browser sync"),this.syncSymbols(e)):this._logger.logDebug("Sync skipped: on secondary tab"):this._logger.logDebug("Sync skipped: session hash")},this._onPushStreamStatus=e=>{const t=Date.now();if(e===n.ConnectionStatus.Open&&this._prevConnectionStatus===n.ConnectionStatus.Closed){this._prevConnectionStatus=e;const s=null===this._disconnectTimestamp?0:t-this._disconnectTimestamp;if(this._disconnectTimestamp=null,!window.is_authenticated)return void this._logger.logDebug("Sync skipped: is not authenticated")
;if(!o.pushStreamMultiplexer.ownPushStream())return void this._logger.logDebug("Sync skipped: on secondary tab");if(s<i)return void this._logger.logDebug("Sync skipped: short disconnection");this._reconnectTimeout=setTimeout((()=>{const e=null!==this._state?this._getTimestamp(this._state):null;null===e||e<t?(this._logger.logNormal("Reconnect sync"),this.syncSymbols()):this._logger.logNormal("Reconnect sync handled by another tab")}),Math.random()*a+l)}else e===n.ConnectionStatus.Closed&&(this._disconnectTimestamp=Date.now(),this._prevConnectionStatus=e,clearTimeout(this._reconnectTimeout))};const{event:t,state:s,synchronize:c,getTimestamp:h,loggerName:u}=e;this._event=t,this._synchronize=c,this._state=s,this._getTimestamp=h,this._logger=(0,r.getLogger)(`${u}.SymbolListSynchronizationService`),this.connect()}destroy(){this._destroyed=!0,this._sync=null,this.closeConnection()}syncSymbols(e){if(null===this._sync){const t=this._sync=this._synchronize({assert:()=>{if(this._sync!==t)throw new Error(c)},cancel:()=>{this._sync=null}},e).then((()=>{this._sync=null}),(e=>{throw this._sync=null,e}))}return this._sync}connect(){this._subscribeOnPushStream()}closeConnection(){this._unsubscribeOnPushStream()}isDestroyed(){return this._destroyed}getState(){return this._state}setState(e){this._state=e}_subscribeOnPushStream(){o.pushStreamMultiplexer.on(this._event,this._onPushStreamChange),o.pushStreamMultiplexer.onPrivateStatus(this._onPushStreamStatus)}_unsubscribeOnPushStream(){o.pushStreamMultiplexer.off(this._event,this._onPushStreamChange),o.pushStreamMultiplexer.offStatus(this._onPushStreamStatus),clearTimeout(this._reconnectTimeout),this._prevConnectionStatus=null}}},322654:(e,t,s)=>{"use strict";s.d(t,{DialogsOpenerManager:()=>o,dialogsOpenerManager:()=>n});class o{constructor(){this._storage=new Map}setAsOpened(e,t){this._storage.set(e,t)}setAsClosed(e){this._storage.delete(e)}isOpened(e){return this._storage.has(e)}getDialogPayload(e){return this._storage.get(e)}}const n=new o},18182:(e,t,s)=>{"use strict";s.d(t,{MatchMedia:()=>n});var o=s(50959);class n extends o.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addEventListener("change",this._handleChange)}_unsubscribe(e){e.removeEventListener("change",this._handleChange)}}},150881:(e,t,s)=>{"use strict";s.d(t,{TouchScrollContainer:()=>c});var o=s(50959),n=s(259142),r=s(650151),i=s(638456);const l=CSS.supports("overscroll-behavior","none");let a=0;const c=(0,o.forwardRef)(((e,t)=>{const{children:s,...r}=e,c=(0,o.useRef)(null);return(0,o.useImperativeHandle)(t,(()=>c.current)),(0,
o.useLayoutEffect)((()=>{if(i.CheckMobile.iOS())return a++,null!==c.current&&(l?1===a&&(document.body.style.overscrollBehavior="none"):(0,n.disableBodyScroll)(c.current,{allowTouchMove:h(c)})),()=>{a--,null!==c.current&&(l?0===a&&(document.body.style.overscrollBehavior=""):(0,n.enableBodyScroll)(c.current))}}),[]),o.createElement("div",{ref:c,...r},s)}));function h(e){return t=>{const s=(0,r.ensureNotNull)(e.current),o=document.activeElement;return!s.contains(t)||null!==o&&s.contains(o)&&o.contains(t)}}},113658:(e,t,s)=>{"use strict";s.d(t,{DialogEventDispatcher:()=>i});var o=s(735566),n=s(900608);const r=(0,o.getLogger)("DialogEventDispatcher");class i{constructor(){this._openSessionId=null}dispatch(e){if("dialog-open"===e){if(null!==this._openSessionId)return void r.logError("Multiple calls to open dialog");this._openSessionId=(0,n.randomHash)()}null!==this._openSessionId?(window.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:{dialogSessionId:this._openSessionId}})),"dialog-close"===e&&(this._openSessionId=null)):r.logError("Empty open dialog session id")}}},991336:(e,t,s)=>{"use strict";s.d(t,{EmbedViewportDimensionsProvider:()=>n});var o=s(931924);class n{constructor(){this._data=null,this._messageReceiver=null}startListening(){this._messageReceiver||(this._messageReceiver=e=>{if(e.data)try{const t=JSON.parse(e.data);"set-embed-resizer-overrides"===t.event&&(this._data=t.edges)}catch{}},this._addMessageListener())}destroy(){this._removeMessageListener()}data(){return this._data}static getInstance(){return this._instance||(this._instance=new n),this._instance}_addMessageListener(){this._messageReceiver&&window.addEventListener("message",this._messageReceiver)}_removeMessageListener(){this._messageReceiver&&window.removeEventListener("message",this._messageReceiver),this._messageReceiver=null}}o.enabled("embed_resizer_overrides")&&n.getInstance().startListening()},507720:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="currentColor"><path d="m.58 1.42.82-.82 15 15-.82.82z"/><path d="m.58 15.58 15-15 .82.82-15 15z"/></svg>'}}]);