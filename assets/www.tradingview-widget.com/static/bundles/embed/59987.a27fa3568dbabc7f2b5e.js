(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[59987,47365],{127707:(e,t,r)=>{"use strict";r.d(t,{calculateMinMax:()=>B,collectAllPaths:()=>L,compareTwoCollectionsByIds:()=>y,findFirst:()=>S,indexOf:()=>v,intersect:()=>b,join:()=>m,lowerbound:()=>n,lowerboundExt:()=>a,mapEntriesGenerator:()=>g,minMax:()=>P,moveAfter:()=>p,moveBefore:()=>_,moveToHead:()=>h,nestedMapGenerator:()=>w,removeEmptyObjectsFromRecordInplace:()=>N,removeItemFromArray:()=>C,revertRecord:()=>A,subtract:()=>d,sum:()=>f,upperbound:()=>u});var o=r(715943),i=r(182433),s=r(650151);function l(e,t){return e<t}function a(e,t,r,o,i){let s=i-o;for(;0<s;){const i=s>>1,l=o+i;r(e(l),t)?(o=l+1,s-=i+1):s=i}return o}function n(e,t,r,o=0,i=e.length){return a((t=>e[t]),t,r,o,i)}function c(e,t,r=0,o=e.length){return n(e,t,l,r,o)}function u(e,t,r,o=0,i=e.length){let s=i-o;for(;0<s;){const i=s>>1,l=o+i;r(t,e[l])?s=i:(o=l+1,s-=i+1)}return o}function d(e,t){return e.filter((e=>!t.includes(e)))}function h(e,t){const r=e.indexOf(t);return r<0?e.slice():[t].concat(e.slice(0,r)).concat(e.slice(r+1))}function p(e,t,r){const o=new Set(t),i=[],s=[],l=[];return e.forEach(((e,t)=>{o.has(e)?s.push(e):(i.push(e),l.push(t))})),r=r<e.length-1?c(l,r+1):i.length,i.splice(r,0,...s),{newItems:i,movedItemsStartIndex:r}}function _(e,t,r){const o=new Set(t),i=[],s=[],l=[];return e.forEach(((e,t)=>{o.has(e)?s.push(e):(i.push(e),l.push(t))})),r=r<=e.length-1?c(l,r):i.length,i.splice(r,0,...s),{newItems:i,movedItemsStartIndex:r}}function b(e,t){const r=new Set;return e.forEach((e=>{t.has(e)&&r.add(e)})),r}function m(e,t){const r=new Set(e);return t.forEach((e=>r.add(e))),r}function C(e,t){const r=e.indexOf(t);(0,s.assert)(-1!==r,"Item is not found"),e.splice(r,1)}function S(e,t){for(const r of e)if(t(r))return r;return null}function v(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function y(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r].id()!==t[r].id())return!1;return!0}function f(e){return e.reduce(((e,t)=>e+t),0)}function*g(e){for(const[t,r]of e)yield[t,r]}function*w(e,t){for(const[r,o]of e)if(void 0===t)for(const[,e]of o)yield[r,e];else{const e=o.get(t);void 0!==e&&(yield[r,e])}}function P(e){return[Math.min(...e),Math.max(...e)]}function B(e,t){return P(e.map(t))}function x(e){for(let t=e.length-1;t>=0;t--)Array.isArray(e[t])?(x(e[t]),(0,o.default)(e[t])&&e.splice(t,1)):(0,i.default)(e[t])&&(N(e[t]),(0,o.default)(e[t])&&e.splice(t,1))}function N(e){const t=Object.keys(e);for(const r of t)Array.isArray(e[r])?(x(e[r]),(0,o.default)(e[r])&&delete e[r]):(0,i.default)(e[r])&&(N(e[r]),(0,o.default)(e[r])&&delete e[r]);return e}function I(e,t,r){const o=Object.keys(e);for(const s of o){const o=t?`${t}.${s}`:s;(0,i.default)(e[s])?I(e[s],o,r):r.push(o)}}function L(e){const t=[];return I(e,"",t),t}function A(e){return Object.entries(e).reduce(((e,[t,r])=>(e[r]=t,e)),{})}},196726:(e,t,r)=>{"use strict";function o(e){e.cancelable&&e.preventDefault()}function i(e){return t=>{o(t),e(t)}}r.d(t,{preventDefault:()=>o,
wrapHandlerWithPreventEvent:()=>i})},719255:(e,t,r)=>{"use strict";r.d(t,{createAliasSymbolInfoWV:()=>h,createSymbolOrAliasWV:()=>p,getSymbolAliasService:()=>d});var o=r(536794),i=r(62802),s=r(547465),l=r(68777),a=r(288789);function n(e){return"SymbolAliasService"+(e?`_${e}`:"")}class c{constructor(e){this._onChanged=new s.Delegate;const t=e.state??i.getJSON(n(e?.id))??[];this._aliasesByProName=new Map(t),this._aliasesByName=new Map(Array.from(this._aliasesByProName.values()).map((e=>[e.aliasName,e]))),this._context=e}getAllAliases(){return Array.from(this._aliasesByProName.values())}getAliasByProName(e){return this._aliasesByProName.get(e)??null}getAliasByName(e){return this._aliasesByName.get(e)??null}addAlias(e){if(this._aliasesByName.has(e.aliasName))throw new Error(`Alias ${e.aliasName} already exists`);if(this._aliasesByProName.has(e.symbolProName))throw new Error(`Alias for symbol ${e.symbolProName} already exists`);this._aliasesByProName.set(e.symbolProName,e),this._aliasesByName.set(e.aliasName,e),this._onChanged.fire(e.symbolProName,e.aliasName,e),this._save()}updateAlias(e){const t=this._aliasesByName.get(e.aliasName);if(!t)throw new Error(`Alias ${e.aliasName} does not exist`);if("symbolProName"in e)throw new Error("Cannot update alias pro name");(0,o.merge)(t,e),this._aliasesByProName.set(t.symbolProName,t),this._aliasesByName.set(t.aliasName,t),this._onChanged.fire(t.symbolProName,t.aliasName,t),this._save()}removeAlias(e){const t=this._aliasesByName.get(e);if(!t)throw new Error(`Alias ${e} not found`);this._aliasesByProName.delete(t.symbolProName),this._aliasesByName.delete(e),this._onChanged.fire(e,t.symbolProName,null),this._save()}onAliasChanged(){return this._onChanged}state(e){const t=new Set(e??[]);return Array.from(this._aliasesByProName.entries()).filter((([r])=>!e||t.has(r)))}_save(){i.setJSON(n(this._context?.id),Array.from(this._aliasesByProName.entries()))}}const u=new Map;function d(e){const t=e??{id:""};let r=u.get(t.id);return r||(r=new c(t)),u.set(t.id,r),r}function h(e,t){return t?(0,l.combine)(((e,r)=>{if(!e)return null;const o=t.getAliasByProName(e.pro_name);return{...e,name:o?.aliasName??e.name,description:o?.description??e.description,local_description:o?.description??e.local_description,...o?.formattingOptions}}),e,(0,a.createWVFromGetterAndSubscription)((e=>(e??0)+1),t.onAliasChanged()).ownership()).ownership():e}function p(e,t,r){return r?(0,l.combine)(((e,t,o)=>{if(!t)return e;const i=r.getAliasByProName(t.pro_name);return i?.aliasName??e}),e,t,(0,a.createWVFromGetterAndSubscription)((e=>(e??0)+1),r.onAliasChanged()).ownership()).ownership():e}},660439:(e,t,r)=>{"use strict";r.d(t,{calculateMinMax:()=>o.calculateMinMax,collectAllPaths:()=>o.collectAllPaths,compareTwoCollectionsByIds:()=>o.compareTwoCollectionsByIds,findFirst:()=>o.findFirst,indexOf:()=>o.indexOf,intersect:()=>o.intersect,join:()=>o.join,lowerbound:()=>o.lowerbound,lowerboundExt:()=>o.lowerboundExt,mapEntriesGenerator:()=>o.mapEntriesGenerator,minMax:()=>o.minMax,moveAfter:()=>o.moveAfter,
moveBefore:()=>o.moveBefore,moveToHead:()=>o.moveToHead,nestedMapGenerator:()=>o.nestedMapGenerator,removeEmptyObjectsFromRecordInplace:()=>o.removeEmptyObjectsFromRecordInplace,removeItemFromArray:()=>o.removeItemFromArray,revertRecord:()=>o.revertRecord,subtract:()=>o.subtract,sum:()=>o.sum,upperbound:()=>o.upperbound});var o=r(127707)},910282:(e,t,r)=>{"use strict";r.d(t,{CHART_FONT_FAMILY:()=>l,CHART_MONOSPACE_FONT_FAMILY:()=>a});var o=r(314802);const i="'Trebuchet MS', Roboto, Ubuntu, sans-serif",s=`-apple-system, BlinkMacSystemFont, ${i}`;let l=((0,o.isOnMobileAppPage)("old"),i);const a="monospace";{const e=["U+2E80-2FD5","U+3040-309F","U+1B100-1B12F","U+1AFF0-1AFFF","U+1B000-1B0FF","U+1B130-1B16F","U+3190-319F","U+30A0-30FF","U+31F0-31FF","U+3400-4DBF","U+4E00-9FFF","U+0E00-0E7F"],t=l;(async()=>{if(!/iPhone OS 15_\d+?/.test(navigator.userAgent))return s;{if(["kr","zh_CN","zh_TW"].includes(window.locale))return l;const t=new FontFace("ChartIosFont","local(Helvetica), local(Arial)",{unicodeRange:e.join(", ")});try{return document.fonts.add(await t.load()),`ChartIosFont, ${s}`}catch(e){return l}}})().then((e=>{t===l&&(l=e)}))}},584317:(e,t,r)=>{"use strict";r.d(t,{DialogRenderer:()=>i});var o=r(820028);class i{constructor(){this._container=document.createElement("div"),this._visibility=new o.WatchedValue(!1),this._rootInstance=null}visible(){return this._visibility.readonly()}_setVisibility(e){this._visibility.setValue(e)}}},766409:(e,t,r)=>{"use strict";r.d(t,{barFunctionByStyle:()=>i});var o=r(326488);function i(e,t){switch(e){case 12:return(0,o.barFunction)("low","low","close");case 2:case 18:case 20:case 14:case 15:case 3:case 10:case 13:return(0,o.barFunction)(t??"close");default:return(0,o.barFunction)("close","open")}}},840514:(e,t,r)=>{"use strict";r.d(t,{CustomSourceBase:()=>o});class o{constructor(e,t){this._id=e,this._model=t}id(){return this._id}isHoveredEnabled(){return!0}isSelectionEnabled(){return!1}priceScale(){return null}paneViews(e){return[]}labelPaneViews(e){return[]}priceAxisViews(e,t){return[]}updateViewsForPane(e,t){e.containsMainSeries()&&this.updateAllViews(t)}}},326301:(e,t,r)=>{"use strict";r.d(t,{getDataVendorString:()=>i});var o=r(931924);function i(e){return null==e||o.enabled("bovespa_widget")?null:"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG","IDX","HSI","QSE","OSE"].includes(e.exchange)?"ICE Data Services":null}},830101:(e,t,r)=>{"use strict";r.d(t,{alwaysShowLastPriceAndLastDayChange:()=>o,lastDayChangeAvailable:()=>i});r(931924);const o=!1,i=!0},746142:(e,t,r)=>{"use strict";r.d(t,{LogicalRange:()=>i});var o=r(650151);class i{constructor(e,t){(0,o.assert)(e<=t,"The left value should be greater than or equal to the right value"),this._left=e,this._right=t}left(){return this._left}right(){return this._right}length(){return this._right-this._left+1}contains(e,t){
return e<this._left-.5?!0===t&&1:e>this._right+.5?!0===t&&2:!0!==t||0}before(e){return e<this._left-.5}after(e){return e>this._right+.5}intersects(e){return!(this.after(e.left())||this.before(e.right()))}equals(e){return this._left===e.left()&&this._right===e.right()}static compare(e,t){return null===e||null===t?e===t:e.equals(t)}}},765935:(e,t,r)=>{"use strict";var o;r.d(t,{PaneCursorType:()=>o}),function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Eraser=2]="Eraser",e[e.Dot=3]="Dot",e[e.Grabbing=4]="Grabbing",e[e.ZoomIn=5]="ZoomIn",e[e.VerticalResize=6]="VerticalResize",e[e.HorizontalResize=7]="HorizontalResize",e[e.DiagonalNeSwResize=8]="DiagonalNeSwResize",e[e.DiagonalNwSeResize=9]="DiagonalNwSeResize",e[e.Text=10]="Text",e[e.None=11]="None"}(o||(o={}))},316250:(e,t,r)=>{"use strict";r.d(t,{fromIndexedTo100:()=>u,fromLog:()=>_,fromPercent:()=>a,getCurrentModePriceText:()=>C,getOppositeModePriceText:()=>S,logFormulaForBase:()=>b,logFormulasAreSame:()=>m,toIndexedTo100:()=>d,toIndexedTo100Range:()=>h,toLog:()=>p,toPercent:()=>n,toPercentRange:()=>c});var o=r(397535),i=r(462140);const s={logicalOffset:4,coordOffset:1e-4},l=305;function a(e,t){return t<0&&(e=-e),e/100*t+t}function n(e,t){const r=100*(e-t)/(t||1);return t<0?-r:r}function c(e,t){const r=n(e.minValue(),t),i=n(e.maxValue(),t);return new o.PriceRange(r,i)}function u(e,t){return t<0&&(e=-e),(e-=100)/100*t+t}function d(e,t){const r=100*(e-t)/t+100;return t<0?-r:r}function h(e,t){const r=d(e.minValue(),t),i=d(e.maxValue(),t);return new o.PriceRange(r,i)}function p(e,t){const r=Math.min(10**l-t.coordOffset,Math.abs(e));if(r<1e-25)return 0;const o=(0,i.log10)(r+t.coordOffset)+t.logicalOffset;return e<0?-o:o}function _(e,t){const r=Math.abs(e);if(r<1e-15)return 0;const o=Math.pow(10,Math.min(r-t.logicalOffset,l))-t.coordOffset;return e<0?-o:o}function b(e){if(null===e)return s;const t=1/e;if(t>=s.coordOffset||t<1e-15)return s;const r=Math.abs(Math.log10(e));return{logicalOffset:r,coordOffset:1/Math.pow(10,r)}}function m(e,t){return e.logicalOffset===t.logicalOffset&&e.coordOffset===t.coordOffset}function C(e,t){return e.isPercentage()?t.formattedPricePercentage:e.isIndexedTo100()?t.formattedPriceIndexedTo100:t.formattedPriceAbsolute}function S(e,t){return e.isPercentage()||e.isIndexedTo100()?t.formattedPriceAbsolute:t.formattedPricePercentage}},387799:(e,t,r)=>{"use strict";r.d(t,{priceSourceTitles:()=>i});var o=r(444372);const i={open:o.t(null,{context:"price source"},r(306976)),high:o.t(null,{context:"price source"},r(893496)),low:o.t(null,{context:"price source"},r(17887)),close:o.t(null,{context:"price source"},r(837054)),hl2:o.t(null,{context:"price source"},r(668916)),hlc3:o.t(null,{context:"price source"},r(204821)),ohlc4:o.t(null,{context:"price source"},r(268163)),hlcc4:o.t(null,{context:"price source"},r(4767))}},14767:(e,t,r)=>{"use strict";r.r(t),r.d(t,{QuotesProvider:()=>l});var o=r(534197),i=r(547465),s=r(900608);class l{constructor(e="full",t){this._quotes=null,this._quoteSessionSymbol=null,this._quoteSessionClientId="",
this._pausedQuoteSessionSymbol=null,this._quotesUpdate=new i.Delegate,this._quoteSymbolChanged=new i.Delegate,this._multiplexerType=e,this._hibernated=t,this._hibernated?.subscribe((e=>{e?this.pause():this.resume()}))}setQuotesSessionSymbol(e){this._quoteSessionSymbol!==e&&(this._pausedQuoteSessionSymbol=null,this._quoteSessionClientId||(this._quoteSessionClientId="series-"+(0,s.guid)()),this._unsubscribeQuoteSession(),this._quoteSessionSymbol=e,this._quoteSymbolChanged.fire(),e&&this._subscribeQuoteSession(e))}symbol(){return this._quoteSessionSymbol}quotesUpdate(){return this._quotesUpdate}quoteSymbolChanged(){return this._quoteSymbolChanged}quotes(){return this._quotes}async quotesSnapshot(e){return(0,o.getQuoteSessionInstance)("simple").snapshot(e)}isPaused(){return null!==this._pausedQuoteSessionSymbol}pause(){null===this._pausedQuoteSessionSymbol&&(this._pausedQuoteSessionSymbol=this._quoteSessionSymbol,this._unsubscribeQuoteSession())}resume(){null!==this._pausedQuoteSessionSymbol&&(this._subscribeQuoteSession(this._pausedQuoteSessionSymbol),this._pausedQuoteSessionSymbol=null)}destroy(){this._unsubscribeQuoteSession(),this._hibernated?.release()}_onUpdate(e,t){this._quotes=e&&e.values||null,t&&t.values&&this._quotesUpdate.fire(e,t)}_subscribeQuoteSession(e){this._quoteSessionSymbol=e,(0,o.getQuoteSessionInstance)(this._multiplexerType).subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))}_unsubscribeQuoteSession(){this._quoteSessionSymbol&&((0,o.getQuoteSessionInstance)(this._multiplexerType).unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes=null)}}},23076:(e,t,r)=>{"use strict";r.d(t,{SelectionRenderer:()=>u});var o=r(610555),i=r(906453),s=r(790188),l=r(731974),a=r(765935),n=r(320994);const c=s.colorsPalette["color-tv-blue-600"];class u extends n.BitmapCoordinatesPaneRenderer{constructor(e){super(),this._data=e||null}setData(e){this._data=e}hitTest(e){if(!this._data||!this._data.visible)return null;for(let t=0;t<this._data.points.length;t++){const r=this._data.points[t];if(r.point.subtract(e).length()<=6)return r.hitTestResult?r.hitTestResult:new l.HitTestResult(this._data.hittestResult,{pointIndex:r.pointIndex,cursorType:r.cursorType??a.PaneCursorType.Default,ownerSourceId:this._data.ownerSourceId})}return null}doesIntersectWithBox(e){return!!this._data&&this._data.points.some((t=>(0,i.pointInBox)(t.point,e)))}_drawImpl(e){if(null===this._data||!this._data.visible)return;const{points:t,bgColors:r,vertOffset:i=0}=this._data;for(let l=0;l<t.length;++l){const{point:a,lineWidth:n}=t[l];(s=a,Number.isFinite(s.x)&&Number.isFinite(s.y))&&this._drawMarker(e,a.add((0,o.point)(0,i)),this._data,r[l],n)}var s}_drawMarker(e,t,r,i,s=1){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:n}=e,{color:u=c,withOutline:h=!0}=r,p=Math.max(1,Math.floor(a))%2/2,_=(0,o.point)(Math.round(t.x*a)+p,Math.round(t.y*n)+p),b=d(_,Math.round(4*a));l.fillStyle=i,l.fill(h?d(_,Math.round(5*a)+p):b),l.fillStyle=u,
b.addPath(d(_,Math.floor((4-s)*a))),l.fill(b,"evenodd")}}function d(e,t){const r=new Path2D;return r.arc(e.x,e.y,t,0,2*Math.PI,!0),r}},889858:(e,t,r)=>{"use strict";r.d(t,{SeriesBarColorer:()=>_});var o=r(790188),i=r(650151),s=r(170562),l=r(584785),a=r(522109);const n=(0,o.getHexColorByName)("color-minty-green-500"),c=(0,o.getHexColorByName)("color-ripe-red-500");function u(e){return{barColor:e.upColor.value(),barBorderColor:e.borderUpColor?e.borderUpColor.value():e.borderColor.value()}}function d(e){return{barColor:e.downColor.value(),barBorderColor:e.borderDownColor?e.borderDownColor.value():e.borderColor.value()}}function h(e,t){return e.borderUpColorProjection&&e.borderUpColor?{barColor:t?e.upColorProjection.value():e.upColor.value(),barBorderColor:t?e.borderUpColorProjection.value():e.borderUpColor.value()}:{barColor:t?e.upColorProjection.value():e.upColor.value()}}function p(e,t){return e.borderDownColorProjection&&e.borderDownColor?{barColor:t?e.downColorProjection.value():e.downColor.value(),barBorderColor:t?e.borderDownColorProjection.value():e.borderDownColor.value()}:{barColor:t?e.downColorProjection.value():e.downColor.value()}}class _ extends a.AbstractBarColorer{constructor(e){super(),this._series=e}applyBarStyle(e,t,r,o){const i=r;i.barColor=void 0,i.barBorderColor=void 0,i.barWickColor=void 0,i.isBarHollow=void 0,i.isBarUp=void 0,i.upColor=void 0,i.downColor=void 0,i.isTwoColorBar=void 0,i.isMergedBar=void 0;const s=this._series.properties();switch(s.childs().style.value()){case 2:case 14:case 15:this._applyLineStyle(e,t,r,o,s);break;case 18:this._applyLineStyle(e,t,r,o,s,!0);break;case 3:this._applyAreaStyle(r,s);break;case 16:this._applyHLCAreaStyle(e,t,r,o,s);break;case 0:this._applyBarStyle(e,r,o,s);break;case 17:case 1:case 19:this._applyCandleStyle(e,r,o,s);break;case 9:this._applyHollowCandleStyle(e,r,o,s);break;case 8:this._applyHAStyle(e,t,r,o,s);break;case 10:this._applyBaseLineStyle(e,t,r,o,s);break;case 12:this._applyHiLoStyle(t,r,s);break;case 13:this._applyColumnStyle(e,r,o,s);break;case 4:this._applyRenkoStyle(e,t,r,o,s);break;case 7:this._applyPBStyle(e,t,r,o,s);break;case 5:this._applyKagiStyle(e,t,r,o,s);break;case 6:this._applyPnfStyle(e,t,r,o,s);break;case 11:this._applyRangeStyle(e,t,r,o,s);break;case 20:this._applySVPStyle(e,r,o,s);break;case 21:this._applyHLCBarsStyle(e,r,o,s)}return r}static upColor(e,t){const r=e.childs(),o=r.style.value();switch(o){case 18:return{barColor:r.tpoStyle.childs().color.value()};case 20:return{barColor:r.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 2:return{barColor:r.lineStyle.childs().color.value()};case 14:return{barColor:r.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:r.steplineStyle.childs().color.value()};case 3:return{barColor:r.areaStyle.childs().linecolor.value()};case 16:return{barColor:r.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:n};case 0:return{barColor:r.barStyle.childs().upColor.value()};case 17:return u(r.volFootprintStyle.childs());case 19:
return u(r.volCandlesStyle.childs());case 1:return u(r.candleStyle.childs());case 9:return u(r.hollowCandleStyle.childs());case 8:return u(r.haStyle.childs());case 10:return{barColor:r.baselineStyle.childs().topLineColor.value()};case 12:return{barColor:r.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:r.columnStyle.childs().upColor.value()};case 4:return h(r.renkoStyle.childs(),t);case 7:return h(r.pbStyle.childs(),t);case 5:return h(r.kagiStyle.childs(),t);case 6:return h(r.pnfStyle.childs(),t);case 11:0;const o=r.rangeStyle.childs(),i=o.barStyle.value()===s.RangeBarStyle.Bars;return{barColor:t?o.upColorProjection.value():i?o.upColor.value():o.candlesUpColor.value(),barBorderColor:t?o.upColorProjection.value():i?o.upColor.value():o.candlesBorderUpColor.value()};case 21:return{barColor:r.hlcBarsStyle.childs().color.value()}}(0,i.ensureNever)(o)}static downColor(e,t){const r=e.childs(),o=r.style.value();switch(o){case 2:return{barColor:r.lineStyle.childs().color.value()};case 18:return{barColor:r.tpoStyle.childs().color.value()};case 20:return{barColor:r.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 14:return{barColor:r.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:r.steplineStyle.childs().color.value()};case 3:return{barColor:r.areaStyle.childs().linecolor.value()};case 16:return{barColor:r.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:c};case 0:return{barColor:r.barStyle.childs().downColor.value()};case 17:return d(r.volFootprintStyle.childs());case 1:return d(r.candleStyle.childs());case 19:return d(r.volCandlesStyle.childs());case 9:return d(r.hollowCandleStyle.childs());case 8:return d(r.haStyle.childs());case 10:return{barColor:r.baselineStyle.childs().bottomLineColor.value()};case 12:return{barColor:r.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:r.columnStyle.childs().downColor.value()};case 4:return p(r.renkoStyle.childs(),t);case 7:return p(r.pbStyle.childs(),t);case 5:return p(r.kagiStyle.childs(),t);case 6:return p(r.pnfStyle.childs(),t);case 11:0;const o=r.rangeStyle.childs(),i=o.barStyle.value()===s.RangeBarStyle.Bars;return{barColor:t?o.downColorProjection.value():i?o.downColor.value():o.candlesDownColor.value(),barBorderColor:t?o.downColorProjection.value():i?o.downColor.value():o.candlesBorderDownColor.value()};case 21:return{barColor:r.hlcBarsStyle.childs().color.value()}}(0,i.ensureNever)(o)}_applyLineStyle(e,t,r,o,s,l){if(r.barColor=_.upColor(s).barColor,l)return;const a=this._findBar(e,t,o),n=this._series.barFunction()(a),c=this._series.priceScale(),u=this._series.firstValue();if(null==n||c.isEmpty()||null==u)return;const d=c.priceToCoordinate(n,u);r.barColor=(0,i.ensureNotNull)(this._series.lineColorAtYPercentFromTop(d/c.height()))}_applyAreaStyle(e,t){e.barColor=_.upColor(t).barColor}_applyHLCAreaStyle(e,t,r,o,i){
const s=this._isUp(e,!1,o,this._series.data().first()?.index!==e)?_.upColor(i,t):_.downColor(i,t);r.barColor=s.barColor,r.barBorderColor=s.barBorderColor}_applyBarStyle(e,t,r,o){const i=this._isUp(e,!1,r,o.childs().barStyle.childs().barColorsOnPrevClose.value())?_.upColor(o):_.downColor(o);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}_applyCandleStyle(e,t,r,o){const i=o.childs(),s=1===i.style.value()?i.candleStyle.childs():19===i.style.value()?i.volCandlesStyle.childs():i.volFootprintStyle.childs(),l=this._isUp(e,!1,r,s.barColorsOnPrevClose.value()&&this._series.data().first()?.index!==e),a=l?_.upColor(o):_.downColor(o);t.barColor=a.barColor,t.barBorderColor=a.barBorderColor,t.barWickColor=l?s.wickUpColor?s.wickUpColor.value():s.wickColor.value():s.wickDownColor?s.wickDownColor.value():s.wickColor.value()}_applyHollowCandleStyle(e,t,r,o){const i=o.childs().hollowCandleStyle.childs(),s=this._isUp(e,!1,r,this._series.data().first()?.index!==e),l=s?_.upColor(o):_.downColor(o);t.barColor=l.barColor,t.barBorderColor=l.barBorderColor,t.barWickColor=s?i.wickUpColor?i.wickUpColor.value():i.wickColor.value():i.wickDownColor?i.wickDownColor.value():i.wickColor.value();const a=this._findBar(e,!1,r);t.isBarHollow=a[1]<=a[4]}_applyHAStyle(e,t,r,o,i){const s=i.childs().haStyle.childs(),l=this._isUp(e,t,o,s.barColorsOnPrevClose.value()),a=l?_.upColor(i):_.downColor(i);r.barColor=a.barColor,r.barBorderColor=a.barBorderColor,r.barWickColor=l?s.wickUpColor.value():s.wickDownColor.value()}_applyBaseLineStyle(e,t,r,o,s){const l=this._findBar(e,t,o),a=s.childs().baselineStyle.childs(),n=this._series.priceScale(),c=Math.round(n.height()*(Math.abs(100-a.baseLevelPercentage.value())/100)),u=(0,i.ensureNotNull)(this._series.firstValue()),d=n.coordinateToPrice(c,u);l[4]>d?r.barColor=_.upColor(s,t).barColor:r.barColor=_.downColor(s,t).barColor}_applyHiLoStyle(e,t,r){const o=_.upColor(r,e);t.barColor=o.barColor,t.barBorderColor=o.barBorderColor}_applyColumnStyle(e,t,r,o){const i=o.childs().columnStyle.childs(),s=this._isUp(e,!1,r,i.barColorsOnPrevClose.value())?_.upColor(o):_.downColor(o);t.color=s.barColor,t.barColor=t.color}_applyRenkoStyle(e,t,r,o,i){const s=i.childs().renkoStyle.childs(),l=this._isUp(e,t,o,!1),a=l?_.upColor(i,t):_.downColor(i,t);r.barColor=a.barColor,r.barBorderColor=a.barBorderColor,r.barWickColor=l?s.wickUpColor.value():s.wickDownColor.value(),r.isBarUp=l}_applyPBStyle(e,t,r,o,i){const s=this._isUp(e,t,o,!1),l=s?_.upColor(i,t):_.downColor(i,t);r.barColor=l.barColor,r.barBorderColor=l.barBorderColor,r.isBarUp=s}_applyKagiStyle(e,t,r,o,i){let s;r.upColor=_.upColor(i,t).barColor,r.downColor=_.downColor(i,t).barColor;const l=this._findBar(e,t,o);l[3]<l[6]&&l[6]<l[2]?(s=l[1]<=l[4],r.isTwoColorBar=!0):(s=l[1]<=l[4]?l[1]===l[6]:l[1]!==l[6],r.isTwoColorBar=!1),r.barColor=s?r.upColor:r.downColor,r.isBarUp=l[1]<=l[4]}_applyPnfStyle(e,t,r,o,i){const s=this._findBar(e,t,o)[6],l=s>0,a=_.upColor(i,t),n=_.downColor(i,t);r.isBarUp=l,r.isMergedBar=2===Math.abs(s),r.upColor=a.barColor,r.downColor=n.barColor,
r.barColor=l?a.barColor:n.barColor}_applyRangeStyle(e,t,r,o,i){const l=i.childs().rangeStyle.childs(),a=l.barStyle.value()===s.RangeBarStyle.Bars,n=this._isUp(e,!1,o,!1),c=n?_.upColor(i,t):_.downColor(i,t),u=n?t?l.upColorProjection.value():a?void 0:l.candlesWickUpColor.value():t?l.downColorProjection.value():a?void 0:l.candlesWickDownColor.value();r.barColor=c.barColor,r.barBorderColor=c.barBorderColor,r.wickColor=u,r.barWickColor=u}_applySVPStyle(e,t,r,o){const i=this._isUp(e,!1,r,!1)?_.upColor(o,!1):_.downColor(o,!1);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}_applyHLCBarsStyle(e,t,r,o){t.barColor=o.childs().hlcBarsStyle.childs().color.value()}_findBar(e,t,r){return r?r.value:this._getSeriesBars(t).valueAt(e)||[]}_findPrevBar(e,t,r){if(r&&r.previousValue)return r.previousValue;const o=this._series.bars().search(e-1,l.PlotRowSearchMode.NearestLeft,4);return null!==o?o.value:[]}_getSeriesBars(e){return e?this._series.nsBars():this._series.bars()}_isUp(e,t,r,o){const i=this._findBar(e,t,r);if(o){return this._findPrevBar(e,t,r)[4]<=i[4]}return i[1]<=i[4]}}},271747:(e,t,r)=>{"use strict";r.d(t,{SeriesAreaPaneView:()=>n});var o=r(534328),i=r(300562),s=r(708162),l=r(23076),a=r(705912);class n extends a.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().areaStyle.childs(),r=t.transparency.value(),a={simpleMode:!1,barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:t.linecolor.value(),lineStyle:t.linestyle.value(),lineWidth:t.linewidth.value(),isSeries:!0,withMarkers:!1,bottom:e.height(),color1:(0,o.generateColor)(t.color1.value(),r),color2:(0,o.generateColor)(t.color2.value(),r),skipHoles:!0},n=new s.CompositeRenderer;return n.append(new i.PaneRendererArea(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&n.append(new l.SelectionRenderer(this._selectionData)),n}}},5253:(e,t,r)=>{"use strict";r.d(t,{SeriesBarsPaneView:()=>a});var o=r(708162),i=r(23076),s=r(512898),l=r(652695);class a extends s.SeriesBarCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:e.barStyle.childs().dontDrawOpen.value(),thinBars:11===e.style.value()?e.rangeStyle.childs().thinBars.value():e.barStyle.childs().thinBars.value()},r=new o.CompositeRenderer;return r.append(new l.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&r.append(new i.SelectionRenderer(this._selectionData)),r}_createItem(e,t,r){const o={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:r.barColor,left:NaN,right:NaN,timePointIndex:e};return(0,s.baseBarCandlesUpdater)(t,o)?o:null}}},340104:(e,t,r)=>{"use strict";r.d(t,{SeriesBaselinePaneView:()=>m});var o=r(534328),i=r(708162),s=r(610555),l=r(648892),a=r(2624),n=r(65840),c=r(660439),u=r(820807),d=r(731974),h=r(338242)
;class p extends u.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null}setData(e){this._data=e}hitTest(e){if(null===this._data)return null;const{items:t,topLineWidth:r,bottomLineWidth:o}=this._data,i=(0,n.interactionTolerance)().series+(r+o)/4,l=(0,c.lowerbound)(t,e,((e,t)=>e.center<=t.x)),u=Math.max(1,l-1),h=Math.min(t.length-1,l+1);for(let r=u;r<=h;++r){const o=t[r-1],l=t[r],{distance:n}=(0,a.distanceToSegment)((0,s.point)(o.center,o.y),(0,s.point)(l.center,l.y),(0,s.point)(e.x,e.y));if(n<=i)return new d.HitTestResult(d.HitTarget.Regular)}return null}_drawImpl(e){if(null===this._data)return;const{items:t,baseLevelCoordinate:r,bottom:o,bottomFillColor1:i,bottomFillColor2:a,topFillColor1:c,topFillColor2:u,topLineColor:d,bottomLineColor:p,topLineWidth:_,bottomLineWidth:b,topLineStyle:m,bottomLineStyle:C}=this._data;if(!function(e){if(0===e.length)return!1;const t=e.findIndex((e=>(0,n.coordinateIsValid)(e.y)));if(-1===t)return!1;let r=e.length-1;for(;r>t&&!(0,n.coordinateIsValid)(e[r].y);)r--;return!(t>r)}(t))return;const S=e.context,{topItems:v,bottomItems:y}=function(e,t){const r=[],o=[];let i=null;for(let a=0;a<e.length;a++){let c=e[a];const u=e[a+1]||{};if((0,n.coordinateIsValid)(c.y))c.y<=t&&r.push(c),c.y>=t&&o.push(c),i=c;else{if(null===i)continue;c=i}if((0,n.coordinateIsValid)(u.y)&&(c.y>t&&u.y<t||c.y<t&&u.y>t))if(Math.abs(c.center-u.center)<1){const e={center:c.center,y:t};r.push(e),o.push(e)}else{const e=(0,l.intersectLineSegments)((0,s.point)(c.center,c.y),(0,s.point)(u.center,u.y),(0,s.point)(c.center,t),(0,s.point)(u.center,t));if(null!==e){const t={center:c.center+(u.center-c.center)*e,y:c.y+(u.y-c.y)*e};r.push(t),o.push(t)}}}return{topItems:r,bottomItems:o}}(t,r);S.lineCap="round",S.lineJoin="round",0!==v.length&&(S.beginPath(),S.moveTo(v[0].center,r),this._makeLine(S,v,!0,0),S.closePath(),S.fillStyle=this._makeLinearGradient(S,c,u,r-o,r),S.fill(),S.beginPath(),this._makeLine(S,v,!1,0),S.lineWidth=_,S.strokeStyle=d,(0,h.setLineStyle)(S,m),S.stroke()),0!==y.length&&(S.beginPath(),S.moveTo(y[0].center,r),this._makeLine(S,y,!0,1),S.closePath(),S.fillStyle=this._makeLinearGradient(S,i,a,r,r+o),S.fill(),S.beginPath(),this._makeLine(S,y,!1,1),S.lineWidth=b,S.strokeStyle=p,(0,h.setLineStyle)(S,C),S.stroke())}_makeLine(e,t,r,o){if(null===this._data)return;const i=t.findIndex((e=>(0,n.coordinateIsValid)(e.y)));if(-1===i)return;const{barSpacing:s,baseLevelCoordinate:l}=this._data,a=.25*s;let c;const u=t.length;for(let s=i;s<u;s++){const u=t[s],d=t[s+1]||{};if((0,n.coordinateIsValid)(u.y)){if(0===o){if(c&&c.y>=l&&u.y>=l){e.moveTo(u.center,u.y);continue}}else if(c&&c.y<=l&&u.y<=l){e.moveTo(u.center,u.y);continue}if(c&&(0,n.coordinateIsValid)(c.y))e.lineTo(u.center,u.y),r&&!(0,n.coordinateIsValid)(d.y)&&e.lineTo(u.center,l);else if(d&&(0,n.coordinateIsValid)(d.y))r?(s!==i&&e.lineTo(u.center,l),e.lineTo(u.center,u.y)):e.moveTo(u.center,u.y);else if(r){if(0===s)continue;s!==i&&e.lineTo(u.center-a,l),e.lineTo(u.center-a,u.y),e.lineTo(u.center+a,u.y),e.lineTo(u.center+a,l)
}else e.moveTo(u.center-a,u.y),e.lineTo(u.center+a,u.y);c=u}}}_makeLinearGradient(e,t,r,o,i){const s=e.createLinearGradient(0,o,0,i);return s.addColorStop(0,t),s.addColorStop(1,r),s}}var _=r(23076),b=r(705912);class m extends b.SeriesSingleLinePaneView{constructor(){super(...arguments),this._renderer=new p,this._topFillColor1="",this._topFillColor2="",this._bottomFillColor1="",this._bottomFillColor2="",this._topLineColor="",this._bottomLineColor="",this._topLineWidth=0,this._bottomLineWidth=0,this._topLineStyle=0,this._bottomLineStyle=0,this._barSpacing=0,this._bottom=0,this._baseLevelCoordinate=0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this._items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,topLineStyle:this._topLineStyle,bottomLineStyle:this._bottomLineStyle,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});const e=new i.CompositeRenderer;return e.append(this._renderer),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&e.append(new _.SelectionRenderer(this._selectionData)),e}_updateImpl(){super._updateImpl();const e=this._source.priceScale();if(!e)return;const t=this._source.properties().childs().baselineStyle.childs(),r=t.transparency.value();this._topFillColor1=(0,o.generateColor)(t.topFillColor1.value(),r),this._topFillColor2=(0,o.generateColor)(t.topFillColor2.value(),r),this._bottomFillColor1=(0,o.generateColor)(t.bottomFillColor1.value(),r),this._bottomFillColor2=(0,o.generateColor)(t.bottomFillColor2.value(),r),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._topLineStyle=t.topLineStyle.value(),this._bottomLineStyle=t.bottomLineStyle.value(),this._barSpacing=this._model.timeScale().barSpacing(),this._bottom=e.height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))}}},973592:(e,t,r)=>{"use strict";r.d(t,{SeriesWaterlinePaneView:()=>a});var o=r(121181),i=r(765935),s=r(731974),l=r(257145);class a extends o.HorizontalLinePaneView{constructor(e){super(),this._getters=e;const t={cursorType:i.PaneCursorType.VerticalResize,activeItem:0,areaName:s.AreaName.SourceItemMove};this._lineRenderer.setHitTest(new s.HitTestResult(s.HitTarget.MovePoint,t)),this._lineRendererData.visible=!0,this._lineRendererData.linestyle=l.LINESTYLE_SPARSE_DOTTED}_updateImpl(){const{baseLevelPercentage:e,paneHeight:t,color:r}=this._getters,o=Math.abs(100-e());this._lineRendererData.y=Math.round(t()*(o/100)),this._lineRendererData.color=r()}}},616332:(e,t,r)=>{"use strict";r.d(t,{SeriesCandlesPaneView:()=>n})
;var o=r(708162),i=r(65840),s=r(23076),l=r(512898),a=r(149836);class n extends l.SeriesBarCandlesPaneView{constructor(e,t,r=1){super(e,t),this._scaleCoeff=1,this._scaleCoeff=r}renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs(),r=1===t.style.value()?t.candleStyle.childs():19===t.style.value()?t.volCandlesStyle.childs():t.volFootprintStyle.childs(),l=this._model.timeScale().barSpacing(),n={bars:this._bars,barSpacing:l,bodyVisible:r.drawBody.value(),borderVisible:r.drawBorder.value(),borderColor:r.borderColor.value(),wickColor:r.wickColor.value(),barWidth:(0,i.optimalBarWidth)(l),wickVisible:r.drawWick.value(),isPriceScaleInverted:e.isInverted(),scaleCoeff:this._scaleCoeff},c=new o.CompositeRenderer;return c.append(new a.PaneRendererCandles(n)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&c.append(new s.SelectionRenderer(this._selectionData)),c}_createItem(e,t,r){const o={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,left:NaN,right:NaN,timePointIndex:e,color:r.barColor,borderColor:r.barBorderColor,wickColor:r.barWickColor,hollow:r.isBarHollow};return(0,l.baseBarCandlesUpdater)(t,o)?o:null}}},351018:(e,t,r)=>{"use strict";r.d(t,{SeriesColumnsPaneView:()=>p});var o=r(650151),i=r(610555),s=r(931924),l=r(569708),a=r(731974),n=r(708162),c=r(584785),u=r(975022),d=r(23076),h=r(564079);r(316250);class p{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,s.enabled)("source_selection_markers"),this._selectionData=null,this._histogramBase=0,this._source=e,this._model=t,this._selectionIndexer=new u.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:"",histogramBase:this._histogramBase},t=new n.CompositeRenderer;return t.append(new h.PaneRendererColumns(e)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const r=e.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;const s=this._source.nearestIndex(r.firstBar(),c.PlotRowSearchMode.NearestRight),n=this._source.nearestIndex(r.lastBar(),c.PlotRowSearchMode.NearestLeft);if(void 0===s||void 0===n)return;const u=this._source.barColorer(),d={},h=this._source.barFunction();for(const{index:e,value:t}of this._source.bars().rangeIterator(s,n)){const r=h(t);if(!(0,l.default)(r))continue;d.value=t;let o=this._source.precomputedBarStyle(t);void 0===o&&(o=u.barStyle(e,!1,d),this._source.setPrecomputedBarStyle(t,o)),this._items.push({timePointIndex:e,left:NaN,center:NaN,right:NaN,y:r,style:o}),d.previousValue=t}const p=this._source.firstValue();if(null===p)return
;t.pointsArrayToCoordinates(this._items,p),e.fillBarBorders(this._items);this._source.properties().childs().columnStyle.childs().baselinePosition?.value();if(this._histogramBase=t.isInverted()?0:t.height(),this._model.selection().isSelected(this._source)){const r=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:a.HitTarget.Regular};const s=(0,o.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=a.HitTarget.Regular;for(let o=0;o<r.length;o++){const l=r[o],a=this._source.bars().valueAt(l);if(null===a)continue;const n=h(a),c=e.indexToCoordinate(l),u=t.priceToCoordinate(n,p);this._selectionData.points.push({point:new i.Point(c,u)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(u/s))}}else this._selectionIndexer.clear()}}},735922:(e,t,r)=>{"use strict";r.d(t,{SeriesHiLoPaneView:()=>m});var o=r(259332),i=r(837462),s=r(660439),l=r(65840),a=r(731974),n=r(820807);class c extends n.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._barWidth=null}setData(e){this._data=e,this._barWidth=Math.max(1,Math.round((0,l.optimalHiLoWidth)(e.barSpacing)))}hitTest(e){if(null===this._data||null===this._barWidth)return null;const t=this._data.bars,r=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].center-r)return null;if(e.x>t[t.length-1].center+r)return null;const o=t[(0,s.lowerbound)(t,e.x-r,((e,t)=>e.center<t))];if(e.x<o.center-r||e.x>o.center+r)return null;const i=(0,l.interactionTolerance)().series+this._barWidth/2,n=Math.min(o.high,o.low),c=Math.max(o.high,o.low),u=this._data.fontSize;return n-i-u<=e.y&&e.y<=n+i||c-i<=e.y&&e.y<=c+i+u?new a.HitTestResult(a.HitTarget.Regular):null}_drawImpl(e){if(null===this._data||null===this._barWidth)return;const{font:t,fontSize:r,labelColor:o,bars:s,inverted:l,labelsPadding:a}=this._data,n=e.context;n.textAlign="center",n.fillStyle=o,n.font=(0,i.makeFont)(r,t);for(let e=0;e<s.length;++e){const t=s[e],r=Math.round(Math.min(t.high,t.low)),o=Math.round(Math.max(t.high,t.low)),i=Math.round(t.center);n.textBaseline="alphabetic",n.fillText(l?t.lowLabel:t.highLabel,i,r-a),n.textBaseline="top",n.fillText(l?t.highLabel:t.lowLabel,i,o+a)}}}var u=r(708162),d=r(23076),h=r(910282),p=r(688857),_=r(149836),b=r(512898);class m extends b.SeriesBarCandlesPaneView{constructor(e,t){super(e,t),this._labelsRenderer=new c,this._candlesRenderer=new _.PaneRendererCandles,this._maxLengthLabel="",this._calculateFontSize=(0,o.default)(((e,t)=>Math.max(1,(0,s.lowerboundExt)((e=>e+1),null,(r=>{const o=(0,i.makeFont)(r,h.CHART_FONT_FAMILY);return(0,p.measureText)(e,o).width<=t}),7,36))),((e,t)=>`${e}/${t}`))}renderer(){const e=this._source.priceScale();if(!e||e.isEmpty())return null;const t=new u.CompositeRenderer,r=this._needLabels(),o=this._source.properties().childs().hiloStyle.childs(),i=this._model.timeScale().barSpacing();if(this._invalidated){const e=this._source.formatter();this._maxLengthLabel="",this._updateImpl({
generateLabels:r,formatter:e}),this._invalidated=!1}if(this._candlesRenderer.setData({bars:this._bars,wickVisible:!1,bodyVisible:o.drawBody.value(),barSpacing:i,borderVisible:o.showBorders.value(),barWidth:(0,l.optimalHiLoWidth)(i),isPriceScaleInverted:e.isInverted()}),t.append(this._candlesRenderer),r){const r=this._calculateLabelFontSize();r&&r>=8&&(this._labelsRenderer.setData({bars:this._bars,barSpacing:i,font:h.CHART_FONT_FAMILY,fontSize:r,labelColor:o.labelColor.value(),inverted:e.isInverted(),labelsPadding:.4*r}),t.append(this._labelsRenderer))}return this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}topPixelMargin(){return this._margin()}bottomPixelMargin(){return this._margin()}_createItem(e,t,r,o){const i={center:NaN,left:NaN,right:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:r.barColor,borderColor:r.barBorderColor,hollow:!1,highLabel:"",lowLabel:"",timePointIndex:e};if(!(0,b.baseBarCandlesUpdater)(t,i))return null;if(i.open=i.high,i.close=i.low,o.generateLabels){const e=o.formatter.format(i.high),t=o.formatter.format(i.low);i.highLabel=e,i.lowLabel=t;const r=(e.length>t.length?e:t).replace(/\d/g,"0");r.length>this._maxLengthLabel.length&&(this._maxLengthLabel=r)}return i}_margin(){if(this._needLabels()){const e=this._calculateLabelFontSize();if(e&&e>=8)return 1.4*e}return 0}_calculateLabelFontSize(){return""===this._maxLengthLabel?null:this._calculateFontSize(this._maxLengthLabel,Math.floor(this._model.timeScale().barSpacing())-2)}_needLabels(){const e=this._source.properties().childs().hiloStyle.childs().showLabels.value(),t=this._model.timeScale().barSpacing();return e&&t>5}}},517742:(e,t,r)=>{"use strict";r.d(t,{SeriesHLCAreaPaneView:()=>m});var o=r(610555),i=r(650151),s=r(931924),l=r(276780),a=r(975022),n=r(23076),c=r(584785),u=r(65840),d=r(708162),h=r(731974),p=r(919383),_=r(886367);class b extends _.ObjectValuesCache{_newObject(){return{high:void 0,close:void 0,low:void 0}}_clearObject(e){e.high=void 0,e.close=void 0,e.low=void 0}}class m{constructor(e,t){this._isMarkersEnabled=(0,s.enabled)("source_selection_markers"),this._hlcAreaCache=new b,this._highPoints=new _.CachedContainer,this._closePoints=new _.CachedContainer,this._lowPoints=new _.CachedContainer,this._barsBorders=new _.CachedContainer,this._filledAreas=new l.CachedMap,this._renderer=new d.CompositeRenderer,this._invalidated=!0,this._source=e,this._model=t,this._selectionIndexer=new a.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer}_updateImpl(){this._renderer.clear();const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const r=e.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;const s=this._source.firstValue();if(null===s)return
;const a=this._source.nearestIndex(r.firstBar()-1,c.PlotRowSearchMode.NearestLeft)??r.firstBar()-1,d=this._source.nearestIndex(r.lastBar()+1,c.PlotRowSearchMode.NearestRight)??r.lastBar()+1;this._hlcAreaCache.invalidateCache(),this._hlcAreaCache.setStartIndex(a),this._barsBorders.invalidateCache(),this._highPoints.invalidateCache(),this._lowPoints.invalidateCache(),this._closePoints.invalidateCache(),this._filledAreas.invalidateCache();let _,b,m;this._source.bars().range(a,d).each(((e,t)=>{if(this._hlcAreaCache.isValidIndex(e)){const r=this._hlcAreaCache.at(e);r.close=t[4],r.high=t[2],r.low=t[3]}return!1}));const C=new Map,S=a+this._hlcAreaCache.length();for(let e=a;e<S;e++){const t=this._hlcAreaCache.at(e),r=t.close??null,o=t.high??null,i=t.low??null;(null!==r||null!==o||null!==i||Number.isFinite(_)||Number.isFinite(b)||Number.isFinite(m))&&(_=r,b=o,m=i,this._highPoints.push(o),this._closePoints.push(r),this._lowPoints.push(i),this._barsBorders.push({timePointIndex:e,left:NaN,center:NaN,right:NaN}),C.set(e,this._barsBorders.length()-1))}t.pricesArrayToCoordinates(this._highPoints.data(),s,this._highPoints.length()),t.pricesArrayToCoordinates(this._closePoints.data(),s,this._closePoints.length()),t.pricesArrayToCoordinates(this._lowPoints.data(),s,this._lowPoints.length()),e.fillBarBorders(this._barsBorders.data(),{startItemIndex:0,endItemIndex:this._barsBorders.length()});const v=this._source.properties().childs().hlcAreaStyle.childs(),y=v.highCloseFillColor.value(),f=v.closeLowFillColor.value(),g=this._filledAreas.get(y)??new l.AreaBackgroundItemsGroup({type:0,color:y}),w=g.newItem()??new l.AreaBackgroundItem;g.push(w),this._filledAreas.set(y,g);const P=this._filledAreas.get(f)??new l.AreaBackgroundItemsGroup({type:0,color:f}),B=P.newItem()??new l.AreaBackgroundItem;P.push(B),this._filledAreas.set(f,P);const x=[],N=[],I=[],L=this._barsBorders.length();for(let e=0;e<L;e++){const t=this._closePoints.at(e),r=this._highPoints.at(e),o=this._lowPoints.at(e),i=this._barsBorders.at(e),s=i.center,l=(0,u.coordinateIsValid)(t),a=(0,u.coordinateIsValid)(r),n=(0,u.coordinateIsValid)(o);l&&a&&n&&(w.addPoints1Point(s,r),w.addPoints2Point(s,t),B.addPoints1Point(s,t),B.addPoints2Point(s,o),x.push({y:r,...i}),N.push({y:t,...i}),I.push({y:o,...i}))}const A=e.barSpacing();if(this._renderer.append(new l.AreaBackgroundRenderer({barSpacing:A,colorAreas:this._filledAreas})),v.lowLineVisible.value()&&this._renderer.append(new p.PaneRendererLine({barSpacing:A,items:I,simpleMode:!0,withMarkers:!1,lineColor:v.lowLineColor.value(),lineStyle:v.lowLineStyle.value(),lineWidth:v.lowLineWidth.value(),skipHoles:!0})),v.highLineVisible.value()&&this._renderer.append(new p.PaneRendererLine({barSpacing:A,items:x,simpleMode:!0,withMarkers:!1,lineColor:v.highLineColor.value(),lineStyle:v.highLineStyle.value(),lineWidth:v.highLineWidth.value(),skipHoles:!0})),this._renderer.append(new p.PaneRendererLine({barSpacing:A,items:N,simpleMode:!0,withMarkers:!1,lineColor:v.closeLineColor.value(),lineStyle:v.closeLineStyle.value(),
lineWidth:v.closeLineWidth.value(),skipHoles:!0})),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled){const t=this._selectionIndexer.indexes(),r=[],s=[],l=(0,i.ensureNotNull)(this._model.paneForSource(this._source)).height();for(let e=0;e<t.length;e++){const i=t[e],a=C.get(i);if(void 0===a)continue;const n=this._closePoints.at(a),c=this._barsBorders.at(a).center;r.push({point:new o.Point(c,n)}),s.push(this._model.backgroundColorAtYPercentFromTop(n/l))}this._renderer.append(new n.SelectionRenderer({bgColors:s,points:r,visible:!0,barSpacing:e.barSpacing(),hittestResult:h.HitTarget.Regular}))}else this._selectionIndexer.clear()}}},669110:(e,t,r)=>{"use strict";r.d(t,{SeriesHLCBarsPaneView:()=>n});var o=r(708162),i=r(23076),s=r(652695),l=r(5253);function a(e){return null!=e}class n extends l.SeriesBarsPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:!0,thinBars:e.hlcBarsStyle.childs().thinBars.value()},r=new o.CompositeRenderer;return r.append(new s.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&r.append(new i.SelectionRenderer(this._selectionData)),r}_createItem(e,t,r){const o=t[2],i=t[3],s=t[4];if(!a(o)||!a(i)||!a(s))return null;return{center:NaN,open:NaN,high:o,low:i,close:s,color:r.barColor,left:NaN,right:NaN,timePointIndex:e}}}},498969:(e,t,r)=>{"use strict";r.d(t,{SeriesHollowCandlesPaneView:()=>n});var o=r(708162),i=r(65840),s=r(23076),l=r(149836),a=r(616332);class n extends a.SeriesCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().hollowCandleStyle.childs(),r=this._model.timeScale().barSpacing(),a={bars:this._bars,barSpacing:r,bodyVisible:t.drawBody.value(),borderVisible:t.drawBorder.value(),borderColor:t.borderColor.value(),wickColor:t.wickColor.value(),barWidth:(0,i.optimalBarWidth)(r),wickVisible:t.drawWick.value(),isPriceScaleInverted:e.isInverted()},n=new o.CompositeRenderer;return n.append(new l.PaneRendererCandles(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&n.append(new s.SelectionRenderer(this._selectionData)),n}}},316661:(e,t,r)=>{"use strict";r.d(t,{SeriesLinePaneView:()=>u});var o=r(731974),i=r(708162),s=r(919383),l=r(255143),a=r(23076),n=r(705912),c=r(660603);class u extends n.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.properties().childs(),t=e.style.value();let r,n=!1;2===t?r=e.lineStyle.childs():14===t?(r=e.lineWithMarkersStyle.childs(),n=!0):15===t?r=e.steplineStyle.childs():18===t&&(r=e.tpoStyle.childs());const u=this._model.timeScale().barSpacing(),d=r.colorType?.value()!==c.ColorType.Gradient?{type:c.ColorType.Solid,color:r.color.value()}:{type:c.ColorType.Gradient,startColor:r.gradientStartColor.value(),
endColor:r.gradientEndColor.value()},h={barSpacing:u,items:this._items,lineColor:d,lineStyle:r.linestyle.value(),withMarkers:n,lineWidth:r.linewidth.value(),simpleMode:!0,hitTestResult:o.HitTarget.Regular,skipHoles:!0};let p,_;if(p=15===t?new l.PaneRendererStepLine(h):new s.PaneRendererLine(h),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData){const e=new i.CompositeRenderer;e.append(p),e.append(new a.SelectionRenderer(this._selectionData)),_=e}else _=p;return _}}},512898:(e,t,r)=>{"use strict";r.d(t,{SeriesBarCandlesPaneView:()=>u,baseBarCandlesUpdater:()=>c});var o=r(610555),i=r(931924),s=r(975022),l=r(584785),a=r(731974);function n(e){return null!=e}function c(e,t){const r=e[1],o=e[2],i=e[3],s=e[4];return!!(n(r)&&n(o)&&n(i)&&n(s))&&(t.open=r,t.high=o,t.low=i,t.close=s,!0)}class u{constructor(e,t){this._bars=[],this._invalidated=!0,this._isMarkersEnabled=(0,i.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new s.SelectionIndexes(t.timeScale())}items(){return this._bars}update(){this._invalidated=!0}_updateImpl(e){const t=this._model.timeScale(),r=this._source.priceScale();if(this._bars=[],t.isEmpty()||!r||r.isEmpty())return;const i=t.visibleBarsStrictRange();if(null===i)return;if(0===this._source.bars().size())return;let s=this._source.nearestIndex(i.firstBar(),l.PlotRowSearchMode.NearestRight);const n=this._source.nearestIndex(i.lastBar(),l.PlotRowSearchMode.NearestLeft);if(void 0===s||void 0===n)return;for(;s<=n;s++){if(null!==this._source.bars().valueAt(s))break}if(s>n)return;const c=this._source.bars().range(s,n),u=this._source.barColorer(),d={};if(c.each(((t,r)=>{d.value=r;const o=u.firstColoredBar(t);let i;null!==o&&o>=t?this._source.setPrecomputedBarStyle(r,void 0):i=this._source.precomputedBarStyle(r),void 0===i&&(i=u.barStyle(t,!1,d),this._source.setPrecomputedBarStyle(r,i));const s=this._createItem(t,r,i,e);return!!s&&(d.previousValue=r,this._bars.push(s),!1)})),0===this._bars.length)return;const h=this._source.firstValue();if(null!==h)if(r.barPricesToCoordinates(this._bars,h),t.fillBarBorders(this._bars),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,hittestResult:a.HitTarget.Regular,barSpacing:t.barSpacing()};const i=this._model.paneForSource(this._source);if(!i)return;const s=i.height();for(let i=0;i<e.length;i++){const l=e[i],a=this._source.bars().valueAt(l);if(null===a)continue;const n=a[1],c=a[4];if(null==n||null==c)continue;const u=.5*(n+c),d=t.indexToCoordinate(l),p=r.priceToCoordinate(u,h);this._selectionData.points.push({point:new o.Point(d,p)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(p/s))}}else this._selectionIndexer.clear()}}},705912:(e,t,r)=>{"use strict";r.d(t,{SeriesSingleLinePaneView:()=>d});var o=r(569708),i=r(610555),s=r(650151),l=r(931924),a=r(975022),n=r(584785),c=r(731974),u=r(660439);class d{constructor(e,t){this._items=[],
this._invalidated=!0,this._isMarkersEnabled=(0,l.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new a.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const r=e.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;const l=this._source.nearestIndex(r.firstBar()-1,n.PlotRowSearchMode.NearestLeft)??r.firstBar()-1,a=this._source.nearestIndex(r.lastBar()+1,n.PlotRowSearchMode.NearestRight)??r.lastBar()+1,d=this._source.barFunction(),h=this._model.timeScale().barSpacing();if(h<.1&&this._source.supportsConflatedChunks()){const e=this._source.conflatedChunks(h,(0,s.ensureNotNull)(this._source.priceSource())),t=(0,u.lowerbound)(e,l,((e,t)=>e.startTime<t)),r=Math.min(e.length-1,(0,u.lowerbound)(e,a,((e,t)=>e.endTime<t)));for(let o=t;o<=r;o++){const t=e[o];[t.open,t.high,t.low,t.close].forEach((e=>{this._items.push({timePointIndex:t.startTime,y:e,left:NaN,center:NaN,right:NaN})}))}}else for(const{index:e,value:t}of this._source.bars().rangeIterator(l,a)){const r=d(t);(0,o.default)(r)&&this._items.push({timePointIndex:e,y:r,left:NaN,center:NaN,right:NaN})}const p=this._source.firstValue();if(null!==p)if(t.pointsArrayToCoordinates(this._items,p),e.fillBarBorders(this._items),this._model.selection().isSelected(this._source)){const r=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:c.HitTarget.Regular};const o=(0,s.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=c.HitTarget.Regular;for(let s=0;s<r.length;s++){const l=r[s],a=this._source.bars().valueAt(l);if(null===a)continue;const n=d(a),c=e.indexToCoordinate(l),u=t.priceToCoordinate(n,p);this._selectionData.points.push({point:new i.Point(c,u)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(u/o))}}else this._selectionIndexer.clear();else this._items=[]}}},868842:(e,t,r)=>{"use strict";r.d(t,{SeriesTableViewValuesProvider:()=>a,fillSymbolSourceValuesProviderItemsVisibility:()=>l});var o=r(176749),i=r(388741),s=r(387799);function l(e,t,r,o){const l=12!==r,a=o.properties().childs().paneProperties.childs().legendProperties.childs(),n=12!==r&&16!==r&&21!==r,c=12!==r,u=(0,i.isPriceSourceStyle)(r),d=!u;e[5].visible=!1;const h=o.mainSeries().intervalObj().value().is1Tick();e[0].visible=d&&n&&!h,e[1].visible=d&&!h,e[2].visible=d&&!h,e[3].visible=d&&c,e[6].visible=a.showBarChange.value()&&l,e[4].visible=u,e[4].title=t?s.priceSourceTitles[t]:""}class a{constructor(e,t){this._model=t,this._series=e,this._valuesProvider=new o.SeriesValuesProvider(e,t,!1)}getItems(){const e=this._valuesProvider.getItems(),t=this._series.style();l(e,this._series.priceSource(),t,this._model);const r=this._model.properties().childs().paneProperties.childs().legendProperties.childs();return e[8].visible=!1,
e[7].visible=r.showVolume.value(),e}getValues(e){const t=this._series.bars().lastIndex();return null===t||t<e?null:this._valuesProvider.getValues(e)}}},176749:(e,t,r)=>{"use strict";r.d(t,{SeriesValuesProvider:()=>x,calculateColor:()=>P,changesData:()=>B});var o=r(650151),i=r(150335),s=r(724377),l=r(444372),a=r(638456),n=r(534328),c=r(969680),u=r(584785),d=r(87913),h=r(951827),p=r(889858);function _(e,t){return 100*(t-e)/Math.abs(e||1)}var b=r(909954),m=r(529751),C=r(634969),S=r(830101);const v=S.lastDayChangeAvailable||S.alwaysShowLastPriceAndLastDayChange,y=a.CheckMobile.any(),f=(0,h.getPercentageFormatter)(),g=(0,h.getVolumeFormatter)(2),w=`${C.notAvailable} (${C.notAvailable}%)`;function P(e,t){const r=(0,s.parseRgb)(t),o=(0,s.parseRgb)(e);return(0,s.distanceRgb)(r,o)<70?(0,s.rgbToHexString)((0,s.invertRgb)(r)):t}function B(e,t,r,o,i){let s,l;if(null!==t){const e=i[4],r=t.change||0;l={change:r,currentPrice:e,prevPrice:e-r,percentChange:t.change_percent||0}}const a=r[4],n=e.search(o-1,u.PlotRowSearchMode.NearestLeft,1),c=n?.value[4]??null;return null!==c&&null!=a&&(s={change:a-c,currentPrice:a,prevPrice:c,percentChange:_(c,a)}),{barChange:s,lastDayChange:l}}class x{constructor(e,t,o=!0){this._series=e,this._model=t,this._searchNearestLeftValue=o,this._emptyValues=[{title:l.t(null,void 0,r(16610)),visible:!1,value:"",index:0,orderIndex:0,id:"open"},{title:l.t(null,void 0,r(778254)),visible:!1,value:"",index:1,orderIndex:1,id:"high"},{title:l.t(null,void 0,r(165318)),visible:!1,value:"",index:2,orderIndex:2,id:"low"},{title:l.t(null,{context:"input"},r(51408)),visible:!1,value:"",index:3,orderIndex:3,id:"close"},{title:"",visible:!1,value:"",index:4,orderIndex:4,id:"source"},{title:"",visible:!1,value:"",index:5,orderIndex:5,id:"lastPrice"},{title:l.t(null,void 0,r(537276)),visible:!1,value:"",index:6,orderIndex:6,id:"change"},{title:l.t(null,{context:"study"},r(424261)),visible:!1,value:"",index:7,orderIndex:7,id:"volume"},{title:l.t(null,void 0,r(463815)),visible:!1,value:"",index:8,orderIndex:8,id:"lastDayChange"}]}getItems(){return this._emptyValues}getValues(e){const t=this._showLastPriceAndChangeOnly(),r=this._emptyValues.map(((e,r)=>({...e,value:6===r||8===r?w:C.notAvailable,visible:5!==r&&4!==r&&!t})));if(this._model.timeScale().isEmpty()||0===this._series.bars().size()||this._series.priceScale().isEmpty())return r;const s=(0,o.ensureNotNull)(this._series.data().bars().last());(0,i.isNumber)(e)||(e=s.index);const l=this._searchNearestLeftValue?u.PlotRowSearchMode.NearestLeft:u.PlotRowSearchMode.Exact,a=this._series.nearestIndex(e,l);if(void 0===a)return r;const d=this._series.data().valueAt(a),h=this._model.backgroundTopColor().value();if(null===d)return r;const p=d[1],_=d[2],m=d[3],S=d[4],{barChange:y,lastDayChange:x}=B(this._series.data(),this._series.quotes(),d,a,s.value),N=(0,b.getPriceValueFormatterForSource)(this._series);if((0,b.shouldBeFormattedAsPercent)(this._series)||(0,b.shouldBeFormattedAsIndexedTo100)(this._series))r[6].value="",r[8].value="";else{const e=this._series.formatter(),t={
signPositive:!0};if(void 0!==y){const{currentPrice:o,prevPrice:i,change:s,percentChange:l}=y,a=e.formatChange?.(o,i,t)??e.format(s,t);r[6].value=(0,c.forceLTRStr)(`${a} (${f.format(l,t)})`)}if(void 0!==x){const{currentPrice:o,prevPrice:i,change:s,percentChange:l}=x,a=e.formatChange?.(o,i,t)??e.format(s,t);r[8].value=(0,c.forceLTRStr)(`${a} (${f.format(l,t)})`)}}let I=null;if(t)r[5].value=null==S?C.notAvailable:N(S),r[5].visible=!0,I=this._getChangeColor(x?.change,s.index),r[6].visible=void 0!==y,r[8].visible=void 0!==x||v;else{r[0].value=null==p?C.notAvailable:N(p),r[1].value=null==_?C.notAvailable:N(_),r[2].value=null==m?C.notAvailable:N(m),r[3].value=null==S?C.notAvailable:N(S),r[4].value=N(this._series.barFunction()(d));const e=d[5];(0,i.isNumber)(e)?r[7].value=g.format(e):r[7].visible=!1;const t=this._series.intervalObj().value().is1Tick(),o=21!==this._series.style();r[0].visible=!t&&o,r[1].visible=!t,r[2].visible=!t,r[8].visible=void 0!==x||v,r[6].visible=void 0!==y;const s=this._series.barColorer().barStyle(a,!1);I=P(h,s.barBorderColor??s.barColor)}I=(0,n.resetTransparency)(P(h,I));for(const e of r)e.color||(e.color=I);return r[8].visible&&(r[8].color=(0,n.resetTransparency)(P(h,this._getChangeColor(x?.change,s.index)))),r}_mobileNonTrackingMode(){return y&&(null===this._model.crosshairSource().pane||(0,m.isLineToolName)(d.tool.value())||null!==this._model.lineBeingEdited())}_showLastPriceAndChangeOnly(){return S.alwaysShowLastPriceAndLastDayChange||this._mobileNonTrackingMode()}_getChangeColor(e,t){const r=this._series.style();if(2===r||15===r||14===r)return this._series.barColorer().barStyle(t,!1).barColor;const o=void 0===e||e>=0?p.SeriesBarColorer.upColor(this._series.properties()):p.SeriesBarColorer.downColor(this._series.properties());return o.barBorderColor??o.barColor}}},808825:(e,t,r)=>{"use strict";var o;r.d(t,{StudyStatusType:()=>o}),function(e){e[e.Undefined=0]="Undefined",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed",e[e.Error=3]="Error"}(o||(o={}))},532111:(e,t,r)=>{"use strict";r.d(t,{StudyWithSummaryDataSource:()=>i});var o=r(470416);class i extends o.PriceDataSource{constructor(e,t){super(e,t)}barColorer(){return null}formatter(e){return this._model.mainSeries().formatter(e)}sessionId(){return this._model.mainSeries().sessionId()}sessionIdChanged(){return this._model.mainSeries().sessionIdChanged()}currency(){return this._model.mainSeries().currency()}unit(){return this._model.mainSeries().unit()}onStatusChanged(){return this._model.mainSeries().onStatusChanged()}symbolSource(){return this._model.mainSeries().symbolSource()}barsProvider(){return this._model.mainSeries().barsProvider()}valuesProvider(){return this._model.mainSeries().valuesProvider()}legendValuesProvider(){return this._model.mainSeries().legendValuesProvider()}statusProvider(e){return this._model.mainSeries().statusProvider(e)}paneViews(e){return this._model.mainSeries().paneViews(e)}updateAllViews(e){this._model.mainSeries().updateAllViews(e)}widgetSideAreaViews(e){
return this._model.mainSeries().widgetSideAreaViews?.(e)??null}properties(){return this._model.mainSeries().properties()}hasStateForAlert(){return!1}allowsMovingBetweenPanes(){return!1}isUserDeletable(){return!1}canBeHidden(){return!1}isDraggable(){return!1}symbolSourceWV(){return this._model.mainSeries().symbolSourceWV()}}},112787:(e,t,r)=>{"use strict";r.d(t,{constants:()=>l,darkColors:()=>i,lightColors:()=>s});var o=r(553407);const i={textColor:o.colors.colorColdGray200,hoveredRowColor:"#B2B5BE33"},s={textColor:o.colors.colorColdGray900,hoveredRowColor:"#5D606B26"},l={cellHeight:20,horzCellMinMargin:4,minAllowedFontSize:8,maxAllowedFontSize:12,fontSizeCoeff:.6,horzCellMarginsCoeff:.1,maxSymbols:40,legendLeftPadding:9,legendFontSize:13}},885935:(e,t,r)=>{"use strict";r.d(t,{TpoSummaryDataSource:()=>s,tpoSummaryDataSourceId:()=>i});var o=r(532111);const i="_seriesTpoSummaryId";class s extends o.StudyWithSummaryDataSource{constructor(e){super(e,i)}name(){return"TPO Summary"}state(){return{id:this.id(),type:"TpoSummaryDataSource",zorder:this.zorder()}}contextMenuStatName(){return"TpoSummaryContextMenu"}}},580089:(e,t,r)=>{"use strict";r.d(t,{VolumeFootprintSummaryDataSource:()=>l,volumeFootpringSummaryDataSourceId:()=>s});var o=r(519073),i=r(532111);const s="_seriesVolumeFootprintSummaryId";class l extends i.StudyWithSummaryDataSource{constructor(e){super(e,s)}isFuture(){return(0,o.isFutures)(this._model.mainSeries().symbolInfo()?.type??"")}name(){return"Volume Footprint Summary"}state(){return{id:this.id(),type:"VolumeFootprintSummaryDataSource",zorder:this.zorder()}}contextMenuStatName(){return"VolumeFootprintSummaryContextMenu"}}},315507:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},85290:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);