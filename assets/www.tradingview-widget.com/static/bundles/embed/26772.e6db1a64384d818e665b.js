"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[26772],{560770:(e,t,i)=>{var n,r;i.d(t,{HorizontalAlign:()=>n,VerticalAlign:()=>r}),function(e){e.Left="left",e.Right="right",e.Center="center"}(n||(n={})),function(e){e.Top="top",e.Bottom="bottom",e.Middle="middle"}(r||(r={}))},395817:(e,t,i)=>{var n=i(837462).makeFont,r=i(837462).parseFont,s=i(735566).getLogger;const{drawPoly:o}=i(338242);var a=s("Model.ChartTradingUtils"),l={_fontHeightCache:{},_parsedColorCache:{},_parseColor:function(e){if(this._parsedColorCache[e])return this._parsedColorCache[e];var t=document.createElement("div");t.style.color=e;var i=t.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||t.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\s*\)$/i),n={r:i[1],g:i[2],b:i[3],a:i[4]||"1"};return this._parsedColorCache[e]=n,n},getColorFromProperties:function(e,t){var i=1-t.value()/100,n=this._parseColor(e.value());return"rgba("+n.r+","+n.g+","+n.b+","+i+")"},setColorToProperties:function(e,t,i){var n=this._parseColor(e);t.setValue("rgb("+n.r+","+n.g+","+n.b+")");var r=100*(1-n.a);i.setValue(Math.max(0,Math.min(r,100)))},getFontFromProperties:function(e,t,i,r){return n(t.value(),e.value(),r.value()?"italic":"",i.value()?"bold":"")},setFontToProperties:function(e,t,i,n,s){var o=r(e);null!==o?(o.family.length>0&&t.setValue(o.family),i.setValue(o.size),n.setValue(o.bold),s.setValue(o.italic)):a.logError("Invalid font: "+e)},fontHeight:function(e){if(!this._fontHeightCache[e]){var t=document.createElement("span");t.appendChild(document.createTextNode("height")),document.body.appendChild(t),t.style.cssText="font: "+e+"; white-space: nowrap; display: inline;";var i=t.offsetHeight;document.body.removeChild(t),this._fontHeightCache[e]=Math.ceil(i)}return this._fontHeightCache[e]},drawPolyHoverOrPress:function(e,t,i,n){n?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.15)",o(e,t,!0),e.restore()):i&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.1)",o(e,t,!0),e.restore())},repaint:function(e){e.lightUpdate()},roundToMinTick:function(e,t){var i=1/e.mainSource().base();return i*Math.round(t/i)}};e.exports=l},568100:(e,t,i)=>{i.d(t,{commonLineToolPropertiesStateKeys:()=>n});const n=["symbolStateVersion","zOrderVersion","frozen","title","interval","symbol","currencyId","unitId","visible","intervalsVisibilities.ticks","intervalsVisibilities.seconds","intervalsVisibilities.secondsFrom","intervalsVisibilities.secondsTo","intervalsVisibilities.minutes","intervalsVisibilities.minutesFrom","intervalsVisibilities.minutesTo","intervalsVisibilities.hours","intervalsVisibilities.hoursFrom","intervalsVisibilities.hoursTo","intervalsVisibilities.days","intervalsVisibilities.daysFrom","intervalsVisibilities.daysTo","intervalsVisibilities.weeks","intervalsVisibilities.weeksFrom","intervalsVisibilities.weeksTo","intervalsVisibilities.months","intervalsVisibilities.monthsFrom","intervalsVisibilities.monthsTo","intervalsVisibilities.ranges"]},225610:(e,t,i)=>{i.d(t,{InplaceTextLineDataSource:()=>x,
InplaceTextUndoCommand:()=>v});var n=i(650279),r=i(650151),s=i(610555),o=i(790188),a=i(724377),l=i(444372),c=i(418450),u=i(68777),d=i(820028),h=i(422063),p=i(318945),g=i(437642),m=i(472354);const f={selectionColor:(0,o.getHexColorByName)("color-tv-blue-500"),cursorColor:(0,o.getHexColorByName)("color-black")},_={selectionColor:(0,o.getHexColorByName)("color-white"),cursorColor:(0,o.getHexColorByName)("color-white")};class v extends h.UndoCommand{constructor(e,t,n,r){super(new c.TranslatedString("change {title} text",l.t(null,void 0,i(257122))).format({title:new c.TranslatedString(t.name(),t.translatedType())}),!0,!m.lineToolsDoNotAffectChartInvalidation),this._sourceId=t.id(),this._model=e,this._oldValue=n,this._newValue=r}redo(){const e=this._source();this._textProperty(e).setValue(this._newValue)}undo(){const e=this._source();this._textProperty(e).setValue(this._oldValue)}_textProperty(e){return e.editableTextProperties().text}_source(){return(0,r.ensureNotNull)(this._model.dataSourceForId(this._sourceId))}}class x extends p.LineDataSource{constructor(e,t,n,r){super(e,t,n,r),this._container=null,this._activeEditingOwnerSource=null,this._editableText=new d.WatchedValue(""),this._activateTextEditingEl=null,this._paneView=null,this._selectionData={},this._cursorPaneView=null,this._cursorPosition=null,this._editingOnCreation=!1,this._editingActivationTime=null,this._editingDeactivationTime=0,this._editableText.subscribe((()=>{this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id()))})),this._isDarkBackground=(0,u.combine)(((e,t)=>{if(null===t)return this._model.dark().value();const i=(0,a.blendRgba)((0,a.parseRgba)(e),(0,a.parseRgba)(t));return"black"===(0,a.rgbToBlackWhiteString)([i[0],i[1],i[2]],150)}),this._model.backgroundColor().spawnOwnership(),this._createDataSourceBackgroundColorWV()),Promise.all([i.e(20700),i.e(63317),i.e(4171),i.e(26772),i.e(62622),i.e(22762),i.e(5262),i.e(51583)]).then(i.bind(i,693556)).then((t=>{this._cursorPaneView=new t.InplaceTextCursorPaneView(this,e),this._additionalCursorDataGetters&&(this._cursorPaneView.setAdditionalCursorData(...this._additionalCursorDataGetters),null!==this._cursorPosition&&(this._cursorPaneView.setCursorPosition(this._cursorPosition),e.updateSource(this)))}))}destroy(){this._isDarkBackground.destroy(),this._editableText.unsubscribe(),this._closeTextEditor(),super.destroy()}editableTextStyle(){return{...this._isDarkBackground.value()?_:f}}removeIfEditableTextIsEmpty(){return!1}activateEditingOnCreation(){return!1}topPaneViews(e){return this._activeEditingOwnerSource&&e.hasDataSource(this._activeEditingOwnerSource)&&!window.TradingView.printing&&this._cursorPaneView?(this._cursorPaneView.update((0,g.sourceChangeEvent)(this.id())),[this._cursorPaneView]):null}dataAndViewsReady(){return super.dataAndViewsReady()&&null!==this._cursorPaneView}editableText(){return this._editableText}textEditingEl(){return this._activateTextEditingEl}activateTextEditingOn(e,t){this._activateTextEditingEl=e,this._editingOnCreation=!!t,this._editingActivationTime=performance.now(),
this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id()))}deactivateTextEditing(){this._closeTextEditor()}textEditingActivationTime(){return this._editingActivationTime}textEditingJustFinished(){return performance.now()-this._editingDeactivationTime<100}setAdditionalCursorData(e,t){this._cursorPaneView?this._cursorPaneView.setAdditionalCursorData(e,t):this._additionalCursorDataGetters=[e,t]}_updateAllPaneViews(e){super._updateAllPaneViews(e),this._cursorPaneView?.update(e)}async _openTextEditor(e,t,n,o,a){if(null!==this._container)return;null===this._editingActivationTime&&(this._editingActivationTime=performance.now()),this._activateTextEditingEl=null,this._cursorPosition=null,this._container=document.createElement("div"),this._container.style.position="absolute",this._container.style.top="0",this._container.style.bottom="0",this._container.style.left="0",this._container.style.right="0",this._container.style.overflow="hidden",this._container.style.pointerEvents="none",t.appendChild(this._container);const{updateChartEditorText:l,closeChartEditorText:c}=await Promise.all([i.e(63637),i.e(82321),i.e(15592)]).then(i.bind(i,244221));if(null===this._container||this._isDestroyed)return;this._activeEditingOwnerSource=e,this._closeChartEditorText=c;const{text:u,textColor:d,wordWrap:h}=this.editableTextProperties(),{forbidLineBreaks:p,maxLength:m}=this.editableTextStyle();this._editableText.setValue(u.value());const f=this.isFixed()?(0,r.ensureDefined)(this.fixedPoint(e)):(0,r.ensureNotNull)(this.pointToScreenPoint(this._points[0],e)),_={position:(0,s.point)(f.x,f.y),textInfo:n,placeholder:o,text:this._editableText,textColor:d,wordWrap:h,forbidLineBreaks:p,maxLength:m,onClose:a,onSelectionChange:this._onSelectionChange.bind(this),onContextMenu:this.onContextMenu?this.onContextMenu.bind(this):void 0};l(this._container,_),this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id()))}_closeTextEditor(e){null===this._container||this._isDestroyed||(this._editingActivationTime=null,this._editingDeactivationTime=performance.now(),this._saveEditedText(),this._editingOnCreation=!1,this._onSelectionChange(),this._closeChartEditorText?.(this._container),this._closeChartEditorText=void 0,this._container.remove(),this._container=null,this._activeEditingOwnerSource=null,this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id())))}_saveEditedText(){const e=this.editableTextProperties().text.value(),t=this._editableText.value();e!==t&&(this._editingOnCreation&&this.editableTextProperties().text.setValue(t),this._model.undoModel().undoHistory().pushUndoCommand(this._changeEditableTextUndoCommand(e,t)))}_changeEditableTextUndoCommand(e,t){return new v(this._model,this,e,t)}_createDataSourceBackgroundColorWV(){return new d.WatchedValue(null).readonly().ownership()}_onSelectionChange(e){if(null===this._container)return;const t={};if(void 0!==e){const{start:i,end:n}=e;i===n?t.cursorPosition=i:t.selectionRange=[Math.min(i,n),Math.max(i,n)]}(0,n.default)(t,this._selectionData)||(this._selectionData=t,this._paneViews.forEach((e=>{
e.forEach((e=>{"setSelectionRange"in e&&e.setSelectionRange(t.selectionRange)}))})),this._cursorPaneView?this._cursorPaneView.setCursorPosition(t.cursorPosition):this._cursorPosition=t.cursorPosition??null,this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id())))}}},898021:(e,t,i)=>{i.d(t,{LineDataSourceProperty:()=>a});var n=i(154834),r=i(998034),s=i(650151),o=i(890390);class a extends o.DefaultProperty{constructor({templateKeys:e,...t}){super({ignoreAllowSavingDefaults:!0,saveNonDefaultUserPreferencesOnly:!0,...t}),this._templateKeys=(0,s.ensureDefined)(e||this._allDefaultsKeys)}template(){return(0,o.extractState)(this.state(),this._templateKeys,[])}applyTemplate(e){this.mergeAndFire((0,o.extractState)((0,r.default)((0,n.default)(this._factoryDefaultsSupplier()),e),this._templateKeys))}}},662466:(e,t,i)=>{i.d(t,{LineToolWithRelativePriceCoordinate:()=>g,getNoDataPosition:()=>h,getSeriesPosition:()=>p,positionToCoordinate:()=>c});var n=i(650151),r=i(584785),s=i(225610);function o(e,t,i){const n=e.barFunction();switch(e.style()){case 3:case 10:case 2:case 14:case 15:return n(t.value);default:return t.value[-1===i?3:2]}}function a(e){return e>=0?1:-1}function l(e,t){return-1===a(e)!==t?-1:1}function c(e,t,i,n){const r=Math.min(t,Math.max(0,1===n?i:t-i));return i-n*Math.abs(r*e/100)}function u(e,t,i){const n=e.index();return null===n?null:{index:n,price:t.coordinateToPrice(t.height()/2,i)}}function d(e,t){const i=e.data().bars(),n=i.first(),s=i.last();if(null===n||null===s)return null;let l;const c=t.index();if(null===c){if(void 0===t.time)return null;const e=t.time(),o=n.value[0],a=s.value[0];if(e<o-86400||e>a)return null;l=i.searchByTime(e,r.PlotRowSearchMode.NearestRight,4)}else l=i.search(c);return null===l?null:{index:l.index,price:o(e,l,a(t.position()))}}function h(e,t,i,n){const r=u(e,t,n);if(null===r)return null;const s=l(e.position(),t.isInverted());return{index:r.index,price:r.price,poleStartY:t.height(),visualDirection:1,positionPointDirection:s,startsOnSeriesData:!1,priceCoordinate:t.priceToCoordinate(r.price,n),indexCoordinate:i.indexToCoordinate(r.index)}}function p(e,t,i=!0){const r=d(e,t),s=e.priceScale(),o=e.model().timeScale(),a=(0,n.ensureNotNull)(e.firstValue());if(null===r)return h(t,s,o,a);let c=0;const u=e.properties().childs(),p=s.priceToCoordinate(r.price,a),g=l(t.position(),s.isInverted());if(i)switch(e.style()){case 16:c=1===g?u.hlcAreaStyle.childs().highLineWidth.value()/2:u.hlcAreaStyle.childs().lowLineWidth.value()/2;break;case 3:c=u.areaStyle.childs().linewidth.value()/2;break;case 2:c=u.lineStyle.childs().linewidth.value()/2;break;case 14:c=u.lineWithMarkersStyle.childs().linewidth.value()/2;break;case 15:c=u.steplineStyle.childs().linewidth.value()/2;break;case 10:const e=Math.abs(100-u.baselineStyle.childs().baseLevelPercentage.value());c=s.height()*e/100>p?u.baselineStyle.childs().topLineWidth.value()/2:u.baselineStyle.childs().bottomLineWidth.value()/2;break;case 1:case 9:case 8:case 12:case 4:case 7:c=3;break;case 0:
c=u.barStyle.childs().thinBars.value()?3:Math.max(3,.25*o.barSpacing());break;case 11:c=u.rangeStyle.childs().thinBars.value()?3:Math.max(3,.25*o.barSpacing());break;case 5:c=Math.max(4,.25*o.barSpacing());break;case 6:c=Math.max(5,.25*o.barSpacing())}const m=p-g*c;return{index:r.index,price:r.price,poleStartY:m,visualDirection:g,positionPointDirection:g,startsOnSeriesData:!0,priceCoordinate:p,indexCoordinate:o.indexToCoordinate(r.index)}}class g extends s.InplaceTextLineDataSource{constructor(){super(...arguments),this._startMovingAnchorY=NaN}priceSource(){return this.ownerSource()}editableTextProperties(){(0,n.assert)(!1,"unexpected method call")}addPoint(e,t,i){return super.addPoint(this._updatePositionAndCorrectPoint(e),t,i)}setPoint(e,t,i,n){n?super.setPoint(e,t,i,n):(super.setPoint(e,this._updatePositionAndCorrectPoint(t,!this.isPhantom()&&!this._allowChangeAnchorHorizontally()),i),this._syncPosition())}setPointAndChangeIndex(e,t,i){super.setPoint(e,this._updatePositionAndCorrectPoint(t),i),this._syncPosition()}startMoving(e,t,i,r){r||(this._startMovingAnchorY=(0,n.ensureNotNull)(this._anchorYCoordinate())),super.startMoving(e,t,i)}move(e,t,i,r){const s=(0,n.ensureDefined)((0,n.ensureNotNull)(this.startMovingPoint()).logical),o=(0,n.ensureDefined)(e.logical);if(!r&&0===t){const e=this._points[0],t=o.index-s.index,i=(0,n.ensureNotNull)(this.priceScale()),r=(0,n.ensure)(this.ownerSource()?.firstValue()),a=i.priceToCoordinate(o.price,r)-i.priceToCoordinate(s.price,r),l=this._startMovingAnchorY+a,c=i.coordinateToPrice(l,r);this._updatePositionAndCorrectPoint({index:e.index+t,price:c})}super.move(e,t,i),r||this._syncPosition()}_allowChangeAnchorHorizontally(){return!1}_updatePositionAndCorrectPoint(e,t=!1){t&&(e.index=this._points[0].index);const i=this.priceSource();if(null===i)return e;const n=i.priceScale(),r=i.firstValue();if(null===n||n.isEmpty()||null===r)return e;const s=n.height();let a=s/2,l=e.price>=n.coordinateToPrice(a,r)?1:-1;const c=this._model.mainSeries();if(i===c){const t=c.data().search(this._baseSeriesIndexForPoint(e));if(null!==t){const i=o(c,t,-1),s=o(c,t,1);l=e.price>=i?1:-1,a=n.priceToCoordinate(1===l?s:i,r),e.price=1===l?Math.max(s,e.price):e.price}}const u=1===(-1===l!==n.isInverted()?-1:1)?a:s-a,d=n.priceToCoordinate(e.price,r),h=Math.min(s,Math.abs(d-a)),p=Math.max(0,Math.min(100,100*h/u))*l;return this.properties().childs().position.setValue(p),e}_baseSeriesIndexForPoint(e){return e.index}_syncPosition(){const e=this.linkKey().value();null!==e&&this._syncLineStyleChanges(e,{position:this.properties().childs().position.value()})}_anchorYCoordinate(){const e=this.priceSource();if(null===e)return null;const t=e.priceScale(),i=e.firstValue();if(null===t||t.isEmpty()||null===i)return null;const n=this._model.mainSeries(),r=this.customEvent();if(null===r)return null;let s=null;if(e===n&&(s=d(n,r)),null===s&&(s=u(r,t,i)),null===s)return null;const o=r.position(),a=t.priceToCoordinate(s.price,i);return c(o,t.height(),a,l(o,t.isInverted()))}}},179404:(e,t,i)=>{i.d(t,{
LineToolParallelChannelPropertiesImpl:()=>V,coeffs:()=>_});var n=i(154834),r=i(998034),s=i(650151),o=i(553407),a=i(61499),l=i(257145),c=i(560770),u=i(568100),d=i(266954),h=i(890390),p=i(898021),g=i(702067),m=i(938186),f=i(331633);const _=[-.25,0,.25,.5,.75,1,1.25];const v={intervalsVisibilities:{...d.intervalsVisibilitiesDefaults},...function(){const e={};return _.forEach(((t,i)=>{e[`level${i+1}`]={visible:[1,3,5].includes(i),coeff:t,lineStyle:3===i?l.LINESTYLE_DASHED:l.LINESTYLE_SOLID,lineWidth:[1,5].includes(i)?2:1}})),e}(),extendLeft:!1,extendRight:!1,fillBackground:!0,transparency:80,labelVisible:!1,labelHorzAlign:c.HorizontalAlign.Left,labelVertAlign:c.VerticalAlign.Bottom,labelFontSize:14,labelBold:!1,labelItalic:!1,version:2};const x={...function(){const e={};for(let t=0;t<_.length;t++)e[`level${t+1}`]={color:"#2962ff"};return e}(),labelTextColor:o.colors.colorTvBlue500,backgroundColor:o.colors.colorTvBlue500Alpha20},y=new Map([[a.StdTheme.Light,x],[a.StdTheme.Dark,x]]),b="linetoolparallelchannel",w=(0,h.extractAllPropertiesKeys)((0,s.ensureDefined)(y.get(a.StdTheme.Light))),S=(0,h.extractAllPropertiesKeys)(v),C=[...w,...S,"labelText"],P=[...w,...S,...u.commonLineToolPropertiesStateKeys,"labelText"];function T(e){const{linecolor:t,linestyle:i,linewidth:s,showMidline:o,midlinecolor:l,midlinestyle:c,midlinewidth:u,...d}=e;return{...(0,r.default)((0,n.default)(v),y.get(f.watchedTheme.value())??y.get(a.StdTheme.Light)),...d,level4:{visible:o,color:l,lineStyle:c,lineWidth:u,coeff:.5},level2:{color:t,lineStyle:i,lineWidth:s,visible:!0,coeff:0},level6:{color:t,lineStyle:i,lineWidth:s,visible:!0,coeff:1}}}class V extends p.LineDataSourceProperty{constructor(e){1===(e.state&&"version"in e.state?e.state.version:1)&&e.state&&(e.state=T(e.state),e.state=(0,h.extractState)(e.state,e.allStateKeys)),super(e),this.addChild("linesColors",new g.LineToolColorsProperty(_.map(((e,t)=>(0,s.ensureDefined)(this.child(`level${t+1}`)).childs().color)))),this.addChild("linesWidths",new g.LineToolWidthsProperty(_.map(((e,t)=>(0,s.ensureDefined)(this.child(`level${t+1}`)).childs().lineWidth)))),this.addChild("textsColors",new g.LineToolColorsProperty([(0,s.ensureDefined)(this.child("labelTextColor"))]))}applyTemplate(e){1===("version"in e?e.version:1)&&(e=T(e),e=(0,h.extractState)(e,this._templateKeys)),super.applyTemplate(e)}static create(e,t){return new this({defaultName:b,factoryDefaultsSupplier:()=>(0,m.factoryDefaultsForCurrentTheme)(v,y),nonThemedDefaultsKeys:S,themedDefaultsKeys:w,templateKeys:C,allStateKeys:P,state:t,theme:e})}_userSettings(){let e=(0,h.createDefaultsState)(!0,b,[],null);return 1===(e&&"version"in e?e.version:1)&&(e=T(e)),(0,h.extractState)((0,n.default)(e),this._allDefaultsKeys,this._excludedDefaultsKeys)}}},331790:(e,t,i)=>{var n,r;i.d(t,{AlertStatus:()=>n,Direction:()=>r}),function(e){e[e.Waiting=0]="Waiting",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(n||(n={})),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down"}(r||(r={}))},271792:(e,t,i)=>{var n;i.d(t,{RiskRewardPointIndex:()=>n}),function(e){
e[e.Entry=0]="Entry",e[e.Close=1]="Close",e[e.ActualEntry=2]="ActualEntry",e[e.ActualClose=3]="ActualClose"}(n||(n={}))},951827:(e,t,i)=>{i.d(t,{getNumericFormatter:()=>u,getPercentageFormatter:()=>d,getPipFormatter:()=>g,getVolumeFormatter:()=>h});var n=i(808708),r=i(722652),s=i(291066),o=i(89831);class a extends o.PriceFormatter{constructor(e){const{priceScale:t,minMove:i=1,type:n,typespecs:r,minMove2:o,ignoreLocaleNumberFormat:a}=e;("forex"===n||(0,s.isCFDSymbol)(n,r))&&o?(super({priceScale:o,ignoreLocaleNumberFormat:a}),this._isForex=!0):(super({priceScale:1,ignoreLocaleNumberFormat:a}),this._isForex=!1),this._pipPriceScale=t,this._pipMinMove=i,this._pipMinMove2=o}format(e,t={}){const{signPositive:i,tailSize:n,ignoreLocaleNumberFormat:r,noExponentialForm:s}=t;let o=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===o&&(o=NaN),super.format(e*this._pipPriceScale/o,{signPositive:i,tailSize:n,ignoreLocaleNumberFormat:r,noExponentialForm:s})}}var l=i(51196),c=i(909456);const u=(0,c.numDependencyFormatter)((e=>new n.NumericFormatter({precision:e}))),d=(0,c.numDependencyFormatter)((e=>new r.PercentageFormatter({priceScale:Math.pow(10,e??2),minMove:1}))),h=(0,c.numDependencyFormatter)((e=>new l.VolumeFormatter({precision:e}))),p=new WeakMap;function g(e){let t=p.get(e);return t||(t=new a({priceScale:e.pricescale,minMove:e.minmov,minMove2:e.minmove2,type:e.type,typespecs:e.typespecs}),p.set(e,t)),t}},65840:(e,t,i)=>{i.d(t,{coordinateIsValid:()=>f,extendAndClipLineSegment:()=>u,fillScaledRadius:()=>v,getArrowPoints:()=>d,interactionTolerance:()=>m,optimalBarWidth:()=>h,optimalCandlestickWidth:()=>p,optimalHiLoWidth:()=>g,roundToMax:()=>y,setValidLineStyle:()=>_,strokeScaledRadius:()=>x});var n=i(536794),r=i(610555),s=i(648892),o=i(822961),a=i(338242);const l={common:13,line:13,tradingLine:16,minDistanceBetweenPoints:10,series:14,curve:10,anchor:13,esd:4},c={common:3,line:3,tradingLine:3,minDistanceBetweenPoints:5,series:2,curve:3,anchor:2,esd:0};function u(e,t,i,n,o,a){if((0,r.equalPoints)(e,t))return null;const l=new r.Point(0,0),c=new r.Point(i,n);if(o){if(a){const i=(0,s.intersectLineAndBox)((0,r.lineThroughPoints)(e,t),(0,r.box)(l,c));return Array.isArray(i)?i:null}{const i=(0,s.intersectRayAndBox)(t,e,(0,r.box)(l,c));return null===i||(0,r.equalPoints)(t,i)?null:(0,r.lineSegment)(t,i)}}if(a){const i=(0,s.intersectRayAndBox)(e,t,(0,r.box)(l,c));return null===i||(0,r.equalPoints)(e,i)?null:(0,r.lineSegment)(e,i)}{const i=(0,s.intersectLineSegmentAndBox)((0,r.lineSegment)(e,t),(0,r.box)(l,c));return Array.isArray(i)?i:null}}function d(e,t,i,n,r){const s=.5*i,o=Math.sqrt(2),a=t.subtract(e),l=a.normalized();let c=5*i;n&&(c=Math.min(c,.35*a.length()));const u=1*s;if(c*o*.2<=u)return[];const d=l.scaled(c),h=t.subtract(d),p=l.transposed(),g=1*c,m=p.scaled(g),f=h.add(m),_=h.subtract(m),v=f.subtract(t).normalized().scaled(u),x=_.subtract(t).normalized().scaled(u),y=r?t:t.add(v),b=r?t:t.add(x),w=s*(o-1),S=p.scaled(w),C=Math.min(c-1*s/o,s*o*1),P=l.scaled(C),T=t.subtract(S),V=t.add(S),A=t.subtract(P)
;return[[f,y],[b,_],[T,A.subtract(S)],[V,A.add(S)]]}function h(e,t){return t=t||1,Math.floor(.3*e*t)}function p(e,t){if(e>=2.5&&e<=4)return Math.floor(3*t);const i=1-.2*Math.atan(Math.max(4,e)-4)/(.5*Math.PI),n=Math.floor(e*i*t),r=Math.floor(e*t),s=Math.min(n,r);return Math.max(Math.floor(t),s)}function g(e){return.4*e}function m(){return(0,o.lastMouseOrTouchEventInfo)().isTouch?l:c}function f(e){return null!=e&&!(0,n.isNaN)(e)}function _(e,t){void 0!==t&&(0,a.setLineStyle)(e,t)}function v(e,t){const i=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+i}function x(e,t,i){const n=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+(n!==i%2?.5:0)}function y(e){return Math.max(Math.floor(e),1)}},964401:(e,t,i)=>{i.d(t,{svgRenderer:()=>T});var n=i(650151),r=i(735566);const s=(0,r.getLogger)("Chart.SvgParser");function o(e,t){const i=e.split(/[,\s]/).map((e=>parseFloat(e.trim())));let n=0;for(const e of i){if(!Number.isFinite(e)&&n<t)return null;n+=1}return i}const a=/([a-zA-Z]+)\((.*)\)/g;function l(e,t){const i=e.getAttribute("transform")?.toLowerCase();if(void 0===i)return null;const n=[];let r;a.lastIndex=0;do{if(r=a.exec(i),null!==r){const e=r[1],i=r[2];switch(e){case"matrix":const r=o(i,6);null!==r&&n.push({type:e,a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]});break;case"rotate":const a=o(i,1);null!==a&&n.push({type:e,a:a[0],x:a[1]??(t?t.width/2:void 0),y:a[2]??(t?t.height/2:void 0)});break;case"translate":const l=o(i,1);null!==l&&n.push({type:e,x:l[0],y:l[1]});break;case"scale":const c=o(i,1);null!==c&&n.push({type:e,x:c[0],y:c[1]});break;default:s.logWarn(`Unsupported transform operation: ${e}`)}}}while(null!==r);return 0===n.length?null:n}function c(e,t){for(const i of t)switch(i.type){case"matrix":e.transform(i.a,i.b,i.c,i.d,i.e,i.f);break;case"rotate":void 0!==i.x&&void 0!==i.y&&e.translate(i.x,i.y),e.rotate(i.a*Math.PI/180),void 0!==i.x&&void 0!==i.y&&e.translate(-i.x,-i.y);break;case"scale":e.scale(i.x,i.y??i.x);break;case"translate":e.translate(i.x,i.y??0)}}function u(e,t){return parseFloat(e.getAttribute(t)??"")}const d=/^url\(#(.*)\)/;function h(e){return d.exec(e)?.[1]??null}function p(e,t,i){const r={},s=e.getAttribute("fill");if(null!==s){const e=h(s);r.getFillStyle=null!==e?i=>(0,n.ensureDefined)(t.getStyle(e,i)):e=>s}const o=e.getAttribute("stroke");if(null!==o){const e=h(o);r.getStrokeStyle=null!==e?i=>(0,n.ensureDefined)(t.getStyle(e,i)):e=>o}const a=u(e,"stroke-width");Number.isFinite(a)&&(r.strokeWidth=a);const c=u(e,"opacity");Number.isFinite(c)&&(r.fillOpacity=c,r.strokeOpacity=c);const d=u(e,"stroke-opacity");Number.isFinite(d)&&(r.strokeOpacity=d);const p=u(e,"fill-opacity");if(Number.isFinite(p)&&(r.fillOpacity=p),i){const t=l(e);null!==t&&(r.transform=t)}return r}class g{constructor(e){this._transformOperations=e}apply(e,t){null!==this._transformOperations?(e.save(),c(e,this._transformOperations)):e.restore()}}class m{constructor(e,t,i){this._styleData={...i,...p(e,t,!0)}}apply(e,t){if(!this._isValid())return
;const{getFillStyle:i,getStrokeStyle:n,strokeWidth:r,transform:s,strokeOpacity:o,fillOpacity:a}=this._styleData,l=void 0!==s||void 0!==o||void 0!==a;l&&(e.save(),void 0!==s&&c(e,s)),this._render(e);const u=i?.(e);"none"!==u&&(t.doNotApplyColors||(void 0!==a&&(e.globalAlpha=a),e.fillStyle=u??"black"),this._fill(e));const d=n?.(e);void 0!==d&&"none"!==d&&(void 0!==r&&(e.lineWidth=r),t.doNotApplyColors||(void 0!==a&&(e.globalAlpha=a),e.strokeStyle=d),this._stroke(e)),l&&e.restore()}_fill(e){e.fill()}_stroke(e){e.stroke()}}class f extends m{constructor(e,t,i){super(e,t,i);const n=e.getAttribute("d");this._path=null!==n?new Path2D(n):null,this._fillRule=e.getAttribute("fill-rule")??void 0}_fill(e){e.fill((0,n.ensureNotNull)(this._path),this._fillRule)}_stroke(e){e.stroke((0,n.ensureNotNull)(this._path))}_render(e){}_isValid(){return null!==this._path}}class _ extends m{constructor(e,t,i){super(e,t,i),this._cx=u(e,"cx"),this._cy=u(e,"cy"),this._r=u(e,"r")}_render(e){e.beginPath(),e.arc(this._cx,this._cy,this._r,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._r)}}class v extends m{constructor(e,t,i){super(e,t,i),this._cx=u(e,"cx"),this._cy=u(e,"cy"),this._rx=u(e,"rx"),this._ry=u(e,"ry")}_render(e){e.beginPath(),e.ellipse(this._cx,this._cy,this._rx,this._ry,0,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._rx)&&Number.isFinite(this._ry)}}class x{constructor(e){this._originalViewBox=e}apply(e,t){const i=t.targetViewBox;e.translate(i.x,i.y),e.scale(i.width/this._originalViewBox.width,i.height/this._originalViewBox.height),e.beginPath(),e.rect(0,0,this._originalViewBox.width,this._originalViewBox.height),e.clip(),e.translate(-this._originalViewBox.x,-this._originalViewBox.y)}}const y=(0,r.getLogger)("Chart.SvgParser");function b(e){const t=e.getAttribute("gradientUnits");if("objectBoundingBox"===t)return void y.logWarn(`Unsupported linearGradient gradientUnits: ${t}`);const i=[],n=e.getElementsByTagName("stop");for(let e=0;e<n.length;++e){const t=n[e],r=u(t,"offset"),s=t.getAttribute("stop-color");null!==s&&i.push([Number.isFinite(r)?r:0,s])}const r=u(e,"x1"),s=u(e,"y1"),o=u(e,"x2"),a=u(e,"y2");return e=>{const t=e.createLinearGradient(r,s,o,a);for(const e of i)t.addColorStop(e[0],e[1]);return t}}const w=(0,r.getLogger)("Chart.SvgParser");const S=new DOMParser,C=(0,r.getLogger)("Chart.SvgParser");function P(e,t,i,n,r,s){const o=e.children;let a,c=s;"g"!==e.tagName&&"svg"!==e.tagName||(c={...c,...p(e,r,!1)},a=l(e,{width:i,height:n})??void 0),void 0!==a&&t.push(new g(a));for(let e=0;e<o.length;++e){const s=o[e];"defs"!==s.tagName&&P(s,t,i,n,r,c)}switch(void 0!==a&&t.push(new g(null)),e.tagName){case"g":case"svg":case"defs":break;case"path":t.push(new f(e,r,s));break;case"circle":t.push(new _(e,r,s));break;case"ellipse":t.push(new v(e,r,s));break;default:C.logWarn(`Unsupported tag name: ${e.tagName}`)}}function T(e){const t=S.parseFromString(e,"application/xml"),i=[],r=t.getElementsByTagName("svg")[0],s=(0,
n.ensureNotNull)(r.getAttribute("viewBox")).split(" ").map(parseFloat),o=s[2],a=s[3],l={x:s[0],y:s[1],width:o,height:a};i.push(new x(l));let c={getStyle:()=>{}};const u=r.getElementsByTagName("defs");return u.length>0&&(c=function(e){const t={},i=e.children;for(let e=0;e<i.length;++e){const n=i[e],r=n.getAttribute("id");r&&("linearGradient"===n.tagName?t[r]=b(n):w.logWarn(`Unsupported defs tag: ${n.tagName}`))}const n=new WeakMap;return{getStyle:(e,i)=>{const r=t[e];if(!r)return;let s=n.get(i);void 0===s&&(s=new Map,n.set(i,s));const o=s.get(e);if(void 0!==o)return o;const a=r(i);return s.set(e,a),a}}}(u[0])),P(r,i,o,a,c),{viewBox:()=>l,render:(e,t)=>{e.save();for(const n of i)n.apply(e,t);e.restore()}}}},938186:(e,t,i)=>{i.d(t,{factoryDefaultsForCurrentTheme:()=>l});var n=i(998034),r=i(154834),s=i(650151),o=i(331633),a=i(61499);function l(e,t){const i=o.watchedTheme.value()??a.StdTheme.Light,l=(0,r.default)(e);return(0,n.default)(l,(0,s.ensureDefined)(t.get(i))),l}},837462:(e,t,i)=>{function n(e,t,i,n){return`${n?n+" ":""}${i?i+" ":""}${e}px ${t}`}i.d(t,{makeFont:()=>n,parseFont:()=>s});const r=/(bold )?(italic )?(\d+)(px|pt) (.*)$/;function s(e){const t=r.exec(e);return null===t?null:{family:t[5],size:parseInt(t[3])*("pt"===t[4]?.75:1),bold:Boolean(t[1]),italic:Boolean(t[2])}}},335048:(e,t,i)=>{i.d(t,{CubicBezier:()=>n.CubicBezier,color:()=>n.color,dur:()=>n.dur,easingFunc:()=>n.easingFunc});var n=i(745269)}}]);