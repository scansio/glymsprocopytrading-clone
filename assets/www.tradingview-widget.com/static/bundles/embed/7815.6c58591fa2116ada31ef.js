"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[7815],{542301:(t,e,i)=>{i.d(e,{PanePriceAxisView:()=>a});var s=i(960433);class n{constructor(t){this._priceAxisViewRenderer=null,this._rendererOptions=null,this._align="right",this._textWidthCache=t}setParams(t,e,i,s,n){this._priceAxisViewRenderer=t,this._rendererOptions=e,this._align=n}draw(t,e){null!==this._rendererOptions&&null!==this._priceAxisViewRenderer&&this._priceAxisViewRenderer.draw(t,e,this._rendererOptions,this._textWidthCache,this._align)}hitTest(t,e){return void 0===this._priceAxisViewRenderer?.hitTest?null:this._priceAxisViewRenderer?.hitTest(t,e,this._align)}}class a{constructor(t,e,i){this._renderer=null,this._invalidated=!0,this._priceAxisView=t,this._textWidthCache=new s.TextWidthCache(100),this._dataSource=e,this._chartModel=i,this._fontSize=-1,this._panePriceAxisViewRenderer=new n(this._textWidthCache)}update(t){this._invalidated=!0}renderer(t){return this._invalidated&&this._updateImpl(t),this._renderer}_position(){const t=this._chartModel.crosshairSource(),e=this._dataSource===t?t.pane:this._chartModel.paneForSource(this._dataSource);if(null===e)return null;const i=this._priceScale();if(null===i)return null;let s=e.priceScalePosition(i);return"overlay"===s&&(s=e.priceScalePosition(e.defaultPriceScale())),"overlay"===s?null:s}_updateImpl(t){this._renderer=null;const e=this._position();if(null===e)return;const i=this._chartModel.priceAxisRendererOptions();i.fontSize!==this._fontSize&&(this._fontSize=i.fontSize,this._textWidthCache.reset()),this._panePriceAxisViewRenderer.setParams(this._priceAxisView.paneRenderer(),i,t.mediaSize.width,t.mediaSize.height,e),this._renderer=this._panePriceAxisViewRenderer,this._invalidated=!1}_priceScale(){return this._dataSource.priceScale()}}},622393:(t,e,i)=>{i.d(e,{applyColor:()=>r});var s=i(283873),n=i(850117),a=i(660603);const l=new WeakMap;function r(t,e,i=0,r=3){const{context:o,bitmapSize:h,mediaSize:c}=t;let d;if((0,s.default)(e))d=e;else if(e.type===a.ColorType.Solid)d=e.color;else{let t=l.get(o);void 0===t&&(t=new n.CircularCacheBuffer(1e3),l.set(o,t));const s=0===i?c.height:h.height,a=`${e.startColor}_${e.endColor}_${s}`;let r=t.get(a);void 0===r&&(r=o.createLinearGradient(0,0,0,s),r.addColorStop(0,e.startColor),r.addColorStop(1,e.endColor),t.set(a,r)),d=r}1&r&&(o.strokeStyle=d),2&r&&(o.fillStyle=d)}},300562:(t,e,i)=>{i.d(e,{PaneRendererArea:()=>o});var s=i(610555),n=i(919383),a=i(65840),l=i(338242),r=i(622393);class o extends n.PaneRendererLine{constructor(t){t.forceLineColor=!1,super(t)}_drawImpl(t){const e=this._data;if(0===e.items.length)return;let i=this._data.visibleItemsRange?.startItemIndex??0,o=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(;i<o&&!(0,a.coordinateIsValid)(e.items[i].y);)i++;for(;o>=0&&!(0,a.coordinateIsValid)(e.items[o].y);)o--;if(i>o)return;const{context:h,horizontalPixelRatio:c,verticalPixelRatio:d}=t;h.save(),h.scale(c,d),h.lineCap="round",(0,r.applyColor)(t,e.lineColor,0,1),h.lineWidth=e.lineWidth,(0,
l.setLineStyle)(h,e.lineStyle),h.lineWidth=1;const u=new Map,_=new n.PaneRendererLineItemsIterator(this._data.items,i,o+1,this._data.skipHoles);for(;_.next();){const t=_.currentValue();let i;i=(0,n.isValidPoint)(t)&&t.style?t.style.color:e.lineColor;const s=_.nextValue();if((0,n.isValidPoint)(s)&&s?.style){const e=s.style.color;if(i!==e){const i=u.get(e)??[];i.push(t),u.set(e,i)}}const a=u.get(i)??[];a.push(t),u.set(i,a)}for(const[i,a]of u){h.beginPath();let l=0;for(let t=0;t<a.length;t++){const r=a[t];if(!(0,n.isValidPoint)(r))continue;if(!r.style||r.style?.color===i)continue;const o=(0,s.point)(Math.round(a[l].center),e.bottom);h.moveTo(o.x,o.y),this._walkLine(h,a.slice(l,t),!0,e.bottom,!0,!1,o),l=t}{const n=(0,s.point)(Math.round(a[l].center),e.bottom);if(h.moveTo(n.x,n.y),this._walkLine(h,a.slice(l,a.length),!0,e.bottom,!0,!1,n),h.closePath(),e.isSeries){const t=h.createLinearGradient(0,0,0,e.bottom);t.addColorStop(0,e.color1),t.addColorStop(1,e.color2),h.fillStyle=t,e.simpleMode=!0}else(0,r.applyColor)(t,i,0,2);h.fill()}}h.lineWidth=e.lineWidth,h.restore(),super._drawImpl(t)}}},919383:(t,e,i)=>{i.d(e,{PaneRendererLine:()=>p,PaneRendererLineItemsIterator:()=>m,isValidPoint:()=>f});var s=i(650151),n=i(610555),a=i(2624),l=i(731974),r=i(65840),o=i(338242),h=i(320994),c=i(622393),d=i(660439),u=i(907119);const _={y:NaN};function f(t){return null!==t&&!isNaN(t.y)}class m{constructor(t,e,i,n){this._calculatedPrev={index:null,currentBreakProcessed:!1,value:null},this._calculatedCurrent={index:null,currentBreakProcessed:!1,value:null},this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},this._preallocatedVariable={index:null,currentBreakProcessed:!1,value:null},t.length&&((0,s.assert)(e<=i,"First index must be less or equal to last index"),(0,s.assert)(e<t.length,"First index must be less then array length"),(0,s.assert)(i<=t.length,"Last index must be less or equal to array length")),this._items=t,this._firstIndexWithRange=e,this._lastIndexWithRange=i,this._skipHoles=n}next(){if(0===this._items.length)return!1;if(null!==this._calculatedNext.index)return null!==this._calculatedNext.value&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._calculatedNext,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},!0);let t;this._preallocatedVariable={...this._calculatedCurrent};do{null===this._preallocatedVariable.index?(this._preallocatedVariable.index=this._firstIndexWithRange,this._preallocatedVariable.currentBreakProcessed=!1,t=this._preallocatedVariable.index<this._lastIndexWithRange):(this._incrementPointer(this._preallocatedVariable),t=this._isValidPointer(this._preallocatedVariable)),t&&this._calcVaue(this._preallocatedVariable)}while(t&&this._skipHoles&&!f(this._preallocatedVariable.value));return t&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._preallocatedVariable,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null}),t}prevValue(){return this._calculatedPrev.value}currentValue(){return(0,
s.ensureNotNull)(this._calculatedCurrent.value)}currentValueIsLast(){return(0,s.ensureNotNull)(this._calculatedCurrent.index)===this._items.length-1}currentValueIsFirst(){return 0===(0,s.ensureNotNull)(this._calculatedCurrent.index)}nextValue(){if(null!==this._calculatedNext.index)return this._calculatedNext.value;let t;this._calculatedNext={...this._calculatedCurrent,value:null};do{this._incrementPointer(this._calculatedNext),t=this._isValidPointer(this._calculatedNext),t?this._calcVaue(this._calculatedNext):this._calculatedNext.value=null}while(t&&this._skipHoles&&!f(this._calculatedNext.value));return this._calculatedNext.value}atStart(){return this._calculatedCurrent.index===this._firstIndexWithRange&&!this._calculatedCurrent.currentBreakProcessed}atEnd(){const t=(0,s.ensureNotNull)(this._calculatedCurrent.index);return t<this._lastIndexWithRange&&(this._calculatedCurrent.currentBreakProcessed||!this._needBreakBefore(t))}_needBreakBefore(t){return!!this._items[t].breakBefore&&!this._skipHoles}_calcVaue(t){const e=(0,s.ensureNotNull)(t.index);this._needBreakBefore(e)&&!t.currentBreakProcessed?t.value=_:t.value=this._items[e]}_incrementPointer(t){const e=(0,s.ensureNotNull)(t.index);this._needBreakBefore(e)&&!this._calculatedCurrent.currentBreakProcessed?t.currentBreakProcessed=!0:(t.index=e+1,t.currentBreakProcessed=!1)}_isValidPointer(t){const e=(0,s.ensureNotNull)(t.index);return e<this._lastIndexWithRange||e===this._lastIndexWithRange-1&&this._needBreakBefore(e)&&t.currentBreakProcessed}}class p extends h.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=t}hitTest(t){const e=(0,r.interactionTolerance)().series+this._data.lineWidth/2;let i=this._data.visibleItemsRange?.startItemIndex??0,s=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(;s-i>2;){const e=Math.round((s+i)/2);this._data.items[e].center<=t.x?i=e:s=e}i=Math.max(1,i-1),s=Math.min(this._data.items.length-1,s+1);for(let r=i;r<=s;++r){const i=this._data.items[r-1],s=this._data.items[r],o=i.center,h=s.center;if((0,a.distanceToSegment)(new n.Point(o,i.y),new n.Point(h,s.y),new n.Point(t.x,t.y)).distance<=e)return this._data.hittest?this._data.hittest:new l.HitTestResult(l.HitTarget.Regular)}return null}_drawImpl(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:s}=t;e.scale(i,s),e.lineCap="round",e.lineJoin="round",(0,c.applyColor)(t,this._data.lineColor,0,3),e.lineWidth=this._data.lineWidth,(0,o.setLineStyle)(e,this._data.lineStyle),(0,r.setValidLineStyle)(e,this._data.lineStyle),this._data.simpleMode?this._drawSimpleMode(t):this._drawLines(e)}_drawSimpleMode(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:s}=t;e.beginPath(),this._walkLine(e,this._data.items,!1,NaN),e.stroke();const n=this._data.lineWidth+2;if(this._data.withMarkers&&2*n<this._data.barSpacing){e.scale(1/i,1/s),(0,c.applyColor)(t,this._data.lineColor,1,2);const a=Math.max(1,Math.floor(i))%2/2,l=n*s+a,r=2*Math.PI;e.beginPath();const o=this._data.visibleItemsRange?.startItemIndex??0
;for(let t=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1+1;t-- >=o;){const n=this._data.items[t];if(n){const t=Math.round(n.center*i)+a,o=n.y*s;e.moveTo(t,o),e.arc(t,o,l,0,r)}}e.fill()}}_walkLine(t,e,i,s,n,a,l){if(!e)return{distance:0,dashPattern:[]};const r=.25*this._data.barSpacing;let o,h,c=null;const _=n?0:this._data.visibleItemsRange?.startItemIndex??0,p=n?e.length:Math.min(this._data.visibleItemsRange?.endItemIndex??e.length,e.length);if(_>p||_>=e.length)return{distance:0,dashPattern:[]};if(!a){const{distance:a,dashPattern:r}=this._walkLine(t,e,i,s,n,!0,l),o=(0,d.sum)(r);if(o>0){const e=a%o;t.lineDashOffset=o-e-r[1]}}const x=new u.SmartDashCanvas(t,!!a,l),y=new m(e,_,p,this._data.skipHoles);for(;y.next();){if(o=y.currentValue(),h=y.nextValue(),f(o)){const t=Math.round(o.center);c&&f(c)?(x.lineTo(t,o.y),i&&!f(h)&&x.lineTo(t,s)):h&&f(h)?i?(y.atStart()||x.lineTo(t,s),x.lineTo(t,o.y)):x.moveTo(t,o.y):i?(y.atStart()||x.lineTo(t-r,s),x.lineTo(t-r,o.y),x.lineTo(t+r,o.y),x.lineTo(t+r,s)):(x.moveTo(t-r,o.y),x.lineTo(t+r,o.y))}c=o}return{distance:x.lastSegmentDistance(),dashPattern:x.lastSegmentDashPattern()}}_drawLines(t,e){if(!this._data.items.length||0===this._data.lineWidth)return{distance:0,dashPattern:[]};let i,s,n=null;const a=.25*this._data.barSpacing,l=new u.SmartDashCanvas(t,!!e);let r=0;if(!e){const{distance:e,dashPattern:i}=this._drawLines(t,!0),s=(0,d.sum)(i);if(s>0){const n=e%s;t.lineDashOffset=r=s-n-i[1]}}l.beginPath();const o=this._data.visibleItemsRange?.startItemIndex??0,h=this._data.visibleItemsRange?.endItemIndex??this._data.items.length;if(o>h||o>=this._data.items.length)return{distance:0,dashPattern:[]};const c=this._data.items[o];c&&l.moveTo(c.center,c.y);let _,p=t.strokeStyle,x=t.lineWidth;const y=new m(this._data.items,o,h,this._data.skipHoles);for(;y.next();){let o,h,c;n=y.prevValue(),i=y.currentValue(),s=y.nextValue();let u=!1,m=!1,v=!1;if(f(i)&&(i.style&&!this._data.forceLineColor?(o=i.style.color,h=i.style.width,c=i.style.style):(o=this._data.lineColor,h=this._data.lineWidth,c=this._data.lineStyle),this._data.ignorePaletteLineWidth&&(h=this._data.lineWidth),m=c!==_,v=h!==x,u=o!==p||m||v),u){if(p=o,x=h,_=c,l.stroke(),l.beginPath(),!e){l.setStrokeStyle(o);const e=l.lastSegmentDistance(),i=l.lastSegmentDashPattern(),s=(0,d.sum)(i);if(s>0){const i=e%s;t.lineDashOffset=i+r}}if(l.setLineWidth(h),l.setLineStyle(c),f(n))l.moveTo(n.center,n.y);else{const t=i;l.moveTo(t.center,t.y)}}g=n,I=s,f(P=i)&&(f(g)?l.lineTo(P.center,P.y):I&&f(I)?l.moveTo(P.center,P.y):(l.moveTo(P.center-a,P.y),l.lineTo(P.center+a,P.y)))}var g,P,I;return l.stroke(),{distance:l.lastSegmentDistance(),dashPattern:l.lastSegmentDashPattern()}}}},907119:(t,e,i)=>{i.d(e,{SmartDashCanvas:()=>o});var s=i(650151),n=i(610555),a=i(65840),l=i(257145),r=i(338242);class o{constructor(t,e,i){this._lastSegmentDistance=0,this._lastLineWidth=-1,this._lastLineStyle=-1,this._ctx=t,this._calculateOnly=e,this._lastDashPattern=t.getLineDash(),this._lastPoint=i??null}beginPath(){this._calculateOnly||this._ctx.beginPath()}
stroke(){this._calculateOnly||this._ctx.stroke()}fill(){this._calculateOnly||this._ctx.fill()}lastSegmentDistance(){return this._lastSegmentDistance}lastSegmentDashPattern(){return this._lastDashPattern}lastLineWidth(){return this._lastLineWidth}moveTo(t,e){this._lastPoint=(0,n.point)(t,e),this._calculateOnly||this._ctx.moveTo(t,e)}lineTo(t,e){const i=(0,s.ensureNotNull)(this._lastPoint),a=i.x-t,l=i.y-e;this._lastSegmentDistance+=Math.sqrt(a*a+l*l),this._calculateOnly||this._ctx.lineTo(t,e),this._lastPoint=(0,n.point)(t,e)}setLineWidth(t){this._lastLineWidth!==t&&(this._lastLineWidth=t,this._lastDashPattern=this._lastLineStyle===l.LINESTYLE_SOLID?[]:(0,r.computeDashPattern)(t,this._lastLineStyle),this._calculateOnly||(this._ctx.lineWidth=t,this._lastLineStyle>=0&&(0,a.setValidLineStyle)(this._ctx,this._lastLineStyle)))}setLineStyle(t){this._lastLineStyle!==t&&(this._lastLineStyle=t??this._lastLineStyle),void 0!==t&&this._lastLineWidth>0&&(this._lastDashPattern=t===l.LINESTYLE_SOLID?[]:(0,r.computeDashPattern)(this._lastLineWidth,t)),this._calculateOnly||(0,a.setValidLineStyle)(this._ctx,t)}setStrokeStyle(t){this._calculateOnly||(this._ctx.strokeStyle=t)}context(){return this._ctx}}},255143:(t,e,i)=>{i.d(e,{PaneRendererStepLine:()=>y,StepLineDecoration:()=>s});var s,n=i(2624),a=i(610555),l=i(731974),r=i(65840),o=i(338242),h=i(320994),c=i(919383),d=i(622393),u=i(907119),_=i(660439);!function(t){t[t.None=0]="None",t[t.Diamonds=1]="Diamonds"}(s||(s={}));class f{constructor(t){this._forceExtendFirstBar=!!t}initialize(t,e,i,s){const{context:n,horizontalPixelRatio:a,verticalPixelRatio:l}=i,r=e.lineStyle;n.lineCap="butt",n.lineJoin="round";const o=Math.max(Math.floor(s.style?.width??e.lineWidth*a));t.setLineStyle(r);const h=o%2?.5:0;t.moveTo(Math.round(s.center*a)+h,Math.round(s.y*l)+h),(0,d.applyColor)(i,s.style?.color??e.lineColor,1,1),t.setLineWidth(o)}startFragment(t,e,i,s,n){t.beginPath();const a=s.firstItem&&s.extendToBarsEndings?i.center:i.left;t.moveTo(isNaN(a)?-50:a,n?.y??i.y)}finishFragment(t,e,i,s){i&&s&&t.lineTo(i.left,s.y),t.stroke()}hitTest(t,e,i,s){if(!(0,c.isValidPoint)(e))return!1;const l=e.style?.width??t.lineWidth,o=(0,r.interactionTolerance)().series+l/2,{left:h,y:d}=e,u=isNaN(h)?-50:h;let _,f;return i&&(0,c.isValidPoint)(i)?(_=i.left,f=i.y):(_=e.right,f=e.y),!(u<s.x-o&&_<s.x-o||u>s.x+o&&_>s.x+o)&&((0,n.distanceToSegment)((0,a.point)(u,d),(0,a.point)(_,d),s).distance<o||d!==f&&(0,n.distanceToSegment)((0,a.point)(_,d),(0,a.point)(_,f),s).distance<o)}applyColor(t,e){(0,d.applyColor)(t,e,1,1)}applyLineWidth(t,e,i){t.setLineWidth(i)}applyLineStyle(t,e,i){t.setLineStyle(i)}drawItem(t,e,i,s,n){void 0!==n&&t.lineTo(i.left,n.y),t.lineTo(!s.firstItem||s.extendToBarsEndings||this._forceExtendFirstBar?i.left:i.center,i.y),t.lineTo(s.lastItem&&!s.extendToBarsEndings?i.center:i.right,i.y)}needDashOffset(){return!0}}class m{constructor(){this._lineWidth=1,this._initialAlpha=1}initialize(t,e,i,s){this._initialAlpha=i.context.globalAlpha,this.applyColor(i,s.style?.color??e.lineColor),
this._lineWidth=Math.max(Math.floor(s.style?.width??e.lineWidth*i.horizontalPixelRatio))}startFragment(t,e,i,s,n){t.beginPath()}finishFragment(t,e){e.fill()}drawItem(t,e,i,s,n){if(s.valIsNotSameAsPrev&&!isNaN(i.left)){const t=e.context;t.save(),t.translate(i.left,i.y),t.rotate(Math.PI/4);const s=this._scaleByLineWidth(this._lineWidth);t.scale(s,s),this._drawItemRotatedAndTranslated(e),t.restore()}}applyLineWidth(t,e,i){this._lineWidth=i}applyLineStyle(t,e,i){}hitTest(t,e,i,s){if(!e.valIsNotSameAsPrev)return!1;const n=s.subtract((0,a.point)(e.left,e.y));return this._hitTestTranslated(n,e.style?.width??t.lineWidth)}needDashOffset(){return!1}_scaleByLineWidth(t){return Math.sqrt(t)}}class p extends m{applyColor(t,e){(0,d.applyColor)(t,e,1,2)}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<8*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,o.drawRoundRect)(t.context,-4,-4,8,8,2,!0)}}class x extends m{applyColor(t,e){t.context.globalAlpha=.15*this._initialAlpha,(0,d.applyColor)(t,e,1,2)}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<21*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,o.drawRoundRect)(t.context,-10.5,-10.5,21,21,5,!0)}}class y extends h.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._data=t??null}setData(t){this._data=t}hitTest(t){const e=this._data;if(null===e||0===e.items.length)return null;const{items:i,visibleItemsRange:n,skipHoles:a}=e,r=n?.startItemIndex??0,o=n?.endItemIndex??i.length;if(o<=r)return null;const h=e.decoration===s.Diamonds?[new f,new x]:[new f];const d=new c.PaneRendererLineItemsIterator(i,r,o,a);for(;d.next();){const i=d.currentValue(),s=d.nextValue();for(const n of h)if((0,c.isValidPoint)(i)&&n.hitTest(e,i,(0,c.isValidPoint)(s)?s:null,t))return new l.HitTestResult(l.HitTarget.Regular)}return null}_drawImpl(t){if(null===this._data||0===this._data.items.length)return;(this._data.decoration===s.Diamonds?[new f(!0),new p,new x]:[new f]).forEach((e=>this._drawDecorationItem(t,e)))}_drawDecorationItem(t,e,i){if(null===this._data||0===this._data.items.length)return{distance:0,dashPattern:[]};const{lineWidth:s,lineColor:n,lineStyle:a,items:l,visibleItemsRange:r,skipHoles:o,extendToBarsEndings:h}=this._data,{context:d,horizontalPixelRatio:f,verticalPixelRatio:m}=t;let p=!1,x=Math.max(Math.floor((l[0].style?.width??s)*f)),y=x%2?.5:0;const g=r?.startItemIndex??0,P=r?.endItemIndex??l.length;if(P<=g)return{distance:0,dashPattern:[]};const I=new u.SmartDashCanvas(d,!!i);let v,S,C,w,b=0;if(!i&&e.needDashOffset()){const{distance:i,dashPattern:s}=this._drawDecorationItem(t,e,!0),n=(0,_.sum)(s);if(n>0){const t=i%n;d.lineDashOffset=b=n-t-s[1]}}e.initialize(I,this._data,t,l[0]),e.applyColor(t,l[g].style?.color??n),e.applyLineWidth(I,d,x),e.applyLineStyle(I,d,a);let T=!1;const R=new c.PaneRendererLineItemsIterator(l,g,P,o);for(;R.next();){const l=R.currentValue();if(!(0,c.isValidPoint)(l)){v=void 0,T=!0;continue}const r=l.style?.color??n,o=l.style?.width??s,u=l.style?.style??a,g=r!==S,P=o!==C,L=u!==w,M={
firstItem:R.currentValueIsFirst(),lastItem:R.currentValueIsLast(),extendToBarsEndings:h,valIsNotSameAsPrev:l.valIsNotSameAsPrev},B={y:Math.round(l.y*m)+y,left:Math.round(l.left*f)+y,center:Math.round(l.center*f)+y,right:Math.round(l.right*f)+y};if(g||P||T||L){if(S&&C&&p&&(e.finishFragment(I,d,B,v),p=!1),g&&e.applyColor(t,r),P&&(x=Math.max(1,Math.floor(o*f)),y=x%2?.5:0,e.applyLineWidth(I,d,x)),L&&e.applyLineStyle(I,d,u),!i){const t=I.lastSegmentDistance(),e=I.lastSegmentDashPattern(),i=(0,_.sum)(e);if(i>0){const e=t%i;d.lineDashOffset=e+b}}e.startFragment(I,d,B,M,v),p=!0,T=!1,S=r,C=o,w=u}e.drawItem(I,t,B,M,v),v=B}return p&&(e.finishFragment(I,d),p=!1),{distance:I.lastSegmentDistance(),dashPattern:I.lastSegmentDashPattern()}}}},975022:(t,e,i)=>{i.d(e,{SelectionIndexes:()=>n});var s=i(650151);class n{constructor(t){this._baseIndex=null,this._offsetInBar=null,this._offsetInTime=null,this._barsBetweenPoints=null,this._timescale=t}indexes(){const t=this._timescale.visibleBarsStrictRange();if(null===t)return[];const e=t.firstBar(),i=t.lastBar();if(null===this._offsetInTime||null===this._barsBetweenPoints){const t=this._timescale.barSpacing();this._barsBetweenPoints=Math.floor(120/t),this._offsetInBar=i%this._barsBetweenPoints,this._offsetInTime=this._timescale.indexToTimePoint(this._offsetInBar),this._baseIndex=this._timescale.baseIndex()}const n=this._timescale.baseIndex();this._baseIndex!==n&&(this._baseIndex=n,this._offsetInBar=(0,s.ensureNotNull)(this._timescale.timePointToIndex(this._offsetInTime)));const a=(0,s.ensureNotNull)(this._offsetInBar),l=[];let r=Math.floor((e-a)/this._barsBetweenPoints);const o=Math.floor((i-a)/this._barsBetweenPoints);for(;r<=o;r++)l.push(a+r*this._barsBetweenPoints);return l}clear(){this._offsetInBar=null,this._offsetInTime=null,this._baseIndex=null,this._barsBetweenPoints=null}}},123003:(t,e,i)=>{function s(t){t.lineWidth=void 0,t.lineStyle=void 0;for(let e=0;e<t.colors.length;e++)t.colors[e]=void 0;return t}function n(){return{colors:[void 0,void 0,void 0,void 0,void 0,void 0,void 0],lineWidth:void 0,lineStyle:void 0}}i.d(e,{clearStyle:()=>s,createEmptyStyle:()=>n})},564079:(t,e,i)=>{i.d(e,{PaneRendererColumns:()=>a});var s=i(320994),n=i(731974);class a extends s.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._precalculatedCache=[],this.setData(t)}setData(t){this._data=t,this._precalculatedCache=[]}hitTest(t){if(null===this._data)return null;const e=this._data.visibleItemsRange?.startItemIndex??0,i=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(let s=e;s<=i;s++){const e=this._data.items[s];if(t.x>=e.left&&t.x<=e.right){const i=e.y;if(t.y>=Math.min(i,this._data.histogramBase)&&t.y<=Math.max(i,this._data.histogramBase))return new n.HitTestResult(n.HitTarget.Regular)}}return null}_drawImpl(t){if(null===this._data||0===this._data.items.length)return;const{context:e,horizontalPixelRatio:i,verticalPixelRatio:s}=t;this._precalculatedCache.length||this._fillPrecalculatedCache(i)
;const n=Math.max(1,Math.floor(i)),a=Math.max(1,Math.floor(s)),l=Math.round(this._data.histogramBase*s)-Math.floor(n/2),r=l+n,o=this._data.lineColor,h=this._data.visibleItemsRange?.startItemIndex??0,c=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(let t=h;t<=c;t++){const i=this._data.items[t],n=this._precalculatedCache[t-h],c=Math.round(i.y*s);let d,u;e.fillStyle=i.style?i.style.color:o,c<=l?(d=c,u=r):(d=l,u=c-Math.floor(a/2)+a),e.fillRect(n.left,d,n.right-n.left+1,u-d)}}_fillPrecalculatedCache(t){if(null===this._data||0===this._data.items.length)return void(this._precalculatedCache=[]);const{barSpacing:e,visibleItemsRange:i,items:s}=this._data,n=Math.ceil(e*t)<=1?0:Math.max(1,Math.floor(t)),a=i?.startItemIndex??0,l=(i?.endItemIndex??s.length)-1,r=l-a+1;if(r<=0)return void(this._precalculatedCache=[]);this._precalculatedCache=new Array(r);for(let e=a;e<=l;e++){const i=s[e],l=Math.round(i.center*t);let r,o;const h=Math.round((i.right-i.left)*t)-n;if(h%2){const t=(h-1)/2;r=l-t,o=l+t}else{const t=h/2;r=l-t,o=l+t-1}this._precalculatedCache[e-a]={left:r,right:o,roundedCenter:l,center:i.center*t,time:i.timePointIndex}}for(let t=a+1;t<=l;t++){const e=this._precalculatedCache[t-a],i=this._precalculatedCache[t-a-1];e.time===i.time+1&&(e.left-i.right!==n+1&&(i.roundedCenter>i.center?i.right=e.left-n-1:e.left=i.right+n+1))}let o=Math.ceil(e*t);for(let t=a+1;t<=l;t++){const e=this._precalculatedCache[t-a];e.right<e.left&&(e.right=e.left);const i=e.right-e.left+1;o=Math.min(i,o)}if(n>0&&o<4)for(let t=a+1;t<=l;t++){const e=this._precalculatedCache[t-a];e.right-e.left+1>o&&(e.roundedCenter>e.center?e.right-=1:e.left+=1)}}}},723655:(t,e,i)=>{i.d(e,{createStudyPlotColorProvider:()=>_});var s=i(974145),n=i(650151),a=i(123003);const l=new Map([[0,"color"],[2,"textColor"],[3,"borderColor"],[4,"wickColor"],[5,"colorup"],[6,"colordown"]]);class r{constructor(t){this._plotStyle=t}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return l.forEach(((t,e)=>{this._plotStyle[t]&&(i.colors[e]=this._plotStyle[t].value())})),i.lineWidth=this._plotStyle.linewidth?this._plotStyle.linewidth.value():void 0,i.lineStyle=this._plotStyle.linestyle?this._plotStyle.linestyle.value():void 0,i}isColorDefined(){return!0}singleColor(){return!0}getDefaultPlotPointStyle(){return null}}const o=[0,1,2,3,4,5,6];class h{constructor(t,e,i,s){this._palettesColors=new Map,this._defaultPlotColors=new Map,this._indexes=s;const a=e.styles[i];if(a)for(const[t,e]of l)this._defaultPlotColors.set(t,a[e]);const r=(0,n.ensureDefined)(t.palettes),o=t.plots;s.forEach(((t,i)=>{const s=o[t];if(s&&"palette"in s){const t=r[s.palette],n=e.palettes[s.palette];if(t&&n){const{valToIndex:e}=t,{colors:s}=n,a={...s};e&&Object.keys(e).forEach((t=>{const i=e[t];void 0!==i&&(a[t]=s[i])})),this._palettesColors.set(i,a)}}}))}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return o.forEach((e=>{if(this._palettesColors.has(e)){const s=t[(0,n.ensureDefined)(this._indexes.get(e))+1];if("number"==typeof s){
const t=this._palettesColors.get(e)?.[s];0===e&&t&&(i.lineWidth=t.width.value(),i.lineStyle=t.style.value()),i.colors[e]=t?.color.value()}else i.colors[e]="transparent"}else i.colors[e]=this._defaultPlotColors.get(e)?.value()})),i}getDefaultPlotPointStyle(){const t=this._palettesColors.get(0)?.[0];if(void 0!==t){return{colors:[t.color.value(),void 0,void 0,void 0,void 0,void 0,void 0],lineStyle:void 0,lineWidth:t.width.value()}}return null}isColorDefined(){return!!this._palettesColors.size}singleColor(){return!1}}var c=i(762003);class d{constructor(t){this._rgbaFromInteger=(0,c.rgbaFromIntegerCached)(),this._indexes=t}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return this._indexes.forEach(((e,s)=>{const n=t[e+1];if(null!=n){const t=this._rgbaFromInteger(n);i.colors[s]=t}else i.colors[s]="transparent"})),i}isColorDefined(){return!0}singleColor(){return!1}getDefaultPlotPointStyle(){return null}}const u=new Map([[0,function(t,e){const i=(0,s.isColorerPlot)(e)||(0,s.isOhlcColorerPlot)(e);return"target"in e&&e.target===t&&i}],[2,function(t,e){const i=(0,s.isTextColorerPlot)(e);return"target"in e&&e.target===t&&i}],[1,function(t,e){return(0,s.isBgColorerPlot)(e)&&e.id===t}],[3,function(t,e){const i=(0,s.isCandleBorderColorerPlot)(e);return"target"in e&&e.target===t&&i}],[4,function(t,e){const i=(0,s.isCandleWickColorerPlot)(e);return"target"in e&&e.target===t&&i}],[5,function(t,e){const i=(0,s.isUpColorerPlot)(e);return"target"in e&&e.target===t&&i}],[6,function(t,e){const i=(0,s.isDownColorerPlot)(e);return"target"in e&&e.target===t&&i}]]);function _(t,e,i){const{colorers:s}=function(t,e){const i=t.plots,s=i.findIndex((t=>t.id===e)),n=new Map;return i.forEach(((t,i)=>{u.forEach(((s,a)=>{s(e,t)&&n.set(a,i)}))})),{plotIndex:-1===s?null:s,colorers:n}}(t,i);if(s.size)return t.isRGB?new d(s):new h(t,e,i,s);{const t=e.ohlcPlots;if(t&&t[i])return new r(t[i]);const s=e.styles[i];return new r(s)}}},762003:(t,e,i)=>{i.d(e,{rgbaFromIntegerCached:()=>l});var s=i(259332),n=i(534328),a=i(850117);function l(t=1e3){const e=s.default.Cache;s.default.Cache=a.CircularCacheBuffer.bind(a.CircularCacheBuffer,t);const i=(0,s.default)(n.rgbaFromInteger);return s.default.Cache=e,i}}}]);